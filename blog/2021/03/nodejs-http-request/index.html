<!doctype html><html class="no-js" lang="en"><head><meta charset="utf-8"><meta name="author" content="Geshan Manandhar"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Make HTTP requests in Node.js using the native module as well as npm packages like Axios, Got, SuperAgent, and node-fetch easily."><meta name="keywords" content="nodejs http reqeusts, node js http requests"><meta name="p:domain_verify" content="e654c68562abebfa25c291f59d7d00e8"><meta property="og:type" content="website"><meta property="og:url" content="https://geshan.com.np/blog/2021/03/nodejs-http-request/"><meta property="og:title" content="5 different ways to make HTTP requests with Node.js"><meta property="og:description" content="Make HTTP requests in Node.js using the native module as well as npm packages like Axios, Got, SuperAgent, and node-fetch easily."><meta property="og:site_name" content="Geshan&#39;s Blog"><meta property="og:image" content="https://geshan.com.np/images/nodejs-http-requests/01nodejs-http-requests.jpg"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:widgets:new-embed-design" content="on"><meta name="twitter:site" content="@geshan"><meta name="twitter:creator" content="@geshan"><meta name="twitter:title" content="5 different ways to make HTTP requests with Node.js"><meta name="twitter:description" content="Make HTTP requests in Node.js using the native module as well as npm packages like Axios, Got, SuperAgent, and node-fetch easily."><meta name="twitter:image:src" content="https://geshan.com.np/images/nodejs-http-requests/01nodejs-http-requests.jpg"><link rel="canonical" href="https://blog.logrocket.com/5-ways-to-make-http-requests-in-node-js/"><meta property="fb:pages" content="30717799226"><meta property="fb:app_id" content="106030259434380"><meta name="monetization" content="$ilp.uphold.com/aKHWpqhphm9f"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicons/favicon-16x16.png"><link href="/atom.xml" rel="alternate" title="Geshan&#39;s Blog" type="application/atom+xml"><title>5 different ways to make HTTP requests with Node.js</title><link rel="preconnect" href="/" crossorigin><link rel="preload" href="/css/fonts.css" as="style"><link rel="preload" href="/fonts/source-sans-4/source-serif-4-latin-400-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/source-sans-4/source-serif-4-latin-500-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/source-sans-pro/source-sans-pro-latin-400-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="/css/fonts.css"><link rel="stylesheet" href="/css/tw-006.css"><link rel="alternate" href="/atom.xml" type="application/atom+xml" title="Geshan&#39;s Blog"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-P3NXCVQEPE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-P3NXCVQEPE');</script><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWT2D9T');</script><script src="https://cdn.jsdelivr.net/npm/@statsig/js-client@3/build/statsig-js-client+session-replay+web-analytics.min.js?apikey=client-rYO7rX8WSUyyLg9pKJwymLxM71tCE0CKgxgtUj4akzK"></script><link rel="manifest" href="/manifest.json"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="application-name" content="Geshan.com.np"><meta name="apple-mobile-web-app-title" content="Geshan.com.np"><meta name="msapplication-starturl" content="/index.html"><meta name="theme-color" content="#6947E7"><script>if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/sw.js").then(function(registration) {
        console.log('ServiceWorker registration successful with scope: ', registration.scope);
    }, function(err) {
        console.log('ServiceWorker registration failed: ', err);
    });
  }</script></head><body class="overflow-x-hidden font-ui flex flex-col min-h-screen"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWT2D9T" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><header role="banner"><div><nav class="bg-white" role="navigation"><div class="w-full md:max-w-6xl mx-auto py-4 px-4"><div class="flex items-center justify-between h-16"><div class="flex-shrink-0"><a href="/" class="flex items-center"><img class="h-12 w-12" src="/images/theme/new_logo.svg" alt="Geshan G"></a></div><div class="flex items-center gap-12"><div class="hidden sm:flex items-center gap-12"><a href="/posts/1/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">Posts </a><a href="/about/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">About Me </a><a href="https://newsletter.geshan.com.np/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">Newsletter</a></div><form class="search flex items-center" action="https://www.google.com/search" method="GET"><input type="hidden" name="sitesearch" value="geshan.com.np"><div class="relative"><input class="bg-gray-100 border border-neutralGray rounded-lg py-2 pl-10 pr-4 font-body text-sm focus:outline-none focus:ring-2 focus:ring-avocado focus:border-transparent w-40" type="text" name="q" placeholder="Search" label="search"> <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-neutralGray" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg></div></form><button type="button" class="sm:hidden inline-flex items-center justify-center p-2 rounded-md text-black focus:outline-none focus:ring-2 focus:ring-inset focus:ring-avocado" onclick="mobileView()" aria-controls="mobile-menu" aria-expanded="false"><span class="sr-only">Open main menu</span> <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg></button></div></div></div><div class="mobile-menu fixed inset-0 z-40 hidden sm:hidden bg-black bg-opacity-40" role="dialog" aria-modal="true"><div class="absolute inset-0" onclick="mobileView()" aria-hidden="true"></div><div class="mobile-menu-panel relative ml-auto flex h-full w-10/12 max-w-sm flex-col justify-start bg-white shadow-xl"><div class="flex items-center justify-between px-4 py-4 border-b border-gray-200"><div class="flex items-center gap-3"><img class="h-8 w-8" src="/images/theme/new_logo.svg" alt="Geshan G"> <span class="text-lg font-semibold text-textColor font-body">Geshan's Blog</span></div><button type="button" class="inline-flex items-center justify-center rounded-full p-2 text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-avocado" onclick="mobileView()" aria-label="Close main menu"><svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg></button></div><nav class="overflow-y-auto px-4 py-6 space-y-2"><a href="/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Home </a><a href="/posts/1/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Posts </a><a href="/about/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">About Me </a><a href="https://newsletter.geshan.com.np/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Newsletter</a></nav><div class="px 4 py-4 border-t border-gray-200"><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="rounded-lg bg-darkAvocado px-4 py-2 text-base font-regular font-body text-white hover:bg-avocado hover:text-black transition-colors w-2/3 mx-auto ml-4">Connect on LinkedIn</a></div></div></div></nav></div></header><main id="wrap" role="main" class="flex-grow md:px-0"><div id="content"><div class="row"><div><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Geshan&#39;s Blog",
    "alternativeHeadline": "5 different ways to make HTTP requests with Node.js",
    "image": "https://geshan.com.np/images/nodejs-http-requests/01nodejs-http-requests.jpg",
    "editor": "Geshan Manandhar",
    "genre": "Software Engineering",
    "keywords": "nodejs http reqeusts, node js http requests",
    "url": "https://geshan.com.np/blog/2021/03/nodejs-http-request/",
    "datePublished": "2021-03-29",
    "dateCreated": "2021-03-29",
    "dateModified": "2021-03-29",
    "description": "Make HTTP requests in Node.js using the native module as well as npm packages like Axios, Got, SuperAgent, and node-fetch easily.",
    "articleBody": "There are multiple ways to make HTTP requests in Node.js. We can do so using the standard HTTP/HTTPS module, of course, or we could use one of a number of npm packages that make our lives much easier.In this post, we are going to see code examples of the native HTTPS module that comes built-in with your Node.js installation as well as npm packages like Axios, Got, SuperAgent, and node-fetch. Let’s get cracking!Table of contents #PrerequisitesThe example we will useClient options for HTTP requests in Node.jsStandard Node.js HTTP(S) moduleAxiosGotSuperAgentnode-fetchA quick comparison of Node HTTP request methodsConclusionPrerequisites #Before we dive into the description and code, below are some prerequisites you’ll need to get your hands dirty with some Node.js code, which involves calling a remote mock JSON API:You should have Node.js running on your machine (maybe as a Docker container). All the examples will be run using Node.js 14.x, the active LTSYou are familiar with npm commands like  some code  on your command line to see example outputYou are familiar with callbacks, promises, and async/awaitBasic things, but good to get them checked before proceeding any further :)The example we will use #We will make an example GET request with all the HTTP client options by calling data from the JSONPlaceholder mock API. It will send us back 10 users’ data. We will print out each user’s name and user ID.All the code will be laid out as a separate pull request. You can see all the code examples collected in this open-source repository on GitHub. The first example is callback-based, the next two are promise-based, and the last two use async/await.Client options for HTTP requests in Node.js #We will walk through five options to make the GET HTTP call to the placeholder API. Node.js has built-in modules to perform many HTTP(S)-related actions, one of which is the ability to make HTTP calls. Let’s get started with the native HTTP(S) option that comes baked in with Node.js as our first example.Standard Node.js HTTP(S) module #Node.js comes with both HTTP and HTTPS modules in the standard library. For our example, as it is a HTTPS URL we will use the HTTPS module to perform the GET call. Below is the code example:const https = require(&#39;https&#39;);https.get(&#39;https://jsonplaceholder.typicode.com/users&#39;, res =&gt; {  let data = [];  const headerDate = res.headers &amp;amp;&amp;amp; res.headers.date ? res.headers.date : &#39;no response date&#39;;  console.log(&#39;Status Code:&#39;, res.statusCode);  console.log(&#39;Date in Response header:&#39;, headerDate);  res.on(&#39;data&#39;, chunk =&gt; {    data.push(chunk);  });  res.on(&#39;end&#39;, () =&gt; {    console.log(&#39;Response ended: &#39;);    const users = JSON.parse(Buffer.concat(data).toString());    for(user of users) {      console.log(`Got user with id: ${user.id}, name: ${user.name}`);    }  });}).on(&#39;error&#39;, err =&gt; {  console.log(&#39;Error: &#39;, err.message);});Let’s walk through the code. First, we require the  some code Then we can start using it. Let’s look at the example of calling our mock users JSON API with Axios:const axios = require(&#39;axios&#39;);axios.get(&#39;https://jsonplaceholder.typicode.com/users&#39;)  .then(res =&gt; {    const headerDate = res.headers &amp;amp;&amp;amp; res.headers.date ? res.headers.date : &#39;no response date&#39;;    console.log(&#39;Status Code:&#39;, res.status);    console.log(&#39;Date in Response header:&#39;, headerDate);    const users = res.data;    for(user of users) {      console.log(`Got user with id: ${user.id}, name: ${user.name}`);    }  })  .catch(err =&gt; {    console.log(&#39;Error: &#39;, err.message);  });As you can see, there’s less code here than in the earlier example. It is promise-based as opposed to callback-oriented, so this code can be easily turned into async/await format if you wish.Let’s explain what the code example is doing. First, we require the  some code Below is a quick example of using Got to fetch the users from our mock API:const got = require(&#39;got&#39;);got.get(&#39;https://jsonplaceholder.typicode.com/users&#39;, {responseType: &#39;json&#39;})  .then(res =&gt; {    const headerDate = res.headers &amp;amp;&amp;amp; res.headers.date ? res.headers.date : &#39;no response date&#39;;    console.log(&#39;Status Code:&#39;, res.statusCode);    console.log(&#39;Date in Response header:&#39;, headerDate);    const users = res.body;    for(user of users) {      console.log(`Got user with id: ${user.id}, name: ${user.name}`);    }  })  .catch(err =&gt; {    console.log(&#39;Error: &#39;, err.message);  });This code example is pretty similar to Axios, but with two main differences:We needed to pass  some code Let’s look at how our example users API call looks with SuperAgent. To provide some variety, we will use async/await for this illustration with an Immediately Invoked Function Expression (IIFE) compared to a promise-based example:const superagent = require(&#39;superagent&#39;);(async () =&gt; {  try {    const res = await superagent.get(&#39;https://jsonplaceholder.typicode.com/users&#39;);    const headerDate = res.headers &amp;amp;&amp;amp; res.headers.date ? res.headers.date : &#39;no response date&#39;;    console.log(&#39;Status Code:&#39;, res.statusCode);    console.log(&#39;Date in Response header:&#39;, headerDate);    const users = res.body;    for(user of users) {      console.log(`Got user with id: ${user.id}, name: ${user.name}`);    }  } catch (err) {    console.log(err.message); //can be console.error  }})();Let’s further examine how we did the request with SuperAgent. We required the  some code Next, let’s have a look at how node-fetch can be used to call our mock users API. This example will also use async/await to keep things simple:const fetch = require(&#39;node-fetch&#39;);(async () =&gt; {  try {    const res = await fetch(&#39;https://jsonplaceholder.typicode.com/users&#39;);    const headerDate = res.headers &amp;amp;&amp;amp; res.headers.get(&#39;date&#39;) ? res.headers.get(&#39;date&#39;) : &#39;no response date&#39;;    console.log(&#39;Status Code:&#39;, res.status);    console.log(&#39;Date in Response header:&#39;, headerDate);    const users = await res.json();    for(user of users) {      console.log(`Got user with id: ${user.id}, name: ${user.name}`);    }  } catch (err) {    console.log(err.message); //can be console.error  }})();Let’s review some of the differences here compared to our example of using SuperAgent with async/await: some code . It seemed like a bit of extra work, but that is how the browser Fetch API response works.Same as all the above examples, this code is also accessible as a pull request for your reference.Now it’s time to compare the four libraries that we just reviewed.A quick comparison of Node HTTP request methods #Except for the HTTP/HTTPS standard Node module, all four other HTTP client libraries for Node.js are available as npm packages. Below is a quick view of their download statistics by week for the past six months, via npm trends:In terms of weekly downloads, got was the most popular, and SuperAgent was the least popular in the past six months. Let’s scrutinize some other metrics for a better picture of popularity among these contenders thanks to the comparison table on the Got GitHub repo:           Axios      Got      Superagent      node-fetch          GitHub stars      80.55K      8.81K      15.49K      5.92K          Install size      388kB      1.32MB      1.70MB      155kB          npm downloads (per week)      18.76M      22.96M      4.87M      20.74M     From the above table, node-fetch is the most downloaded package. SuperAgent has the largest install size at 1.70MB, and Axios has the most GitHub stars with 80.55K — more than all three other libraries combined.Conclusion #I used SuperAgent quite extensively some years back; after that, I moved to Axios. With its long feature list, I want to give Got a try in the near future. Even though node-fetch looks promising and has a small install size, I am not sure if the API is user-friendly enough — at least for me.You might notice I didn’t mention the Request npm package. Even though Request is still ultra-popular (22.36 million downloads each week), as of 11 February 2020, it will have been fully deprecated, so there’s no point in using a deprecated library.All these libraries mainly do the same thing — much like which brand of coffee you prefer, in the end, you are still drinking coffee. Choose wisely depending on your use case, and make the right tradeoffs for maximum benefit.",
    "author": { "@type": "Person", "name": "Geshan Manandhar" },
    "publisher": {
      "@type": "Organization",
      "name": "Geshan Manandhar",
      "logo": { "@type": "ImageObject", "url": "https://geshan.com.np/images/favicons/favicon-32x32.png" }
    },
    "mainEntityOfPage": { "@type": "WebPage", "@id": "https://geshan.com.np/blog/2021/03/nodejs-http-request/" }
  }</script><div class="progress-bar"></div><div class="max-w-6xl py-3 mx-auto grid-cols-12 grid gap-15 px-4 md:px-0 mb-20"><div class="col-span-12"><article class="md:w-full mx-auto"><header class="page-header text-center"><h1 class="font-semibold font-heading text-gray text-center mb-6 tracking-[-0.01em] leading-[105%] md:leading-[105%]">5 different ways to make HTTP requests with Node.js</h1><div class="flex items-center justify-between gap-3 md:gap-4 flex-wrap md:flex-nowrap py-2 border-y border-lightbg mt-4"><div class="flex items-center justify-start md:gap-4 gap-2 flex-wrap w-2/3"><div class="flex justify-start items-center gap-3 md:gap-4"><img src="/images/favicons/favicon-32x32-pp.png" alt="Geshan Manandhar" class="w-10 h-10 rounded-full object-cover flex-shrink-0"> <span class="text-gray font-medium font-ui text-md md:text-xl uppercase tracking-wide text-start">Geshan Manandhar</span></div><time datetime="2021-03-29" data-updated="true"><time class="entry-date" datetime="2021-03-29"><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">29-Mar-2021 </span></time></time><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">16 MIN READ</span></div><button type="button" id="share-button" class="flex items-center justify-center w-8 h-8 md:w-9 md:h-9 rounded text-lightGray hover:border-gray-400 hover:bg-gray-50 transition-colors flex-shrink-0" aria-label="Share this post" onclick="toggleShareIcons(); ga('send', 'event', 'share', 'clickShareOnPost');"><img src="/images/shareIcon.svg" alt="Share this post" class="w-6 h-6"></button></div><div id="share-icons-container" class="share-icons print:hidden hidden" aria-label="Share this post"><div class="flex items-center justify-center gap-3"><span class="share-icons"><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://geshan.com.np/blog/2021/03/nodejs-http-request/" target="_blank" title="Share '5 different ways to make HTTP requests with Node.js' on LinkedIn" onclick="ga('send', 'event', 'share', 'clickShareOnLinkedIn');"><span id="linkedin-share" class="text-[#0077B5]"><img src="/images/social-icons/linkedin.svg" alt="LinkedIn" class="sharing-common"> </span></a><a href="http://twitter.com/share?text=5 different ways to make HTTP requests with Node.js - &url=https://geshan.com.np/blog/2021/03/nodejs-http-request/" target="_blank" title="Share '5 different ways to make HTTP requests with Node.js' on Twitter" onclick="ga('send', 'event', 'share', 'clickShareOnTwitter');"><span id="twitter-share" class="text-[#1DA1F2]"><img src="/images/social-icons/twitter.svg" alt="Twitter" class="sharing-common"> </span></a><a href="http://www.facebook.com/sharer.php?u=https://geshan.com.np/blog/2021/03/nodejs-http-request/" target="_blank" title="Share '5 different ways to make HTTP requests with Node.js' on Facebook" onclick="ga('send', 'event', 'share', 'clickShareOnFacebook');"><span id="facebook-share" class="text-[#1877F2]"><img src="/images/social-icons/facebook.svg" alt="Facebook" class="sharing-common"> </span></a><a href="https://t.me/share/url?url=https://geshan.com.np/blog/2021/03/nodejs-http-request/" target="_blank" title="Share '5 different ways to make HTTP requests with Node.js' on Telegram" onclick="ga('send', 'event', 'share', 'clickShareOnTelegram');"><span id="telegram-share" class="text-[#0088cc]"><img src="/images/social-icons/telegram.svg" alt="Telegram" class="sharing-common"> </span></a><a href="https://api.whatsapp.com/send?text=https://geshan.com.np/blog/2021/03/nodejs-http-request/" target="_blank" title="Share '5 different ways to make HTTP requests with Node.js' on Whatsapp" onclick="ga('send', 'event', 'share', 'clickShareOnWhatsapp');"><span id="whatsapp-share" class="text-[#25d366]"><img src="/images/social-icons/whatsapp.svg" alt="WhatsApp" class="sharing-common"></span></a></span></div></div></header><div class="entry-content clearfix font-body text-xl text-gray"><p>There are multiple ways to make HTTP requests in Node.js. We can do so using the standard HTTP/HTTPS module, of course, or we could use one of a number of npm packages that make our lives much easier.</p><p>In this post, we are going to see code examples of the native HTTPS module that comes built-in with your Node.js installation as well as npm packages like Axios, Got, SuperAgent, and node-fetch. Let’s get cracking!</p><img class="center" loading="lazy" src="/images/nodejs-http-requests/01nodejs-http-requests.jpg" title="5 different ways to make HTTP requests with Node.js" alt="5 different ways to make HTTP requests with Node.js"><h2 id="table-of-contents" tabindex="-1">Table of contents <a class="direct-link" href="#table-of-contents">#</a></h2><ul><li><a href="#prerequisites">Prerequisites</a></li><li><a href="#the-example-we-will-use">The example we will use</a></li><li><a href="#client-options-for-http-requests-in-nodejs">Client options for HTTP requests in Node.js</a><ul><li><a href="#standard-nodejs-https-module">Standard Node.js HTTP(S) module</a></li><li><a href="#axios">Axios</a></li><li><a href="#got">Got</a></li><li><a href="#superagent">SuperAgent</a></li><li><a href="#node-fetch">node-fetch</a></li></ul></li><li><a href="#a-quick-comparison-of-node-http-request-methods">A quick comparison of Node HTTP request methods</a></li><li><a href="#conclusion">Conclusion</a></li></ul><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="direct-link" href="#prerequisites">#</a></h2><p>Before we dive into the description and code, below are some prerequisites you’ll need to get your hands dirty with some Node.js code, which involves calling a remote mock JSON API:</p><ul><li>You should have Node.js running on your machine (<a href="https://blog.logrocket.com/node-js-docker-improve-dx/">maybe as a Docker container</a>). All the examples will be run using Node.js 14.x, the active LTS</li><li>You are familiar with npm commands like <code>npm init</code>, and you are able to install npm packages with <code>npm install --save &lt;module-name&gt;</code> to a project</li><li>You can run the JavaScript files with <code>node &lt;filename&gt;</code> on your command line to see example output</li><li>You are familiar with <a href="https://blog.logrocket.com/evolution-async-programming-javascript/">callbacks, promises, and async/await</a></li></ul><p>Basic things, but good to get them checked before proceeding any further :)</p><h2 id="the-example-we-will-use" tabindex="-1">The example we will use <a class="direct-link" href="#the-example-we-will-use">#</a></h2><p>We will make an example GET request with all the HTTP client options by calling data from the <a href="https://jsonplaceholder.typicode.com/users">JSONPlaceholder</a> mock API. It will send us back 10 users’ data. We will print out each user’s name and user ID.</p><p>All the code will be laid out as a separate pull request. You can see all the code examples collected in this open-source repository on <a href="https://github.com/geshan/nodejs-requests">GitHub</a>. The first example is callback-based, the next two are promise-based, and the last two use async/await.</p><h2 id="client-options-for-http-requests-in-node.js" tabindex="-1">Client options for HTTP requests in Node.js <a class="direct-link" href="#client-options-for-http-requests-in-node.js">#</a></h2><p>We will walk through five options to make the GET HTTP call to the placeholder API. Node.js has built-in modules to perform many HTTP(S)-related actions, one of which is the ability to make HTTP calls. Let’s get started with the native HTTP(S) option that comes baked in with Node.js as our first example.</p><h3 id="standard-node.js-http(s)-module" tabindex="-1">Standard Node.js HTTP(S) module <a class="direct-link" href="#standard-node.js-http(s)-module">#</a></h3><p>Node.js comes with both <a href="https://nodejs.org/api/http.html">HTTP</a> and <a href="https://nodejs.org/api/https.html">HTTPS</a> modules in the standard library. For our example, as it is a HTTPS URL we will use the HTTPS module to perform the GET call. Below is the code example:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> https <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'https'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>https<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'https://jsonplaceholder.typicode.com/users'</span><span class="token punctuation">,</span> <span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> headerDate <span class="token operator">=</span> res<span class="token punctuation">.</span>headers <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>date <span class="token operator">?</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>date <span class="token operator">:</span> <span class="token string">'no response date'</span><span class="token punctuation">;</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Status Code:'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Date in Response header:'</span><span class="token punctuation">,</span> headerDate<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token parameter">chunk</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Response ended: '</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>Buffer<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">for</span><span class="token punctuation">(</span>user <span class="token keyword">of</span> users<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Got user with id: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Error: '</span><span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Let’s walk through the code. First, we require the <code>https</code> standard Node module, which is available with Node.js installation. No need for a <code>package.json</code> file or any <code>npm install --save</code> to get this running.</p><p>We then call our JSONPlaceholder URL with the <code>get</code> method, which has a callback that provides the response we have put in the <code>res</code> variable.</p><p>Next, we initialize <code>data</code> as an empty array, and after that, we log the status code and date from the respone’s header. Subsequently, whenever we get data, we push the chunk to the data array.</p><p>Then, on the response end, we concat the array data, change it into a string, and parse the JSON to get the list of 10 users as an array of objects. Consequently, we loop through the 10 users and log the ID and name of the user object one at a time.</p><p>One thing to note here: if there is an error on the request, the error message is logged on the console. The above code is available as a <a href="https://github.com/geshan/nodejs-requests/pull/1">pull request</a> for your reference.</p><p>As HTTPS is a standard Node.js module, there’s been no need for a <code>package.json</code> — I wish I could say this for some of my Node.js projects.</p><p>You can run the code simply with <code>node native-https.js</code>, provided you named the file <code>native-https.js</code>. It should show an output like below:</p><img class="center" loading="lazy" src="/images/nodejs-http-requests/02nodejs-code-output.jpg" title="Output of running Node.js native http module" alt="Output of running Node.js native http module"><p>You can use the same method to run all the other examples in this post; they will show a similar output as we print status code, date from response header, and the user ID and name from the response body.</p><p>Next in line for exploration is the Axios npm package — for this, we will need a <code>package.json</code> file. Time to see how.</p><h3 id="axios" tabindex="-1">Axios <a class="direct-link" href="#axios">#</a></h3><p><a href="https://blog.logrocket.com/how-to-make-http-requests-like-a-pro-with-axios/">Axios</a> is a very popular promise-based request library. It is an HTTP client available for both browser and Node.js. It also includes handy features like intercepting request and response data, and the ability to automatically transform request and response data to JSON.</p><p>We can install Axios with the following command:</p><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> axios</code></pre><p>Then we can start using it. Let’s look at the example of calling our mock users JSON API with Axios:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> axios <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'axios'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'https://jsonplaceholder.typicode.com/users'</span><span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> headerDate <span class="token operator">=</span> res<span class="token punctuation">.</span>headers <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>date <span class="token operator">?</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>date <span class="token operator">:</span> <span class="token string">'no response date'</span><span class="token punctuation">;</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Status Code:'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Date in Response header:'</span><span class="token punctuation">,</span> headerDate<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> users <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span><br><br>    <span class="token keyword">for</span><span class="token punctuation">(</span>user <span class="token keyword">of</span> users<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Got user with id: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Error: '</span><span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>As you can see, there’s less code here than in the earlier example. It is promise-based as opposed to callback-oriented, so this code can be easily turned into async/await format if you wish.</p><p>Let’s explain what the code example is doing. First, we require the <code>axios</code> library, then we call the JSONPlaceholder users API with <code>axios.get</code> (which is promise-based).</p><p>We use the <code>then</code> method to get the result when the promise is resolved and get the response object as a <code>res</code> variable. In the <code>then</code> method, we log the status code and date from the response header.</p><p>We get the JSON data as an array easily with <code>res.data</code> thanks to Axios’ auto transformations. Consequently, we loop through the users, logging the ID and the name. In case of any error, we log the error message on the console. The code example is accessible as a <a href="https://github.com/geshan/nodejs-requests/pull/3/files">pull request</a>, too.</p><p>Next, we will take a look at another popular and feature-rich library, Got.</p><h3 id="got" tabindex="-1">Got <a class="direct-link" href="#got">#</a></h3><p><a href="https://www.npmjs.com/package/got">Got</a> is another popular HTTP request library for Node.js. It claims to be a “human-friendly and powerful HTTP request library for Node.js.” It also features a promise-based API, and HTTP/2 support and its pagination API are Got’s USPs. Currently, Got is the most popular HTTP client library for Node.js, with over 19 million downloads per week.</p><p>We can install Got with the command below:</p><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> got</code></pre><p>Below is a quick example of using Got to fetch the users from our mock API:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> got <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'got'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>got<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'https://jsonplaceholder.typicode.com/users'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">responseType</span><span class="token operator">:</span> <span class="token string">'json'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> headerDate <span class="token operator">=</span> res<span class="token punctuation">.</span>headers <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>date <span class="token operator">?</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>date <span class="token operator">:</span> <span class="token string">'no response date'</span><span class="token punctuation">;</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Status Code:'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Date in Response header:'</span><span class="token punctuation">,</span> headerDate<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> users <span class="token operator">=</span> res<span class="token punctuation">.</span>body<span class="token punctuation">;</span><br>    <span class="token keyword">for</span><span class="token punctuation">(</span>user <span class="token keyword">of</span> users<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Got user with id: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Error: '</span><span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>This code example is pretty similar to Axios, but with two main differences:</p><ol><li>We needed to pass <code>{responseType: 'json'}</code> as the second parameter to indicate that the response was in JSON format.</li><li>The status code header was called <code>statusCode</code>, not <code>status</code>.</li></ol><p>Other things remained basically the same as the previous request with Axios. The example can be seen in this <a href="https://github.com/geshan/nodejs-requests/pull/4/files">pull request</a> too.</p><p>Next up, we will have a look at Superagent.</p><h3 id="superagent" tabindex="-1">SuperAgent <a class="direct-link" href="#superagent">#</a></h3><p><a href="https://www.npmjs.com/package/superagent">SuperAgent</a> by VisionMedia is one of the oldest Node.js request packages, released in <a href="https://github.com/visionmedia/superagent/tags?after=0.6.0">April 2011</a>. A robust HTTP library for Node.js, SuperAgent brands itself as a “small, progressive, client-side HTTP request library and Node.js module with the same API, supporting many high-level HTTP client features.” It offers both callback- and promise-based APIs. With a promise-based API, using async/await is just some syntactic sugar on top of it.</p><p>SuperAgent also features an array of <a href="https://github.com/visionmedia/superagent#plugins">plugins</a>, ranging from no-cache to measuring HTTP timings.</p><p>We can install SuperAgent with the following command:</p><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> superagent</code></pre><p>Let’s look at how our example users API call looks with SuperAgent. To provide some variety, we will use async/await for this illustration with an <a href="https://developer.mozilla.org/en-US/docs/Glossary/IIFE">Immediately Invoked Function Expression (IIFE)</a> compared to a promise-based example:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> superagent <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'superagent'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">try</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> superagent<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'https://jsonplaceholder.typicode.com/users'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> headerDate <span class="token operator">=</span> res<span class="token punctuation">.</span>headers <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>date <span class="token operator">?</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>date <span class="token operator">:</span> <span class="token string">'no response date'</span><span class="token punctuation">;</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Status Code:'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Date in Response header:'</span><span class="token punctuation">,</span> headerDate<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> users <span class="token operator">=</span> res<span class="token punctuation">.</span>body<span class="token punctuation">;</span><br>    <span class="token keyword">for</span><span class="token punctuation">(</span>user <span class="token keyword">of</span> users<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Got user with id: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//can be console.error</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Let’s further examine how we did the request with SuperAgent. We required the <code>superagent</code> library to make our test HTTP GET call. We started the IIFE with <code>async</code> because we want to use await, as mentioned in the next point.</p><p>Next, in the <code>try</code> block, we called <code>superagent.get</code> with <code>await</code>, which would resolve the promise and give us the result of the HTTP call to our mock users API. Then, from the <code>res</code> variable, we picked out the date from <code>res.headers</code> and logged status and date on the console.</p><p>After that, we set the response’s body in the <code>users</code> constant and looped through that array of 10 users to print out each user’s name and ID. Consequently, there is a <code>catch</code> block; if any error occurs anywhere in the <code>try</code> block, it will be caught, and the error message will be logged to the console.</p><p>SuperAgent is mature and battle-tested, which makes it pretty reliable. We can also test SuperAgent calls with <a href="https://github.com/visionmedia/supertest">SuperTest</a>, which is a very handy library in its own right. Like the examples above, the SuperAgent code is available as a <a href="https://github.com/geshan/nodejs-requests/pull/5/files">pull request</a>.</p><p>Now let’s look at node-fetch.</p><h3 id="node-fetch" tabindex="-1">node-fetch <a class="direct-link" href="#node-fetch">#</a></h3><p><a href="https://www.npmjs.com/package/node-fetch">node-fetch</a> is another hugely popular HTTP request library for Node.js — in the first week of December 2020, it was downloaded more than 20 million times, as per <a href="https://www.npmtrends.com/node-fetch">npm trends</a>.</p><p>In their own words, “node-fetch is a lightweight module that brings the Fetch API (<code>window.fetch</code>) to Node.js.” Its features include consistency with the browser-based <code>window.fetch</code> and native promise and async functions.</p><p>We can install node-fetch with the command below:</p><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> node-fetch</code></pre><p>Next, let’s have a look at how node-fetch can be used to call our mock users API. This example will also use async/await to keep things simple:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> fetch <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'node-fetch'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">try</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://jsonplaceholder.typicode.com/users'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> headerDate <span class="token operator">=</span> res<span class="token punctuation">.</span>headers <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'date'</span><span class="token punctuation">)</span> <span class="token operator">?</span> res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'date'</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">'no response date'</span><span class="token punctuation">;</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Status Code:'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Date in Response header:'</span><span class="token punctuation">,</span> headerDate<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">for</span><span class="token punctuation">(</span>user <span class="token keyword">of</span> users<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Got user with id: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//can be console.error</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Let’s review some of the differences here compared to our example of using SuperAgent with async/await:</p><ol><li><code>fetch</code> did not need an explicit GET method; the HTTP verb can be sent as a <code>method</code> key in the second parameter, which is an object. For instance: <code>{method: 'GET'}</code></li><li>Another difference is that the header is an object with a <code>get</code> method to get header values. We called <code>res.headers.get('date')</code> to get the value of the date response header</li><li>The final difference was the need to unwrap a promise to get the body as JSON with <code>await res.json()</code>. It seemed like a bit of extra work, but that is how the browser Fetch API <a href="https://developer.mozilla.org/en-US/docs/Web/API/Body/json">response</a> works.</li></ol><p>Same as all the above examples, this code is also accessible as a <a href="https://github.com/geshan/nodejs-requests/pull/6/files">pull request</a> for your reference.</p><p>Now it’s time to compare the four libraries that we just reviewed.</p><h2 id="a-quick-comparison-of-node-http-request-methods" tabindex="-1">A quick comparison of Node HTTP request methods <a class="direct-link" href="#a-quick-comparison-of-node-http-request-methods">#</a></h2><p>Except for the HTTP/HTTPS standard Node module, all four other HTTP client libraries for Node.js are available as npm packages. Below is a quick view of their download statistics by week for the past six months, via <a href="https://www.npmtrends.com/axios-vs-got-vs-superagent-vs-node-fetch">npm trends</a>:</p><img class="center" loading="lazy" src="/images/nodejs-http-requests/03npm-trends.jpg" title="NPM trends of the 4 HTTP related NPM modules" alt="NPM trends of the 4 HTTP related NPM modules"><p>In terms of weekly downloads, got was the most popular, and SuperAgent was the least popular in the past six months. Let’s scrutinize some other metrics for a better picture of popularity among these contenders thanks to the <a href="https://github.com/sindresorhus/got#comparison">comparison table</a> on the Got GitHub repo:</p><table><tr><td></td><td><strong>Axios</strong></td><td><strong>Got</strong></td><td><strong>Superagent</strong></td><td><strong>node-fetch</strong></td></tr><tr><td><strong>GitHub stars</strong></td><td>80.55K</td><td>8.81K</td><td>15.49K</td><td>5.92K</td></tr><tr><td><strong>Install size</strong></td><td>388kB</td><td>1.32MB</td><td>1.70MB</td><td>155kB</td></tr><tr><td><strong>npm downloads (per week)</strong></td><td>18.76M</td><td>22.96M</td><td>4.87M</td><td>20.74M</td></tr></table><p>From the above table, node-fetch is the most downloaded package. SuperAgent has the largest install size at 1.70MB, and Axios has the most GitHub stars with 80.55K — more than all three other libraries combined.</p><h2 id="conclusion" tabindex="-1">Conclusion <a class="direct-link" href="#conclusion">#</a></h2><p>I used SuperAgent quite extensively some years back; after that, I moved to Axios. With its long feature list, I want to give Got a try in the near future. Even though node-fetch looks promising and has a small install size, I am not sure if the API is user-friendly enough — at least for me.</p><p>You might notice I didn’t mention the <a href="https://www.npmjs.com/package/request">Request</a> npm package. Even though Request is still ultra-popular (22.36 million downloads each week), as of 11 February 2020, it will have been <a href="https://github.com/request/request#deprecated">fully deprecated</a>, so there’s no point in using a deprecated library.</p><p>All these libraries mainly do the same thing — much like which brand of coffee you prefer, in the end, you are still drinking coffee. Choose wisely depending on your use case, and make the right tradeoffs for maximum benefit.</p></div><div class="flex items-center justify-between gap-3 md:gap-4 flex-wrap md:flex-nowrap py-2 border-y border-lightbg mt-4"><div class="flex items-center justify-start md:gap-4 gap-2 flex-wrap w-2/3"><div class="flex justify-start items-center gap-3 md:gap-4"><img src="/images/favicons/favicon-32x32-pp.png" alt="Geshan Manandhar" class="w-10 h-10 rounded-full object-cover flex-shrink-0"> <span class="text-gray font-medium font-ui text-md md:text-xl uppercase tracking-wide text-start">Geshan Manandhar</span></div><time datetime="2021-03-29" data-updated="true"><time class="entry-date" datetime="2021-03-29"><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">29-Mar-2021 </span></time></time><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">16 MIN READ</span></div><button type="button" id="share-button-bottom" class="flex items-center justify-center w-8 h-8 md:w-9 md:h-9 rounded text-lightGray hover:border-gray-400 hover:bg-gray-50 transition-colors flex-shrink-0" aria-label="Share this post" onclick="toggleShareIconsBottom(); ga('send', 'event', 'share', 'clickShareOnPost');"><img src="/images/shareIcon.svg" alt="Share this post" class="w-6 h-6"></button></div><div id="share-icons-container-bottom" class="share-icons-bottom print:hidden hidden mx-auto" aria-label="Share this post"><div class="w-full flex items-center justify-center mx-auto gap-3"><span class="share-icons"><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://geshan.com.np/blog/2021/03/nodejs-http-request/" target="_blank" title="Share '5 different ways to make HTTP requests with Node.js' on LinkedIn" onclick="ga('send', 'event', 'share', 'clickShareOnLinkedIn');"><span id="linkedin-share" class="text-[#0077B5]"><img src="/images/social-icons/linkedin.svg" alt="LinkedIn" class="sharing-common"> </span></a><a href="http://twitter.com/share?text=5 different ways to make HTTP requests with Node.js - &url=https://geshan.com.np/blog/2021/03/nodejs-http-request/" target="_blank" title="Share '5 different ways to make HTTP requests with Node.js' on Twitter" onclick="ga('send', 'event', 'share', 'clickShareOnTwitter');"><span id="twitter-share" class="text-[#1DA1F2]"><img src="/images/social-icons/twitter.svg" alt="Twitter" class="sharing-common"> </span></a><a href="http://www.facebook.com/sharer.php?u=https://geshan.com.np/blog/2021/03/nodejs-http-request/" target="_blank" title="Share '5 different ways to make HTTP requests with Node.js' on Facebook" onclick="ga('send', 'event', 'share', 'clickShareOnFacebook');"><span id="facebook-share" class="text-[#1877F2]"><img src="/images/social-icons/facebook.svg" alt="Facebook" class="sharing-common"> </span></a><a href="https://t.me/share/url?url=https://geshan.com.np/blog/2021/03/nodejs-http-request/" target="_blank" title="Share '5 different ways to make HTTP requests with Node.js' on Telegram" onclick="ga('send', 'event', 'share', 'clickShareOnTelegram');"><span id="telegram-share" class="text-[#0088cc]"><img src="/images/social-icons/telegram.svg" alt="Telegram" class="sharing-common"> </span></a><a href="https://api.whatsapp.com/send?text=https://geshan.com.np/blog/2021/03/nodejs-http-request/" target="_blank" title="Share '5 different ways to make HTTP requests with Node.js' on Whatsapp" onclick="ga('send', 'event', 'share', 'clickShareOnWhatsapp');"><span id="whatsapp-share" class="text-[#25d366]"><img src="/images/social-icons/whatsapp.svg" alt="WhatsApp" class="sharing-common"></span></a></span></div></div></article><div class="mt-3"><a href="/blog/categories/software-engineering/" title="Software Engineering" class="background-lightbg mr-4 mb-2 inline-block mt-2 rounded border-2 bg-gray-100 font-semibold font-ui text-gray hover:text-gray-400 px-3 py-1 text-xl border-gray-300 cursor-pointer hover:border-gray-400">software engineering </a><a href="/blog/categories/javascript/" title="Javascript" class="background-lightbg mr-4 mb-2 inline-block mt-2 rounded border-2 bg-gray-100 font-semibold font-ui text-gray hover:text-gray-400 px-3 py-1 text-xl border-gray-300 cursor-pointer hover:border-gray-400">javascript </a><a href="/blog/categories/node.js/" title="Node.js" class="background-lightbg mr-4 mb-2 inline-block mt-2 rounded border-2 bg-gray-100 font-semibold font-ui text-gray hover:text-gray-400 px-3 py-1 text-xl border-gray-300 cursor-pointer hover:border-gray-400">node.js</a></div><section class="md:w-full mx-auto mt-4"><h3 class="comments font-heading">Comments</h3><div id="disqus_thread"></div><button id="disqus_trigger" class="font-ui text-blackText hover:border-darkAvocado border-blacktext hover:shadow-lg border-2 transition ease-in-out delay-100 px-3 py-2 pt-2 mt-2 rounded-md text-center block h-auto text-xl" onclick="load_disqus()">Post a Comment</button><div id="disqus_thread" aria-live="polite"></div></section></div></div><section class="md:w-full mx-auto mt-4 bg-lightAvocado p-4 rounded-lg pb-8"><div class="max-w-6xl mx-auto md:py-12 px-4"><h2 class="text-4xl text-darkAvocado font-heading font-regular flex-shrink-0 py-8 tracking-normal leading-[105%] md:leading-[105%]"><span class="text-lightGray italic">Related</span> <span class="text-blackText">Blogs</span></h2><div class="grid grid-cols-1 md:grid-cols-2 gap-8"><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2023/12/nodejs-duet-ai-vs-code/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to write and deploy a basic Node.js API with Duet AI on VS Code a step-by-step guide</a> <time class="font-medium text-xl text-textColor uppercase font-ui">18-Dec-2023 &nbsp;&nbsp;&nbsp; 9 min read</time><p class="text-xl text-gray font-ui">Learn how to write and deploy a basic Node.js API with Duet AI on VS Code, in this step-by-step tutorial with 20+ screenshots!</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2022/08/nodejs-alternatives/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">Node.js alternatives: Exploring Deno and Bun (with code examples)</a> <time class="font-medium text-xl text-textColor uppercase font-ui">18-Aug-2022 &nbsp;&nbsp;&nbsp; 12 min read</time><p class="text-xl text-gray font-ui">Learn about 2 Node.js alternatives in JavaScript sphere, Deno and Bun with a simple code example.</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2022/07/javascript-promise-all/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to use JavaScript Promise.all with real-life code example</a> <time class="font-medium text-xl text-textColor uppercase font-ui">01-Jul-2022 &nbsp;&nbsp;&nbsp; 14 min read</time><p class="text-xl text-gray font-ui">Learn how to use JavaScript Promise.all with a real-life Axios API get call code example compared to a sequential call.</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2022/06/typescript-optional-parameters/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to use TypeScript optional parameters with example code</a> <time class="font-medium text-xl text-textColor uppercase font-ui">12-Jun-2022 &nbsp;&nbsp;&nbsp; 6 min read</time><p class="text-xl text-gray font-ui">Learn how to use optional paramters in typescript function with a simple yet useful example in this post.</p></div></div></div></section><section class="bg-avocado md:py-0 py-12 px-4"><div class="max-w-6xl mx-auto"><div class="md:hidden"><h2 class="mb-4 text-3xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-base text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-base text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity w-full text-center">Follow on LinkedIn &nbsp;→</a></div><div class="hidden md:grid lg:hidden grid-cols-3 gap-8 items-center"><div class="z-10 col-span-2"><h2 class="mb-4 text-2xl md:text-4xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-xl text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-xl text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity">Follow on LinkedIn &nbsp;→</a></div><div class="flex items-center justify-end col-span-1"><img class="w-32 h-auto" src="/images/theme/new_logo.svg" alt="Geshan"></div></div><div class="hidden lg:grid grid-cols-2 gap-8 lg:gap-12 items-center justify-between h-full"><div class="z-10"><h2 class="mb-4 text-2xl md:text-4xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-xl text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><p class="text-xl text-blackText font-body font-regular mb-6">A big thank you for supporting this ad. free, unobstructive (no overlays, no pop-ups) blog.</p></div><div class="flex items-center gap-12 w-full md:w-auto justify-end self-end"><img class="w-16 md:w-32 h-auto" src="/images/theme/new_logo.svg" alt="Geshan"> <a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-xl text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity w-full md:w-auto text-center md:text-left">Follow on LinkedIn &nbsp;→</a></div></div></div></section></div></div></div></main><footer role="contentinfo"><footer class="bg-avocado sm:px-4"><div class="max-w-6xl mx-auto flex flex-col md:flex-row sm:flex-col justify-between gap-2 items-center sm:items-center md:items-center py-10 font-nav text-lightGray text-base font-regular"><div class="pb-0 sm:pb-2 text-gray"><span class="pr-4">Copyright © 2026 Geshan Manandhar.</span></div><div class="pb-0 sm:pb-2"><ul class="flex"><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> LinkedIn</a></li><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://www.twitter.com/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> Twitter</a></li><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://github.com/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> Github</a></li></ul></div></div></footer></footer><script src="/js/all.min.js" defer="defer"></script></body></html>