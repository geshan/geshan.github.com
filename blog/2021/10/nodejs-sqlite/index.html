<!doctype html><html class="no-js" lang="en"><head><meta charset="utf-8"><meta name="author" content="Geshan Manandhar"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Learn how build a REST API with Node.js and SQLite using Express js step by step using Quotes as an example following this tutorial."><meta name="keywords" content="nodejs sqlite, node.js sqlite, node.js sqlite tutorial, nodejs sqlite tutorial"><meta name="p:domain_verify" content="e654c68562abebfa25c291f59d7d00e8"><meta property="og:type" content="website"><meta property="og:url" content="https://geshan.com.np/blog/2021/10/nodejs-sqlite/"><meta property="og:title" content="Node.js SQLite: Build a simple REST API with Express step-by-step"><meta property="og:description" content="Learn how build a REST API with Node.js and SQLite using Express js step by step using Quotes as an example following this tutorial."><meta property="og:site_name" content="Geshan&#39;s Blog"><meta property="og:image" content="https://geshan.com.np/images/nodejs-sqlite/01nodejs-sqlite.jpg"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:widgets:new-embed-design" content="on"><meta name="twitter:site" content="@geshan"><meta name="twitter:creator" content="@geshan"><meta name="twitter:title" content="Node.js SQLite: Build a simple REST API with Express step-by-step"><meta name="twitter:description" content="Learn how build a REST API with Node.js and SQLite using Express js step by step using Quotes as an example following this tutorial."><meta name="twitter:image:src" content="https://geshan.com.np/images/nodejs-sqlite/01nodejs-sqlite.jpg"><link rel="canonical" href="https://geshan.com.np/blog/2021/10/nodejs-sqlite/"><meta property="fb:pages" content="30717799226"><meta property="fb:app_id" content="106030259434380"><meta name="monetization" content="$ilp.uphold.com/aKHWpqhphm9f"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicons/favicon-16x16.png"><link href="/atom.xml" rel="alternate" title="Geshan&#39;s Blog" type="application/atom+xml"><title>Node.js SQLite: Build a simple REST API with Express step-by-step</title><link rel="preconnect" href="/" crossorigin><link rel="preload" href="/css/fonts.css" as="style"><link rel="preload" href="/fonts/source-sans-4/source-serif-4-latin-400-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/source-sans-4/source-serif-4-latin-500-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/source-sans-pro/source-sans-pro-latin-400-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="/css/fonts.css"><link rel="stylesheet" href="/css/tw-006.css"><link rel="alternate" href="/atom.xml" type="application/atom+xml" title="Geshan&#39;s Blog"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-P3NXCVQEPE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-P3NXCVQEPE');</script><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWT2D9T');</script><script src="https://cdn.jsdelivr.net/npm/@statsig/js-client@3/build/statsig-js-client+session-replay+web-analytics.min.js?apikey=client-rYO7rX8WSUyyLg9pKJwymLxM71tCE0CKgxgtUj4akzK"></script><link rel="manifest" href="/manifest.json"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="application-name" content="Geshan.com.np"><meta name="apple-mobile-web-app-title" content="Geshan.com.np"><meta name="msapplication-starturl" content="/index.html"><meta name="theme-color" content="#6947E7"><script>if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/sw.js").then(function(registration) {
        console.log('ServiceWorker registration successful with scope: ', registration.scope);
    }, function(err) {
        console.log('ServiceWorker registration failed: ', err);
    });
  }</script></head><body class="overflow-x-hidden font-ui flex flex-col min-h-screen"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWT2D9T" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><header role="banner"><div><nav class="bg-white" role="navigation"><div class="w-full md:max-w-6xl mx-auto py-4 px-4"><div class="flex items-center justify-between h-16"><div class="flex-shrink-0"><a href="/" class="flex items-center"><img class="h-12 w-12" src="/images/theme/new_logo.svg" alt="Geshan G"></a></div><div class="flex items-center gap-12"><div class="hidden sm:flex items-center gap-12"><a href="/posts/1/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">Posts </a><a href="/about/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">About Me </a><a href="https://newsletter.geshan.com.np/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">Newsletter</a></div><form class="search flex items-center" action="https://www.google.com/search" method="GET"><input type="hidden" name="sitesearch" value="geshan.com.np"><div class="relative"><input class="bg-gray-100 border border-neutralGray rounded-lg py-2 pl-10 pr-4 font-body text-sm focus:outline-none focus:ring-2 focus:ring-avocado focus:border-transparent w-40" type="text" name="q" placeholder="Search" label="search"> <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-neutralGray" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg></div></form><button type="button" class="sm:hidden inline-flex items-center justify-center p-2 rounded-md text-black focus:outline-none focus:ring-2 focus:ring-inset focus:ring-avocado" onclick="mobileView()" aria-controls="mobile-menu" aria-expanded="false"><span class="sr-only">Open main menu</span> <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg></button></div></div></div><div class="mobile-menu fixed inset-0 z-40 hidden sm:hidden bg-black bg-opacity-40" role="dialog" aria-modal="true"><div class="absolute inset-0" onclick="mobileView()" aria-hidden="true"></div><div class="mobile-menu-panel relative ml-auto flex h-full w-10/12 max-w-sm flex-col justify-start bg-white shadow-xl"><div class="flex items-center justify-between px-4 py-4 border-b border-gray-200"><div class="flex items-center gap-3"><img class="h-8 w-8" src="/images/theme/new_logo.svg" alt="Geshan G"> <span class="text-lg font-semibold text-textColor font-body">Geshan's Blog</span></div><button type="button" class="inline-flex items-center justify-center rounded-full p-2 text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-avocado" onclick="mobileView()" aria-label="Close main menu"><svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg></button></div><nav class="overflow-y-auto px-4 py-6 space-y-2"><a href="/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Home </a><a href="/posts/1/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Posts </a><a href="/about/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">About Me </a><a href="https://newsletter.geshan.com.np/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Newsletter</a></nav><div class="px 4 py-4 border-t border-gray-200"><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="rounded-lg bg-darkAvocado px-4 py-2 text-base font-regular font-body text-white hover:bg-avocado hover:text-black transition-colors w-2/3 mx-auto ml-4">Connect on LinkedIn</a></div></div></div></nav></div></header><main id="wrap" role="main" class="flex-grow md:px-0"><div id="content"><div class="row"><div><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Geshan&#39;s Blog",
    "alternativeHeadline": "Node.js SQLite: Build a simple REST API with Express step-by-step",
    "image": "https://geshan.com.np/images/nodejs-sqlite/01nodejs-sqlite.jpg",
    "editor": "Geshan Manandhar",
    "genre": "Software Engineering",
    "keywords": "nodejs sqlite, node.js sqlite, node.js sqlite tutorial, nodejs sqlite tutorial",
    "url": "https://geshan.com.np/blog/2021/10/nodejs-sqlite/",
    "datePublished": "2021-10-29",
    "dateCreated": "2021-10-29",
    "dateModified": "2021-10-29",
    "description": "Learn how build a REST API with Node.js and SQLite using Express js step by step using Quotes as an example following this tutorial.",
    "articleBody": "Node.js can be used very well with relational databases and SQLite is no exception. In this post, we will build a simple REST API for Quotes step-by-step with SQLite and Node.js using the Express Js framework step-by-step.Table of contents #PrerequisitesSQLite and Node.jsSetup SQLite database with Quote tableSetup Express with Better SQLite 3Get Quotes API with paginationPost API to save a new quote with Node.js SQLiteNext stepsTLDR quick startConclusionPrerequisites #Before we dive into the code, below are some good to have prerequisites:You have a general working knowledge of Node.js and Express Js.You have Node.js (preferably latest LTS) running on your machine or on have Docker with Node.js runningSQLite is installed and running on your system, you can get it from here and try  some code After inserting the 17 rows, if we run `SELECT * FROM quote” we will see an output as follows:Next up, we will set up Express.js to show the quotes pulled in from the database we just created.Setup Express with Better SQLite 3 #There are multiple ways to set up Express js, we will use NPM to set up express. To setup express, we will run the following commands in the same directory that has the  some code  that will have the following contents:const express = require(&#39;express&#39;);const app = express();const port = 3000 || process.env.PORT;const quotesRouter = require(&#39;./routes/quotes&#39;);app.get(&#39;/&#39;, (req, res) =&gt; {  res.json({message: &#39;alive&#39;});});app.use(&#39;/quotes&#39;, quotesRouter);app.listen(port, () =&gt; {  console.log(`Example app listening at http://localhost:${port}`);});The above  some code  with the following contents:const express = require(&#39;express&#39;);const router = express.Router();const quotes = require(&#39;../services/quotes&#39;);/* GET quotes listing. */router.get(&#39;/&#39;, function(req, res, next) {  try {    res.json(quotes.getMultiple(req.query.page));  } catch(err) {    console.error(`Error while getting quotes `, err.message);    next(err);  }});module.exports = router;In this  some code  which will contain the following things:const db = require(&#39;../services/db&#39;);const config = require(&#39;../config&#39;);function getMultiple(page = 1) {  const offset = (page - 1) * config.listPerPage;  const data = db.query(`SELECT * FROM quote LIMIT ?,?`, [offset, config.listPerPage]);  const meta = {page};  return {    data,    meta  }}module.exports = {  getMultiple}In this file we require two other files, first one is  some code  file as follows:/* POST quote */router.post(&#39;/&#39;, function(req, res, next) {  try {    res.json(quotes.create(req.body));  } catch(err) {    console.error(`Error while adding quotes `, err.message);    next(err);  }});Here we added a new route to POST quotes. It calls the create method in the quotes service and sends the response back as JSON. If there is any error while creating the new quote on SQLite with Nodejs it will log the error and call the  some code  on your favorite browserYou should see the following:Conclusion #In this tutorial about Node.js and SQLite, we have learned how to create a minimal REST API for Quotes. This is more like a starting point to build bigger things. You can host your application for free following this tutorial on Node.js free hosting.You can use the open-source Github repository to use this example as a base to build your own API with Node.js and SQLite using the Express.js framework. Best of luck!",
    "author": { "@type": "Person", "name": "Geshan Manandhar" },
    "publisher": {
      "@type": "Organization",
      "name": "Geshan Manandhar",
      "logo": { "@type": "ImageObject", "url": "https://geshan.com.np/images/favicons/favicon-32x32.png" }
    },
    "mainEntityOfPage": { "@type": "WebPage", "@id": "https://geshan.com.np/blog/2021/10/nodejs-sqlite/" }
  }</script><div class="progress-bar"></div><div class="max-w-6xl py-3 mx-auto grid-cols-12 grid gap-15 px-4 md:px-0 mb-20"><div class="col-span-12"><article class="md:w-full mx-auto"><header class="page-header text-center"><h1 class="font-semibold font-heading text-gray text-center mb-6 tracking-[-0.01em] leading-[105%] md:leading-[105%]">Node.js SQLite: Build a simple REST API with Express step-by-step</h1><div class="flex items-center justify-between gap-3 md:gap-4 flex-wrap md:flex-nowrap py-2 border-y border-lightbg mt-4"><div class="flex items-center justify-start md:gap-4 gap-2 flex-wrap w-2/3"><div class="flex justify-start items-center gap-3 md:gap-4"><img src="/images/favicons/favicon-32x32-pp.png" alt="Geshan Manandhar" class="w-10 h-10 rounded-full object-cover flex-shrink-0"> <span class="text-gray font-medium font-ui text-md md:text-xl uppercase tracking-wide text-start">Geshan Manandhar</span></div><time datetime="2021-10-29" data-updated="true"><time class="entry-date" datetime="2021-10-29"><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">29-Oct-2021 </span></time></time><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">17 MIN READ</span></div><button type="button" id="share-button" class="flex items-center justify-center w-8 h-8 md:w-9 md:h-9 rounded text-lightGray hover:border-gray-400 hover:bg-gray-50 transition-colors flex-shrink-0" aria-label="Share this post" onclick="toggleShareIcons(); ga('send', 'event', 'share', 'clickShareOnPost');"><img src="/images/shareIcon.svg" alt="Share this post" class="w-6 h-6"></button></div><div id="share-icons-container" class="share-icons print:hidden hidden" aria-label="Share this post"><div class="flex items-center justify-center gap-3"><span class="share-icons"><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://geshan.com.np/blog/2021/10/nodejs-sqlite/" target="_blank" title="Share 'Node.js SQLite: Build a simple REST API with Express step-by-step' on LinkedIn" onclick="ga('send', 'event', 'share', 'clickShareOnLinkedIn');"><span id="linkedin-share" class="text-[#0077B5]"><img src="/images/social-icons/linkedin.svg" alt="LinkedIn" class="sharing-common"> </span></a><a href="http://twitter.com/share?text=Node.js SQLite: Build a simple REST API with Express step-by-step - &url=https://geshan.com.np/blog/2021/10/nodejs-sqlite/" target="_blank" title="Share 'Node.js SQLite: Build a simple REST API with Express step-by-step' on Twitter" onclick="ga('send', 'event', 'share', 'clickShareOnTwitter');"><span id="twitter-share" class="text-[#1DA1F2]"><img src="/images/social-icons/twitter.svg" alt="Twitter" class="sharing-common"> </span></a><a href="http://www.facebook.com/sharer.php?u=https://geshan.com.np/blog/2021/10/nodejs-sqlite/" target="_blank" title="Share 'Node.js SQLite: Build a simple REST API with Express step-by-step' on Facebook" onclick="ga('send', 'event', 'share', 'clickShareOnFacebook');"><span id="facebook-share" class="text-[#1877F2]"><img src="/images/social-icons/facebook.svg" alt="Facebook" class="sharing-common"> </span></a><a href="https://t.me/share/url?url=https://geshan.com.np/blog/2021/10/nodejs-sqlite/" target="_blank" title="Share 'Node.js SQLite: Build a simple REST API with Express step-by-step' on Telegram" onclick="ga('send', 'event', 'share', 'clickShareOnTelegram');"><span id="telegram-share" class="text-[#0088cc]"><img src="/images/social-icons/telegram.svg" alt="Telegram" class="sharing-common"> </span></a><a href="https://api.whatsapp.com/send?text=https://geshan.com.np/blog/2021/10/nodejs-sqlite/" target="_blank" title="Share 'Node.js SQLite: Build a simple REST API with Express step-by-step' on Whatsapp" onclick="ga('send', 'event', 'share', 'clickShareOnWhatsapp');"><span id="whatsapp-share" class="text-[#25d366]"><img src="/images/social-icons/whatsapp.svg" alt="WhatsApp" class="sharing-common"></span></a></span></div></div></header><div class="entry-content clearfix font-body text-xl text-gray"><p>Node.js can be used very well with relational databases and SQLite is no exception. In this post, we will build a simple REST API for Quotes step-by-step with SQLite and Node.js using the Express Js framework step-by-step.</p><img class="center" loading="lazy" src="/images/nodejs-sqlite/01nodejs-sqlite.jpg" title="Build Node.js SQLite REST API with Express js" alt="Build Node.js SQLite REST API with Express js"><h2 id="table-of-contents" tabindex="-1">Table of contents <a class="direct-link" href="#table-of-contents">#</a></h2><ul><li><a href="#prerequisites">Prerequisites</a></li><li><a href="#sqlite-and-node.js">SQLite and Node.js</a></li><li><a href="#setup-sqlite-database-with-quote-table">Setup SQLite database with Quote table</a></li><li><a href="#setup-express-with-better-sqlite-3">Setup Express with Better SQLite 3</a></li><li><a href="#get-quotes-api-with-pagination">Get Quotes API with pagination</a></li><li><a href="#post-api-to-save-a-new-quote-with-node.js-sqlite">Post API to save a new quote with Node.js SQLite</a></li><li><a href="#next-steps">Next steps</a></li><li><a href="#tldr-quick-start">TLDR quick start</a></li><li><a href="#conclusion">Conclusion</a></li></ul><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="direct-link" href="#prerequisites">#</a></h2><p>Before we dive into the code, below are some good to have prerequisites:</p><ol><li>You have a general working knowledge of Node.js and Express Js.</li><li>You have Node.js (preferably latest LTS) running on your machine or on have <a href="/blog/2020/11/nodejs-with-docker/">Docker with Node.js</a> running</li><li>SQLite is installed and running on your system, you can get it from <a href="https://www.sqlite.org/download.html">here</a> and try <code>sqlite3 --version</code> after it is installed.</li><li>Any prior experience with the SQLite database would be helpful but not essential.</li><li>Some git experience will be good to have.</li></ol><p>In the next stop of this Node.js SQLite tutorial, we will set up the database.</p><h2 id="sqlite-and-node.js" tabindex="-1">SQLite and Node.js <a class="direct-link" href="#sqlite-and-node.js">#</a></h2><p>There is no doubt that SQLite is the <a href="https://www.sqlite.org/mostdeployed.html">most deployed and used database</a>, every mobile phone has it, every Mac and windows 10 machine has in addition to countless millions of other applications. Unlike other relational databases that have a server where clients connect to like MySQL or PostgreSQL, SQLite is a <a href="https://www.sqlite.org/selfcontained.html">self-contained</a> database. It works as a stand-alone file but still packs the punch with a long list of <a href="https://www.sqlite.org/fullsql.html">features</a>. SQLite is <a href="https://www.sqlite.org/hirely.html">ultra-reliable</a> and <a href="https://www.sqlite.org/fasterthanfs.html">fast</a>. It was developed to <a href="https://corecursive.com/066-sqlite-with-richard-hipp/">work offline in a battleship</a>.</p><p>If SQLite is not really a client-server architecture relational database would there be any use-case for using Node.js with it? Yes, there are many, for instance, if we create an offline-first application that needs a relational database the only choice would be SQLite. Some people even run integration or end-to-end <a href="https://medium.com/swlh/laravel-5-8-testing-with-sqlite-899d0fdd3494">tests</a> on SQLite where the main database of the application is a client server-based database. Usually, an object-relational mapper (ORM) is utilized to do this kind of seamless database swap. Another use-case can be if we are building an Electron app and need a database to support any actions offline. SQLite can even be leveraged as temporary storage to unblock the user to perform an action offline which can later be synced with another API/database when the device is back online. There can be many other usages for this demo we will build a simple Quotes API.</p><h2 id="setup-sqlite-database-with-quote-table" tabindex="-1">Setup SQLite database with Quote table <a class="direct-link" href="#setup-sqlite-database-with-quote-table">#</a></h2><p>We will build a Quotes API with SQLite as our database of choice. For this, we will first create a SQLite database with:</p><pre class="language-bash"><code class="language-bash"><span class="token function">mkdir</span> nodejs-sqlite<br><span class="token builtin class-name">cd</span> nodjs-sqlite<br>sqlite3 quotes.db</code></pre><p>First, we create a folder called <code>nodejs-sqlite</code> then went into it. After that, we created the database with the <code>sqlite3</code> command. It will give us a SQLite prompt like the below:</p><img class="center" loading="lazy" src="/images/nodejs-sqlite/02sqlite-cli.jpg" title="SQLite CLI to run SQL commands" alt="SQLite CLI to run SQL commands"><p>We can create the “quotes” table with the following SQL:</p><pre class="language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> quote <span class="token punctuation">(</span><br>  id <span class="token keyword">INTEGER</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> AUTOINCREMENT<span class="token punctuation">,</span><br>  quote <span class="token keyword">text</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">,</span><br>  author <span class="token keyword">text</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><br>  created_at <span class="token keyword">DATETIME</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>After the <code>quote</code> table is created, we will insert some quotes for later testing by executing the SQL query as seen below:</p><pre class="language-sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> quote <span class="token punctuation">(</span>quote<span class="token punctuation">,</span> author<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <br><span class="token punctuation">(</span><span class="token string">'There are only two kinds of languages: the ones people complain about and the ones nobody uses.'</span><span class="token punctuation">,</span> <span class="token string">'Bjarne Stroustrup'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <br><span class="token punctuation">(</span><span class="token string">'Any fool can write code that a computer can understand. Good programmers write code that humans can understand.'</span><span class="token punctuation">,</span> <span class="token string">'Martin Fowler'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <br><span class="token punctuation">(</span><span class="token string">'First, solve the problem. Then, write the code.'</span><span class="token punctuation">,</span> <span class="token string">'John Johnson'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <br><span class="token punctuation">(</span><span class="token string">'Java is to JavaScript what car is to Carpet.'</span><span class="token punctuation">,</span> <span class="token string">'Chris Heilmann'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <br><span class="token punctuation">(</span><span class="token string">'Always code as if the guy who ends up maintaining your code will be a violent psychopath who knows where you live.'</span><span class="token punctuation">,</span> <span class="token string">'John Woods'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <br><span class="token punctuation">(</span><span class="token string">'I''m not a great programmer; I''m just a good programmer with great habits.'</span><span class="token punctuation">,</span> <span class="token string">'Kent Beck'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <br><span class="token punctuation">(</span><span class="token string">'Truth can only be found in one place: the code.'</span><span class="token punctuation">,</span> <span class="token string">'Robert C. Martin'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <br><span class="token punctuation">(</span><span class="token string">'If you have to spend effort looking at a fragment of code and figuring out what it''s doing, then you should extract it into a function and name the function after the "what".'</span><span class="token punctuation">,</span> <span class="token string">'Martin Fowler'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <br><span class="token punctuation">(</span><span class="token string">'The real problem is that programmers have spent far too much time worrying about efficiency in the wrong places and at the wrong times; premature optimization is the root of all evil (or at least most of it) in programming.'</span><span class="token punctuation">,</span> <span class="token string">'Donald Knuth'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <br><span class="token punctuation">(</span><span class="token string">'SQL, Lisp, and Haskell are the only programming languages that I’ve seen where one spends more time thinking than typing.'</span><span class="token punctuation">,</span> <span class="token string">'Philip Greenspun'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <br><span class="token punctuation">(</span><span class="token string">'Deleted code is debugged code.'</span><span class="token punctuation">,</span> <span class="token string">'Jeff Sickel'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <br><span class="token punctuation">(</span><span class="token string">'There are two ways of constructing a software design: One way is to make it so simple that there are obviously no deficiencies and the other way is to make it so complicated that there are no obvious deficiencies.'</span><span class="token punctuation">,</span> <span class="token string">'C.A.R. Hoare'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <br><span class="token punctuation">(</span><span class="token string">'Simplicity is prerequisite for reliability.'</span><span class="token punctuation">,</span> <span class="token string">'Edsger W. Dijkstra'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <br><span class="token punctuation">(</span><span class="token string">'There are only two hard things in Computer Science: cache invalidation and naming things.'</span><span class="token punctuation">,</span> <span class="token string">'Phil Karlton'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <br><span class="token punctuation">(</span><span class="token string">'Measuring programming progress by lines of code is like measuring aircraft building progress by weight.'</span><span class="token punctuation">,</span> <span class="token string">'Bill Gates'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <br><span class="token punctuation">(</span><span class="token string">'Controlling complexity is the essence of computer programming.'</span><span class="token punctuation">,</span> <span class="token string">'Brian Kernighan'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br><span class="token punctuation">(</span><span class="token string">'The only way to learn a new programming language is by writing programs in it.'</span><span class="token punctuation">,</span> <span class="token string">'Dennis Ritchie'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>After inserting the 17 rows, if we run `SELECT * FROM quote” we will see an output as follows:</p><img class="center" loading="lazy" src="/images/nodejs-sqlite/03quotes-on-sqlite.jpg" title="Quotes on SQLite database table with SQL select" alt="Quotes on SQLite database table with SQL select"><p>Next up, we will set up Express.js to show the quotes pulled in from the database we just created.</p><h2 id="setup-express-with-better-sqlite-3" tabindex="-1">Setup Express with Better SQLite 3 <a class="direct-link" href="#setup-express-with-better-sqlite-3">#</a></h2><p>There are multiple ways to set up Express js, we will use NPM to set up express. To setup express, we will run the following commands in the same directory that has the <code>quotes.db</code> file:</p><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> init <span class="token parameter variable">-y</span><br><span class="token function">npm</span> <span class="token function">install</span> express better-sqlite3</code></pre><p>The first command will set up the npm project with the default setting. It will also create the package.json file. The second command will install “express” and “better-sqlite3” NPM packages that we need to create our Quotes API.</p><h2 id="get-quotes-api-with-pagination" tabindex="-1">Get Quotes API with pagination <a class="direct-link" href="#get-quotes-api-with-pagination">#</a></h2><p>To add the GET Quotes API, we will add an <code>index.js</code> file on the root of the project besides <code>package.json</code> that will have the following contents:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">3000</span> <span class="token operator">||</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> quotesRouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./routes/quotes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'alive'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/quotes'</span><span class="token punctuation">,</span> quotesRouter<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Example app listening at http://localhost:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The above <code>index.js</code> will be our server with Express for this Node.js SQLite demo tutorial. In this file we require express and set it up with 2 routes, the root <code>/</code> just sends back an alive message. It acts more like a health check/ping to the application.</p><p>Consequently, we set up the <code>/quotes</code> route which is handled by the quotes router file defined in <code>/routes/quotes</code> explained next. After then we listen to the port and start the server.</p><p>Next, we will add a file <code>routes/quotes.js</code> as referenced on <code>/index.js</code> with the following contents:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> quotes <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../services/quotes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">/* GET quotes listing. */</span><br>router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">try</span> <span class="token punctuation">{</span><br>    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>quotes<span class="token punctuation">.</span><span class="token function">getMultiple</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>page<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Error while getting quotes </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">next</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span></code></pre><p>In this <code>/routes/quotes.js</code> file we create a new express router and add a get <code>/</code> route which will listen to <code>/quotes</code> route. We do a try-catch and call the next middleware if there is an error.</p><p>It also requires the <code>/services/quotes.js</code> file from this file we call the <code>getMultiple</code> function to get multiple quotes passing the page from the query parameter which will be parsed as <code>/quotes?page=1</code> from the query string.</p><p>Next up, we will create the quotes service at <code>/services/quotes.js</code> which will contain the following things:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../services/db'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../config'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">getMultiple</span><span class="token punctuation">(</span><span class="token parameter">page <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> offset <span class="token operator">=</span> <span class="token punctuation">(</span>page <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> config<span class="token punctuation">.</span>listPerPage<span class="token punctuation">;</span><br>  <span class="token keyword">const</span> data <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">SELECT * FROM quote LIMIT ?,?</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">[</span>offset<span class="token punctuation">,</span> config<span class="token punctuation">.</span>listPerPage<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> meta <span class="token operator">=</span> <span class="token punctuation">{</span>page<span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">return</span> <span class="token punctuation">{</span><br>    data<span class="token punctuation">,</span><br>    meta<br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><br>  getMultiple<br><span class="token punctuation">}</span></code></pre><p>In this file we require two other files, first one is <code>/services/db.js</code> which will be the entry point to the database that will run queries on the database. The next one is the <code>/config.js</code> that has configuration options like the number of rows we want to show per page put in as <code>listPerPage</code>.</p><p>This file has a <code>getMultiple</code> method that is used to query multiple quotes from the database. It uses an easy offset calculator based on the page number and list per page config. The offset is passed in the query to get multiple quotes. Limit and offset are used to enable easy pagination in the above code.</p><p>After that we will create the referenced <code>/services/db.js</code> with the following content:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> sqlite <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'better-sqlite3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">sqlite</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'quotes.db'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">fileMustExist</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token parameter">sql<span class="token punctuation">,</span> params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> db<span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><br>  query<br><span class="token punctuation">}</span></code></pre><p>This <code>/services.db.js</code> file is the only file that communicates with the SQLite database. It has the full path of the database file <code>quotes.db</code> and we also require and use the <code>better-sqlite3</code> NPM package to run our SQL queries.</p><p>This file has only one function <code>query</code> that uses the <a href="https://github.com/JoshuaWise/better-sqlite3/blob/master/docs/api.md#preparestring---statement">prepare</a> function from our library of choice. The prepare function creates a <a href="https://en.wikipedia.org/wiki/Prepared_statement">prepared statement</a>. By using <a href="https://github.com/JoshuaWise/better-sqlite3/blob/master/docs/api.md#allbindparameters---array-of-rows">all</a> method with the prepared statement it returns all the rows that are retrured after running the query. In our case with the offset and limit, it will return 10 rows maximum.</p><p>The quotes service also required the config.js file at the root of the project and it will have the following code:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> env <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">;</span><br><br><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span><br>  <span class="token literal-property property">listPerPage</span><span class="token operator">:</span> env<span class="token punctuation">.</span><span class="token constant">LIST_PER_PAGE</span> <span class="token operator">||</span> <span class="token number">10</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><br><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> config<span class="token punctuation">;</span></code></pre><p>The <code>/config.js</code> is like a helper file used to store any configuration or credentials. For this Node.js SQLite example, we only store the list per page config which is either taken from the environment variable or if that is not available it falls back to the value 10.</p><p>After adding all these files, if we run the server with node or <a href="/blog/2021/02/nodemon/">nodemon</a> command like:</p><pre class="language-bash"><code class="language-bash"><span class="token function">node</span> index.js</code></pre><p>We can see the following output on the browser when we hit <code>http://localhost:3000</code></p><img class="center" loading="lazy" src="/images/nodejs-sqlite/04nodejs-sqlite-get-quotes.jpg" title="Quotes on the GET API with Node.js and SQLite using Express" alt="Quotes on the GET API with Node.js and SQLite using Express"><p>So, what happened here is the GET request to get multiple quotes traveled in the following way:</p><p>And it fetched the data from the <code>quotes.db</code> SQLite database and rendered it back to the browser. As the pagination is also set up we can try <code>https://localhost:3000/quotes?page=2</code> which will give us 7 quotes from id 11 to 17, if we try page 3 it will return an empty data array as there are only 17 quotes in the SQLite database. All the code added for this step can be viewed as a <a href="https://github.com/geshan/nodejs-sqlite/pull/2">pull request</a> for your reference.</p><p>In the following section, we will add the POST Quote API which will enable us to create a new quote.</p><h2 id="post-api-to-save-a-new-quote-with-node.js-sqlite" tabindex="-1">Post API to save a new quote with Node.js SQLite <a class="direct-link" href="#post-api-to-save-a-new-quote-with-node.js-sqlite">#</a></h2><p>To add a new Quote we will crate a POST quote API for this Node.js SQLite tutorial. Before that, we need to make sure that Express can accept JSON in the body. To enable Express js accepting JSON in the request body we will need to add the following line after the Express app has been initialized in the <code>/index.js</code> file.</p><pre class="language-js"><code class="language-js">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Below this line our routes will be placed. Consequently we will add the POST quote route in the <code>/routes/quotes.js</code> file as follows:</p><pre class="language-js"><code class="language-js"><span class="token comment">/* POST quote */</span><br>router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">try</span> <span class="token punctuation">{</span><br>    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>quotes<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Error while adding quotes </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">next</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Here we added a new route to POST quotes. It calls the create method in the quotes service and sends the response back as JSON. If there is any error while creating the new quote on SQLite with Nodejs it will log the error and call the <code>next</code> middleware.</p><p>Subsequently, we will add the create function in the <code>/services/quotes.js</code> as below:</p><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">validateCreate</span><span class="token punctuation">(</span><span class="token parameter">quote</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">let</span> messages <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>quote<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>quote<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    messages<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'No object is provided'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>quote<span class="token punctuation">.</span>quote<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    messages<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'Quote is empty'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>quote<span class="token punctuation">.</span>author<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    messages<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'Author is empty'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br>  <br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>messages<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> error <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>messages<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    error<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">400</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">throw</span> error<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">quoteObj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token function">validateCreate</span><span class="token punctuation">(</span>quoteObj<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span>quote<span class="token punctuation">,</span> author<span class="token punctuation">}</span> <span class="token operator">=</span> quoteObj<span class="token punctuation">;</span><br>  <span class="token keyword">const</span> result <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'INSERT INTO quote (quote, author) VALUES (@quote, @author)'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>quote<span class="token punctuation">,</span> author<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <br>  <span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token string">'Error in creating quote'</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>changes<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    message <span class="token operator">=</span> <span class="token string">'Quote created successfully'</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token keyword">return</span> <span class="token punctuation">{</span>message<span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>In the above code snippet, we have added the 2 methods <code>validateCreate</code> and <code>create</code> in the quotes service. This create method runs the insert query to add a new quote to the database after the validation has passed. In the validating method, we check if the quote and author exist, if any of the two is missing an error with HTTP status code 400 is sent back. In a more real-world application, the <a href="https://github.com/sideway/joi">Joi</a> NPM package can be used for better validation.</p><p>Notice, what we have called the <code>db.run</code> function not <code>db.query</code> as in the get quotes call. We will add this <code>run</code> function in the <code>/services/db.js</code> file as seen below:</p><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token parameter">sql<span class="token punctuation">,</span> params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> db<span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>Both the <code>run</code> function in <code>/sevices/db.js</code> and the <code>create</code> function in <code>/services/quotes.js</code> will need to be exposed out being included in the <code>module.exports</code> definition.</p><p>After that given our server is running, we can run the following cURL command to insert a new code:</p><pre class="language-bash"><code class="language-bash"><span class="token function">curl</span> <span class="token parameter variable">-i</span> <span class="token parameter variable">-X</span> POST <span class="token parameter variable">-H</span> <span class="token string">'Accept: application/json'</span> <span class="token punctuation">\</span><br>    <span class="token parameter variable">-H</span> <span class="token string">'Content-type: application/json'</span> http://localhost:3000/quotes <span class="token punctuation">\</span><br>    <span class="token parameter variable">--data</span> <span class="token string">'{"quote":"Before software can be reusable it first has to be usable.","author":"Ralph Johnson"}'</span></code></pre><p>It will result in the following output:</p><pre class="language-bash"><code class="language-bash">HTTP/1.1 <span class="token number">200</span> OK<br>X-Powered-By: Express<br>Content-Type: application/json<span class="token punctuation">;</span> <span class="token assign-left variable">charset</span><span class="token operator">=</span>utf-8<br>Content-Length: <span class="token number">40</span><br>ETag: W/<span class="token string">"28-Gw37o554emBLJSQVDFBkjoN6exA"</span><br>Date: Wed, <span class="token number">27</span> Oct <span class="token number">2021</span> <span class="token number">11</span>:17:29 GMT<br>Connection: keep-alive<br>Keep-Alive: <span class="token assign-left variable">timeout</span><span class="token operator">=</span><span class="token number">5</span><br><br><span class="token punctuation">{</span><span class="token string">"message"</span><span class="token builtin class-name">:</span><span class="token string">"Quote created successfully"</span><span class="token punctuation">}</span></code></pre><p>Hurray! Our add quotes API is also working too. All the code to introduce the POST API to add a new quote can be seen in this <a href="https://github.com/geshan/nodejs-sqlite/pull/3">pull request</a>.</p><h2 id="next-steps" tabindex="-1">Next steps <a class="direct-link" href="#next-steps">#</a></h2><p>For your own practice, you can add the update (PUT) and delete endpoints to get a better hold of how to do a full-on CRUD API.</p><h2 id="tldr-quick-start" tabindex="-1">TLDR quick start <a class="direct-link" href="#tldr-quick-start">#</a></h2><p>All the code for this tutorial is available in a public GitHub repository for your reference. To get started quickly for the thing that has been built please follow the steps below:</p><ol><li>Clone the repository with <code>git clone git@github.com:geshan/nodejs-sqlite.git</code></li><li>Then execute <code>cd nodejs-sqlite</code></li><li>After that, run: <code>npm install &amp;&amp; npm start</code></li><li>Subsequently, hit <code>http://loalhost:3000/quote</code> on your favorite browser</li><li>You should see the following:</li></ol><img class="center" loading="lazy" src="/images/nodejs-sqlite/04nodejs-sqlite-get-quotes.jpg" title="Quotes on the GET API with Node.js and SQLite using Express" alt="Quotes on the GET API with Node.js and SQLite using Express"><h2 id="conclusion" tabindex="-1">Conclusion <a class="direct-link" href="#conclusion">#</a></h2><p>In this tutorial about Node.js and SQLite, we have learned how to create a minimal REST API for Quotes. This is more like a starting point to build bigger things. You can host your application for free following this tutorial on <a href="/blog/2021/01/free-nodejs-hosting/">Node.js free hosting</a>.</p><blockquote><p>You can use the open-source <a href="https://github.com/geshan/nodejs-sqlite">Github repository</a> to use this example as a base to build your own API with Node.js and SQLite using the Express.js framework. Best of luck!</p></blockquote></div><div class="flex items-center justify-between gap-3 md:gap-4 flex-wrap md:flex-nowrap py-2 border-y border-lightbg mt-4"><div class="flex items-center justify-start md:gap-4 gap-2 flex-wrap w-2/3"><div class="flex justify-start items-center gap-3 md:gap-4"><img src="/images/favicons/favicon-32x32-pp.png" alt="Geshan Manandhar" class="w-10 h-10 rounded-full object-cover flex-shrink-0"> <span class="text-gray font-medium font-ui text-md md:text-xl uppercase tracking-wide text-start">Geshan Manandhar</span></div><time datetime="2021-10-29" data-updated="true"><time class="entry-date" datetime="2021-10-29"><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">29-Oct-2021 </span></time></time><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">17 MIN READ</span></div><button type="button" id="share-button-bottom" class="flex items-center justify-center w-8 h-8 md:w-9 md:h-9 rounded text-lightGray hover:border-gray-400 hover:bg-gray-50 transition-colors flex-shrink-0" aria-label="Share this post" onclick="toggleShareIconsBottom(); ga('send', 'event', 'share', 'clickShareOnPost');"><img src="/images/shareIcon.svg" alt="Share this post" class="w-6 h-6"></button></div><div id="share-icons-container-bottom" class="share-icons-bottom print:hidden hidden mx-auto" aria-label="Share this post"><div class="w-full flex items-center justify-center mx-auto gap-3"><span class="share-icons"><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://geshan.com.np/blog/2021/10/nodejs-sqlite/" target="_blank" title="Share 'Node.js SQLite: Build a simple REST API with Express step-by-step' on LinkedIn" onclick="ga('send', 'event', 'share', 'clickShareOnLinkedIn');"><span id="linkedin-share" class="text-[#0077B5]"><img src="/images/social-icons/linkedin.svg" alt="LinkedIn" class="sharing-common"> </span></a><a href="http://twitter.com/share?text=Node.js SQLite: Build a simple REST API with Express step-by-step - &url=https://geshan.com.np/blog/2021/10/nodejs-sqlite/" target="_blank" title="Share 'Node.js SQLite: Build a simple REST API with Express step-by-step' on Twitter" onclick="ga('send', 'event', 'share', 'clickShareOnTwitter');"><span id="twitter-share" class="text-[#1DA1F2]"><img src="/images/social-icons/twitter.svg" alt="Twitter" class="sharing-common"> </span></a><a href="http://www.facebook.com/sharer.php?u=https://geshan.com.np/blog/2021/10/nodejs-sqlite/" target="_blank" title="Share 'Node.js SQLite: Build a simple REST API with Express step-by-step' on Facebook" onclick="ga('send', 'event', 'share', 'clickShareOnFacebook');"><span id="facebook-share" class="text-[#1877F2]"><img src="/images/social-icons/facebook.svg" alt="Facebook" class="sharing-common"> </span></a><a href="https://t.me/share/url?url=https://geshan.com.np/blog/2021/10/nodejs-sqlite/" target="_blank" title="Share 'Node.js SQLite: Build a simple REST API with Express step-by-step' on Telegram" onclick="ga('send', 'event', 'share', 'clickShareOnTelegram');"><span id="telegram-share" class="text-[#0088cc]"><img src="/images/social-icons/telegram.svg" alt="Telegram" class="sharing-common"> </span></a><a href="https://api.whatsapp.com/send?text=https://geshan.com.np/blog/2021/10/nodejs-sqlite/" target="_blank" title="Share 'Node.js SQLite: Build a simple REST API with Express step-by-step' on Whatsapp" onclick="ga('send', 'event', 'share', 'clickShareOnWhatsapp');"><span id="whatsapp-share" class="text-[#25d366]"><img src="/images/social-icons/whatsapp.svg" alt="WhatsApp" class="sharing-common"></span></a></span></div></div></article><div class="mt-3"><a href="/blog/categories/software-engineering/" title="Software Engineering" class="background-lightbg mr-4 mb-2 inline-block mt-2 rounded border-2 bg-gray-100 font-semibold font-ui text-gray hover:text-gray-400 px-3 py-1 text-xl border-gray-300 cursor-pointer hover:border-gray-400">software engineering </a><a href="/blog/categories/javascript/" title="Javascript" class="background-lightbg mr-4 mb-2 inline-block mt-2 rounded border-2 bg-gray-100 font-semibold font-ui text-gray hover:text-gray-400 px-3 py-1 text-xl border-gray-300 cursor-pointer hover:border-gray-400">javascript </a><a href="/blog/categories/node.js/" title="Node.js" class="background-lightbg mr-4 mb-2 inline-block mt-2 rounded border-2 bg-gray-100 font-semibold font-ui text-gray hover:text-gray-400 px-3 py-1 text-xl border-gray-300 cursor-pointer hover:border-gray-400">node.js</a></div><section class="md:w-full mx-auto mt-4"><h3 class="comments font-heading">Comments</h3><div id="disqus_thread"></div><button id="disqus_trigger" class="font-ui text-blackText hover:border-darkAvocado border-blacktext hover:shadow-lg border-2 transition ease-in-out delay-100 px-3 py-2 pt-2 mt-2 rounded-md text-center block h-auto text-xl" onclick="load_disqus()">Post a Comment</button><div id="disqus_thread" aria-live="polite"></div></section></div></div><section class="md:w-full mx-auto mt-4 bg-lightAvocado p-4 rounded-lg pb-8"><div class="max-w-6xl mx-auto md:py-12 px-4"><h2 class="text-4xl text-darkAvocado font-heading font-regular flex-shrink-0 py-8 tracking-normal leading-[105%] md:leading-[105%]"><span class="text-lightGray italic">Related</span> <span class="text-blackText">Blogs</span></h2><div class="grid grid-cols-1 md:grid-cols-2 gap-8"><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2023/12/nodejs-duet-ai-vs-code/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to write and deploy a basic Node.js API with Duet AI on VS Code a step-by-step guide</a> <time class="font-medium text-xl text-textColor uppercase font-ui">18-Dec-2023 &nbsp;&nbsp;&nbsp; 9 min read</time><p class="text-xl text-gray font-ui">Learn how to write and deploy a basic Node.js API with Duet AI on VS Code, in this step-by-step tutorial with 20+ screenshots!</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2022/08/nodejs-alternatives/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">Node.js alternatives: Exploring Deno and Bun (with code examples)</a> <time class="font-medium text-xl text-textColor uppercase font-ui">18-Aug-2022 &nbsp;&nbsp;&nbsp; 12 min read</time><p class="text-xl text-gray font-ui">Learn about 2 Node.js alternatives in JavaScript sphere, Deno and Bun with a simple code example.</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2022/07/javascript-promise-all/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to use JavaScript Promise.all with real-life code example</a> <time class="font-medium text-xl text-textColor uppercase font-ui">01-Jul-2022 &nbsp;&nbsp;&nbsp; 14 min read</time><p class="text-xl text-gray font-ui">Learn how to use JavaScript Promise.all with a real-life Axios API get call code example compared to a sequential call.</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2022/06/typescript-optional-parameters/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to use TypeScript optional parameters with example code</a> <time class="font-medium text-xl text-textColor uppercase font-ui">12-Jun-2022 &nbsp;&nbsp;&nbsp; 6 min read</time><p class="text-xl text-gray font-ui">Learn how to use optional paramters in typescript function with a simple yet useful example in this post.</p></div></div></div></section><section class="bg-avocado md:py-0 py-12 px-4"><div class="max-w-6xl mx-auto"><div class="md:hidden"><h2 class="mb-4 text-3xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-base text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-base text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity w-full text-center">Follow on LinkedIn &nbsp;→</a></div><div class="hidden md:grid lg:hidden grid-cols-3 gap-8 items-center"><div class="z-10 col-span-2"><h2 class="mb-4 text-2xl md:text-4xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-xl text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-xl text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity">Follow on LinkedIn &nbsp;→</a></div><div class="flex items-center justify-end col-span-1"><img class="w-32 h-auto" src="/images/theme/new_logo.svg" alt="Geshan"></div></div><div class="hidden lg:grid grid-cols-2 gap-8 lg:gap-12 items-center justify-between h-full"><div class="z-10"><h2 class="mb-4 text-2xl md:text-4xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-xl text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><p class="text-xl text-blackText font-body font-regular mb-6">A big thank you for supporting this ad. free, unobstructive (no overlays, no pop-ups) blog.</p></div><div class="flex items-center gap-12 w-full md:w-auto justify-end self-end"><img class="w-16 md:w-32 h-auto" src="/images/theme/new_logo.svg" alt="Geshan"> <a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-xl text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity w-full md:w-auto text-center md:text-left">Follow on LinkedIn &nbsp;→</a></div></div></div></section></div></div></div></main><footer role="contentinfo"><footer class="bg-avocado sm:px-4"><div class="max-w-6xl mx-auto flex flex-col md:flex-row sm:flex-col justify-between gap-2 items-center sm:items-center md:items-center py-10 font-nav text-lightGray text-base font-regular"><div class="pb-0 sm:pb-2 text-gray"><span class="pr-4">Copyright © 2026 Geshan Manandhar.</span></div><div class="pb-0 sm:pb-2"><ul class="flex"><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> LinkedIn</a></li><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://www.twitter.com/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> Twitter</a></li><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://github.com/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> Github</a></li></ul></div></div></footer></footer><script src="/js/all.min.js" defer="defer"></script></body></html>