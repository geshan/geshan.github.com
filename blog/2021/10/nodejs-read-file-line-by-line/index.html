<!doctype html><html class="no-js" lang="en"><head><meta charset="utf-8"><meta name="author" content="Geshan Manandhar"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Learn how to read file line by line in Node.js with sync and async methods using native and NPM modules."><meta name="keywords" content="nodejs read file line by line, read file line by line nodejs, node.js read file line by line, read file line by line node.js"><meta name="p:domain_verify" content="e654c68562abebfa25c291f59d7d00e8"><meta property="og:type" content="website"><meta property="og:url" content="https://geshan.com.np/blog/2021/10/nodejs-read-file-line-by-line/"><meta property="og:title" content="4 ways to read file line by line in Node.js"><meta property="og:description" content="Learn how to read file line by line in Node.js with sync and async methods using native and NPM modules."><meta property="og:site_name" content="Geshan&#39;s Blog"><meta property="og:image" content="https://geshan.com.np/images/nodejs-read-file-line-by-line/01nodejs-read-file-line-by-line.jpg"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:widgets:new-embed-design" content="on"><meta name="twitter:site" content="@geshan"><meta name="twitter:creator" content="@geshan"><meta name="twitter:title" content="4 ways to read file line by line in Node.js"><meta name="twitter:description" content="Learn how to read file line by line in Node.js with sync and async methods using native and NPM modules."><meta name="twitter:image:src" content="https://geshan.com.np/images/nodejs-read-file-line-by-line/01nodejs-read-file-line-by-line.jpg"><link rel="canonical" href="https://geshan.com.np/blog/2021/10/nodejs-read-file-line-by-line/"><meta property="fb:pages" content="30717799226"><meta property="fb:app_id" content="106030259434380"><meta name="monetization" content="$ilp.uphold.com/aKHWpqhphm9f"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicons/favicon-16x16.png"><link href="/atom.xml" rel="alternate" title="Geshan&#39;s Blog" type="application/atom+xml"><title>4 ways to read file line by line in Node.js</title><link rel="preconnect" href="/" crossorigin><link rel="preload" href="/css/fonts.css" as="style"><link rel="preload" href="/fonts/source-sans-4/source-serif-4-latin-400-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/source-sans-4/source-serif-4-latin-500-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/source-sans-pro/source-sans-pro-latin-400-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="/css/fonts.css"><link rel="stylesheet" href="/css/tw-006.css"><link rel="alternate" href="/atom.xml" type="application/atom+xml" title="Geshan&#39;s Blog"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-P3NXCVQEPE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-P3NXCVQEPE');</script><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWT2D9T');</script><script src="https://cdn.jsdelivr.net/npm/@statsig/js-client@3/build/statsig-js-client+session-replay+web-analytics.min.js?apikey=client-rYO7rX8WSUyyLg9pKJwymLxM71tCE0CKgxgtUj4akzK"></script><link rel="manifest" href="/manifest.json"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="application-name" content="Geshan.com.np"><meta name="apple-mobile-web-app-title" content="Geshan.com.np"><meta name="msapplication-starturl" content="/index.html"><meta name="theme-color" content="#6947E7"><script>if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/sw.js").then(function(registration) {
        console.log('ServiceWorker registration successful with scope: ', registration.scope);
    }, function(err) {
        console.log('ServiceWorker registration failed: ', err);
    });
  }</script></head><body class="overflow-x-hidden font-ui flex flex-col min-h-screen"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWT2D9T" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><header role="banner"><div><nav class="bg-white" role="navigation"><div class="w-full md:max-w-6xl mx-auto py-4 px-4"><div class="flex items-center justify-between h-16"><div class="flex-shrink-0"><a href="/" class="flex items-center"><img class="h-12 w-12" src="/images/theme/new_logo.svg" alt="Geshan G"></a></div><div class="flex items-center gap-12"><div class="hidden sm:flex items-center gap-12"><a href="/posts/1/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">Posts </a><a href="/about/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">About Me </a><a href="https://newsletter.geshan.com.np/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">Newsletter</a></div><form class="search flex items-center" action="https://www.google.com/search" method="GET"><input type="hidden" name="sitesearch" value="geshan.com.np"><div class="relative"><input class="bg-gray-100 border border-neutralGray rounded-lg py-2 pl-10 pr-4 font-body text-sm focus:outline-none focus:ring-2 focus:ring-avocado focus:border-transparent w-40" type="text" name="q" placeholder="Search" label="search"> <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-neutralGray" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg></div></form><button type="button" class="sm:hidden inline-flex items-center justify-center p-2 rounded-md text-black focus:outline-none focus:ring-2 focus:ring-inset focus:ring-avocado" onclick="mobileView()" aria-controls="mobile-menu" aria-expanded="false"><span class="sr-only">Open main menu</span> <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg></button></div></div></div><div class="mobile-menu fixed inset-0 z-40 hidden sm:hidden bg-black bg-opacity-40" role="dialog" aria-modal="true"><div class="absolute inset-0" onclick="mobileView()" aria-hidden="true"></div><div class="mobile-menu-panel relative ml-auto flex h-full w-10/12 max-w-sm flex-col justify-start bg-white shadow-xl"><div class="flex items-center justify-between px-4 py-4 border-b border-gray-200"><div class="flex items-center gap-3"><img class="h-8 w-8" src="/images/theme/new_logo.svg" alt="Geshan G"> <span class="text-lg font-semibold text-textColor font-body">Geshan's Blog</span></div><button type="button" class="inline-flex items-center justify-center rounded-full p-2 text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-avocado" onclick="mobileView()" aria-label="Close main menu"><svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg></button></div><nav class="overflow-y-auto px-4 py-6 space-y-2"><a href="/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Home </a><a href="/posts/1/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Posts </a><a href="/about/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">About Me </a><a href="https://newsletter.geshan.com.np/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Newsletter</a></nav><div class="px 4 py-4 border-t border-gray-200"><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="rounded-lg bg-darkAvocado px-4 py-2 text-base font-regular font-body text-white hover:bg-avocado hover:text-black transition-colors w-2/3 mx-auto ml-4">Connect on LinkedIn</a></div></div></div></nav></div></header><main id="wrap" role="main" class="flex-grow md:px-0"><div id="content"><div class="row"><div><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Geshan&#39;s Blog",
    "alternativeHeadline": "4 ways to read file line by line in Node.js",
    "image": "https://geshan.com.np/images/nodejs-read-file-line-by-line/01nodejs-read-file-line-by-line.jpg",
    "editor": "Geshan Manandhar",
    "genre": "Software Engineering",
    "keywords": "nodejs read file line by line, read file line by line nodejs, node.js read file line by line, read file line by line node.js",
    "url": "https://geshan.com.np/blog/2021/10/nodejs-read-file-line-by-line/",
    "datePublished": "2021-10-08",
    "dateCreated": "2021-10-08",
    "dateModified": "2021-10-08",
    "description": "Learn how to read file line by line in Node.js with sync and async methods using native and NPM modules.",
    "articleBody": "There are multiple ways to read a file line by line with Node.js. In Node.js files can be read in sync way or in an async way. With the async path, it is possible to read large files without loading all the content of the file into memory.Reading the whole file at once will make the process memory intensive. With the ability to load and read a file line by line it enables us to stop the process at any step as per need. In this post, we will look into 3 ways to read a file line by line using Node.js with memory usage comparison.Table of contents #PrerequisitesThe test fileRead file syncReadlineN-readlinesLine readerOther optionsQuick comparisonConclusionPrerequisites #Before jumping to the code, below are some of the prerequisites to follow along with the provided code examples:Having Node.js 14+ (preferably the latest LTS Node 18) running on your machine/test environment is required. You can even use Node.js on docker for it.Knowledge of how to install NPM modules would be necessary.Any prior understanding of streams and how they work would be helpful.Any knowledge of Node’s event-based architecture will be good to have.I am running the code on a Mac with Node.js 14. In the following section we will look into the file we are going to use to read line by line with Node.js. The code examples are available in a public GitHub repository for your convenience.The test file #For all of the trail runs below we will use a 90 MB SQL dump file which I have taken from this BroadBandNow clone repository. The same file is used for each method of reading file line by line in Node.js to keep the test consistent across methods. We will also look at the memory consumption and the time it took to read the 90 MB file that has 798148 lines of text. This should be a good test to look at how these ways perform for a relatively large file.Read file sync #We can possibly read the file in a synchronous way, meaning loading the whole 90 MB file in memory and loop through it. But, as we will load the whole file first before reading any lines from it the memory consumption will surely be more than 90 MB. Here is a quick example for reading the file line by line but in a not very performant sync way:const fs = require(&#39;fs&#39;);const allFileContents = fs.readFileSync(&#39;broadband.sql&#39;, &#39;utf-8&#39;);allFileContents.split(/&#92;r?&#92;n/).forEach(line =&gt;  {  console.log(`Line from file: ${line}`);});const used = process.memoryUsage().heapUsed / 1024 / 1024;console.log(`The script uses approximately ${Math.round(used * 100) / 100} MB`);As we are using the  some code .Below is the code example of readline with a readable stream:const events = require(&#39;events&#39;);const fs = require(&#39;fs&#39;);const readline = require(&#39;readline&#39;);(async function processLineByLine() {  try {    const rl = readline.createInterface({      input: fs.createReadStream(&#39;broadband.sql&#39;),      crlfDelay: Infinity    });    rl.on(&#39;line&#39;, (line) =&gt; {      console.log(`Line from file: ${line}`);    });    await events.once(rl, &#39;close&#39;);    console.log(&#39;Reading file line by line with readline done.&#39;);    const used = process.memoryUsage().heapUsed / 1024 / 1024;    console.log(`The script uses approximately ${Math.round(used * 100) / 100} MB`);  } catch (err) {    console.error(err);  }})();Let’s understand what is going on in the above script. First we require 3 native node.js modules events, fs, and readline. After that, we define async function called  some code :const nReadlines = require(&#39;n-readlines&#39;);const broadbandLines = new nReadlines(&#39;broadband.sql&#39;);let line;let lineNumber = 1;while (line = broadbandLines.next()) {    console.log(`Line ${lineNumber} has: ${line.toString(&#39;ascii&#39;)}`);    lineNumber++;}console.log(&#39;end of file.&#39;);const used = process.memoryUsage().heapUsed / 1024 / 1024;console.log(`The script uses approximately ${Math.round(used * 100) / 100} MB`);In the above code, first, we require the  some code  and then created the following file:const lineReader = require(&#39;line-reader&#39;);lineReader.eachLine(&#39;broadband.sql&#39;, function(line, last) {  console.log(`Line from file: ${line}`);  if(last) {    console.log(&#39;Last line printed.&#39;);    const used = process.memoryUsage().heapUsed / 1024 / 1024;    console.log(`The script uses approximately ${Math.round(used * 100) / 100} MB`);  }});First, we require the line reader module then call the  some code , all other stream or callback based options consumed under 10 MB or memoery and finished before 10 seconds with 70-94% CPU usage. Read file sync consumed 225 MB of memory for a 90 MB file.Conclusion #We looked at how to read a file line by line in Node.js. Even though it seems like a trivial problem there are multiple ways to do it in Node.js like most things in JavaScript.We also analyzed the memory usage and time it took for each of the 3 methods.Finally, we looked at a quick comparison of these and other options available in terms of popularity. I hope it helps you make an informed decision to read a file line by line with Node.js.",
    "author": { "@type": "Person", "name": "Geshan Manandhar" },
    "publisher": {
      "@type": "Organization",
      "name": "Geshan Manandhar",
      "logo": { "@type": "ImageObject", "url": "https://geshan.com.np/images/favicons/favicon-32x32.png" }
    },
    "mainEntityOfPage": { "@type": "WebPage", "@id": "https://geshan.com.np/blog/2021/10/nodejs-read-file-line-by-line/" }
  }</script><div class="progress-bar"></div><div class="max-w-6xl py-3 mx-auto grid-cols-12 grid gap-15 px-4 md:px-0 mb-20"><div class="col-span-12"><article class="md:w-full mx-auto"><header class="page-header text-center"><h1 class="font-semibold font-heading text-gray text-center mb-6 tracking-[-0.01em] leading-[105%] md:leading-[105%]">4 ways to read file line by line in Node.js</h1><div class="flex items-center justify-between gap-3 md:gap-4 flex-wrap md:flex-nowrap py-2 border-y border-lightbg mt-4"><div class="flex items-center justify-start md:gap-4 gap-2 flex-wrap w-2/3"><div class="flex justify-start items-center gap-3 md:gap-4"><img src="/images/favicons/favicon-32x32-pp.png" alt="Geshan Manandhar" class="w-10 h-10 rounded-full object-cover flex-shrink-0"> <span class="text-gray font-medium font-ui text-md md:text-xl uppercase tracking-wide text-start">Geshan Manandhar</span></div><time datetime="2021-10-08" data-updated="true"><time class="entry-date" datetime="2021-10-08"><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">08-Oct-2021 </span></time></time><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">14 MIN READ</span></div><button type="button" id="share-button" class="flex items-center justify-center w-8 h-8 md:w-9 md:h-9 rounded text-lightGray hover:border-gray-400 hover:bg-gray-50 transition-colors flex-shrink-0" aria-label="Share this post" onclick="toggleShareIcons(); ga('send', 'event', 'share', 'clickShareOnPost');"><img src="/images/shareIcon.svg" alt="Share this post" class="w-6 h-6"></button></div><div id="share-icons-container" class="share-icons print:hidden hidden" aria-label="Share this post"><div class="flex items-center justify-center gap-3"><span class="share-icons"><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://geshan.com.np/blog/2021/10/nodejs-read-file-line-by-line/" target="_blank" title="Share '4 ways to read file line by line in Node.js' on LinkedIn" onclick="ga('send', 'event', 'share', 'clickShareOnLinkedIn');"><span id="linkedin-share" class="text-[#0077B5]"><img src="/images/social-icons/linkedin.svg" alt="LinkedIn" class="sharing-common"> </span></a><a href="http://twitter.com/share?text=4 ways to read file line by line in Node.js - &url=https://geshan.com.np/blog/2021/10/nodejs-read-file-line-by-line/" target="_blank" title="Share '4 ways to read file line by line in Node.js' on Twitter" onclick="ga('send', 'event', 'share', 'clickShareOnTwitter');"><span id="twitter-share" class="text-[#1DA1F2]"><img src="/images/social-icons/twitter.svg" alt="Twitter" class="sharing-common"> </span></a><a href="http://www.facebook.com/sharer.php?u=https://geshan.com.np/blog/2021/10/nodejs-read-file-line-by-line/" target="_blank" title="Share '4 ways to read file line by line in Node.js' on Facebook" onclick="ga('send', 'event', 'share', 'clickShareOnFacebook');"><span id="facebook-share" class="text-[#1877F2]"><img src="/images/social-icons/facebook.svg" alt="Facebook" class="sharing-common"> </span></a><a href="https://t.me/share/url?url=https://geshan.com.np/blog/2021/10/nodejs-read-file-line-by-line/" target="_blank" title="Share '4 ways to read file line by line in Node.js' on Telegram" onclick="ga('send', 'event', 'share', 'clickShareOnTelegram');"><span id="telegram-share" class="text-[#0088cc]"><img src="/images/social-icons/telegram.svg" alt="Telegram" class="sharing-common"> </span></a><a href="https://api.whatsapp.com/send?text=https://geshan.com.np/blog/2021/10/nodejs-read-file-line-by-line/" target="_blank" title="Share '4 ways to read file line by line in Node.js' on Whatsapp" onclick="ga('send', 'event', 'share', 'clickShareOnWhatsapp');"><span id="whatsapp-share" class="text-[#25d366]"><img src="/images/social-icons/whatsapp.svg" alt="WhatsApp" class="sharing-common"></span></a></span></div></div></header><div class="entry-content clearfix font-body text-xl text-gray"><p>There are multiple ways to read a file line by line with Node.js. In Node.js files can be read in sync way or in an async way. With the async path, it is possible to read large files without loading all the content of the file into memory.</p><p>Reading the whole file at once will make the process memory intensive. With the ability to load and read a file line by line it enables us to stop the process at any step as per need. In this post, we will look into 3 ways to read a file line by line using Node.js with memory usage comparison.</p><img class="center" loading="lazy" src="/images/nodejs-read-file-line-by-line/01nodejs-read-file-line-by-line.jpg" title="4 ways to read file line by line with Node.js" alt="4 ways to read file line by line with Node.js"><h2 id="table-of-contents" tabindex="-1">Table of contents <a class="direct-link" href="#table-of-contents">#</a></h2><ul><li><a href="#prerequisites">Prerequisites</a></li><li><a href="#the-test-file">The test file</a></li><li><a href="#read-file-sync">Read file sync</a></li><li><a href="#readline">Readline</a></li><li><a href="#n-readlines">N-readlines</a></li><li><a href="#line-reader">Line reader</a></li><li><a href="#other-options">Other options</a></li><li><a href="#quick-comparison">Quick comparison</a></li><li><a href="#conclusion">Conclusion</a></li></ul><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="direct-link" href="#prerequisites">#</a></h2><p>Before jumping to the code, below are some of the prerequisites to follow along with the provided code examples:</p><ol><li>Having Node.js 14+ (preferably the latest LTS Node 18) running on your machine/test environment is required. You can even use <a href="/blog/2020/11/nodejs-with-docker/">Node.js on docker</a> for it.</li><li>Knowledge of how to install NPM modules would be necessary.</li><li>Any prior understanding of streams and how they work would be helpful.</li><li>Any knowledge of <a href="https://www.freecodecamp.org/news/understanding-node-js-event-driven-architecture-223292fcbc2d/">Node’s event-based architecture</a> will be good to have.</li></ol><p>I am running the code on a Mac with Node.js 14. In the following section we will look into the file we are going to use to read line by line with Node.js. The code examples are available in a public <a href="https://github.com/geshan/nodejs-readfile-line-by-line">GitHub repository</a> for your convenience.</p><h2 id="the-test-file" tabindex="-1">The test file <a class="direct-link" href="#the-test-file">#</a></h2><p>For all of the trail runs below we will use a 90 MB <a href="https://github.com/geshan/nodejs-readfile-line-by-line/blob/master/broadband.sql">SQL dump file</a> which I have taken from this <a href="https://github.com/mazzyy/BroadbandNow">BroadBandNow clone</a> repository. The same file is used for each method of reading file line by line in Node.js to keep the test consistent across methods. We will also look at the memory consumption and the time it took to read the 90 MB file that has 798148 lines of text. This should be a good test to look at how these ways perform for a relatively large file.</p><h2 id="read-file-sync" tabindex="-1">Read file sync <a class="direct-link" href="#read-file-sync">#</a></h2><p>We can possibly read the file in a synchronous way, meaning loading the whole 90 MB file in memory and loop through it. But, as we will load the whole file first before reading any lines from it the memory consumption will surely be more than 90 MB. Here is a quick example for reading the file line by line but in a not very performant sync way:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> allFileContents <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'broadband.sql'</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>allFileContents<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\r?\n</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">line</span> <span class="token operator">=></span>  <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Line from file: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>line<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> used <span class="token operator">=</span> process<span class="token punctuation">.</span><span class="token function">memoryUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>heapUsed <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">/</span> <span class="token number">1024</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The script uses approximately </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>used <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> MB</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>As we are using the <code>fs</code> module which is a native one, there is no need to install any new NPM module. In the above code, we are reading the while file synchronously then looping through each line one by one and printing it to the console with a <code>console.log</code>.</p><p>After the looping is done we print out the approximate memory usage. This code can be found in this <a href="https://github.com/geshan/nodejs-readfile-line-by-line/pull/2">pull request</a> for your reference. If we run this script with a time prefix as below:</p><pre class="language-bash"><code class="language-bash"><span class="token function">node</span> readfilesync.js</code></pre><p>It will run and end with output as follows:</p><img class="center" loading="lazy" src="/images/nodejs-read-file-line-by-line/02readfilesync.jpg" title="Read file line by line with Node.js using fs.readfilesync" alt="Read file line by line with Node.js using fs.readfilesync"><p>As expected for a 90 MB file it took ~225 MB of memory and took 7.85 seconds for it to loop through the 798K lines of text.</p><blockquote><p>If there is a 1 GB file it is not recommended to use this method as it will go out of memory trying to load the whole file into the memory.</p></blockquote><p>Next, we will look at a more performant async way of reading a file line by line with <code>readline</code> and a stream which is another native Node.js module.</p><h2 id="readline" tabindex="-1">Readline <a class="direct-link" href="#readline">#</a></h2><p><a href="https://nodejs.org/api/readline.html">Readline</a> is a native Node.js module so there is no need to install a new NPM module to use it. It can be used to read files line by line by reading one line at a time from any readable stream. We will be using the on method with the <code>line</code> <a href="https://nodejs.org/api/readline.html#readline_event_line">event</a> which is emitted when the input stream receives an end-of-line input <code>\n, \r,</code> or <code>\r\n</code>.</p><p>Below is the code example of readline with a readable stream:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> events <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> readline <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'readline'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">processLineByLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">try</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> rl <span class="token operator">=</span> readline<span class="token punctuation">.</span><span class="token function">createInterface</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>      <span class="token literal-property property">input</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">'broadband.sql'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>      <span class="token literal-property property">crlfDelay</span><span class="token operator">:</span> <span class="token number">Infinity</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    rl<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'line'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">line</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Line from file: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>line<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">await</span> events<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span>rl<span class="token punctuation">,</span> <span class="token string">'close'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Reading file line by line with readline done.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> used <span class="token operator">=</span> process<span class="token punctuation">.</span><span class="token function">memoryUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>heapUsed <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">/</span> <span class="token number">1024</span><span class="token punctuation">;</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The script uses approximately </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>used <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> MB</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Let’s understand what is going on in the above script. First we require 3 native node.js modules events, fs, and readline. After that, we define async function called <code>processLineByLine</code> which creates an interface for readline where the input is a readstram where we pass our 90 MB test file. As per the <a href="https://nodejs.org/api/readline.html#readline_readline_createinterface_options">create Interface options</a> the crlfDelay set to infinity will consider <code>\r</code> followed by <code>\n</code> as a single newline.</p><p>As we are interacting with a readable stream, on each line read event it will call the <code>ri.on</code> function with the <code>line</code> event. At that point, we log the contents of the line read from the stream. Then we listen to the readline close event with <code>events.once</code> that <a href="https://nodejs.org/api/events.html#events_events_once_emitter_name_options">creates a promise</a> that will resolve with an array of all the arguments emitted to the given event. It will be an empty array in this case.</p><p>Finally, we read the memory usage and log it. You can reference the above code in this <a href="https://github.com/geshan/nodejs-readfile-line-by-line/pull/3">pull request</a>. When we run this script with:</p><pre class="language-bash"><code class="language-bash"><span class="token function">node</span> readline.js</code></pre><p>It yields the following output:</p><img class="center" loading="lazy" src="/images/nodejs-read-file-line-by-line/03readline.jpg" title="Read file line by line with Node.js using readline native module" alt="Read file line by line with Node.js using readline native module"><p>As seen above, the readline module with a readable stream took only 6.33 MB of memory to read a 90 MB file.</p><blockquote><p>As it was streamed which is a lot lesser than 225 MB in the previous sync example.</p></blockquote><p>It completed the process in 7.365 seconds. Next up we will look at the N-readlines NPM module to read a file line by line.</p><h2 id="n-readlines" tabindex="-1">N-readlines <a class="direct-link" href="#n-readlines">#</a></h2><p>N-readline is a <a href="https://www.npmjs.com/package/n-readlines">NPM module</a> that will read file line by line without buffering the whole file in memory. It does this without using streams by reading the file’s content in <a href="https://github.com/nacholibre/node-readlines/blob/master/readlines.js#L84">chunks</a> using <a href="https://nodejs.org/api/buffer.html#buffer_new_buffer_array">Buffer</a> and the native file system module. Even though it works in a synchronous way it does not load the whole file in memory.</p><p>Below is an example of how to use N-readline to read a file line by line after installing it with <code>npm i --save n-readlines</code>:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> nReadlines <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'n-readlines'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> broadbandLines <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">nReadlines</span><span class="token punctuation">(</span><span class="token string">'broadband.sql'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">let</span> line<span class="token punctuation">;</span><br><span class="token keyword">let</span> lineNumber <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><br><br><span class="token keyword">while</span> <span class="token punctuation">(</span>line <span class="token operator">=</span> broadbandLines<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Line </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>lineNumber<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> has: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>line<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">'ascii'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    lineNumber<span class="token operator">++</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'end of file.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> used <span class="token operator">=</span> process<span class="token punctuation">.</span><span class="token function">memoryUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>heapUsed <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">/</span> <span class="token number">1024</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The script uses approximately </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>used <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> MB</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>In the above code, first, we require the <code>n-readlines</code> module and we instantiate it with our <code>broadband.sql</code> file which is 90 MBs. Other <a href="https://github.com/nacholibre/node-readlines#new-readlinesfd-options">options</a> like <code>readChunk</code> and <code>newLineCharacter</code> can be passed in as the second parameter in <code>new nReadlines</code> but we go with the default.</p><p>Consequently, we define two variables <code>line</code> and <code>lineNumber</code>. Line variable will hold the string for each line of the file and the <code>lineNumber</code> will hold the line number from 1 to the number of lines the file has.</p><p>Subsequently, we loop through the lines while there are lines in the file with <code>broadbankLines.next()</code> call. As it returns a buffer if a line exists we console log it on the CLI after converting it to an ASCII string. Next, we increment the Line number inside the loop.</p><p>Finally, we print <code>end of file</code> and like the above examples also print out the approximate memory usage. This code is also available as a <a href="https://github.com/geshan/nodejs-readfile-line-by-line/pull/5/files">pull request</a> for your reference. We can execute the above script with:</p><pre class="language-bash"><code class="language-bash"><span class="token function">node</span> n-readlines.js</code></pre><p>It will render the following output towards the end of the script execution:</p><img class="center" loading="lazy" src="/images/nodejs-read-file-line-by-line/04n-readlines.jpg" title="Read file line by line with Node.js using n-readlines npm module" alt="Read file line by line with Node.js using n-readlines npm module"><p>As seen above it got the task done in 8.9 seconds.</p><blockquote><p>To print all the 798K lines of the 90 MB SQL file, n-readlines consumed only 4.11 MB memory which is amazing.</p></blockquote><p>In the following section, we will see how the line reader NPM module can be used to read files line by line with Node.js.</p><h2 id="line-reader" tabindex="-1">Line reader <a class="direct-link" href="#line-reader">#</a></h2><p>Line reader <a href="https://www.npmjs.com/package/line-reader">NPM module</a> defines itself as “Asynchronous, buffered, line-by-line file/stream reader with support for user-defined line separators.” on its <a href="https://github.com/nickewing/line-reader">GitHub</a> page. In the <a href="https://github.com/nickewing/line-reader#usage">usage</a> section of the page, it also mentions that <code>eachLine</code> function reads each line of the given file. The <code>last</code> variable in the callback can be used to determine if the last line of the file has been reached.</p><p>Below is the working example of reading our relatively big 90 MB SQL file with line reader, we installed it with <code>npm i --save line-reader</code> and then created the following file:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> lineReader <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'line-reader'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>lineReader<span class="token punctuation">.</span><span class="token function">eachLine</span><span class="token punctuation">(</span><span class="token string">'broadband.sql'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">line<span class="token punctuation">,</span> last</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Line from file: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>line<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span><span class="token punctuation">(</span>last<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Last line printed.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> used <span class="token operator">=</span> process<span class="token punctuation">.</span><span class="token function">memoryUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>heapUsed <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">/</span> <span class="token number">1024</span><span class="token punctuation">;</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The script uses approximately </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>used <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> MB</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>First, we require the line reader module then call the <code>eachLine</code> function passing the filename (or file path) as the first parameter. The second parameter is a callback function that has the line and the last variables. Subsequently, we log the line from the file available in the line variable.</p><p>Next up, if we find the last variable to be true which indicates we have reached the end of the file we log the <code>Last line printed</code> message and also print out the approximate memory used to read the file line by line. This code is also available as a <a href="https://github.com/geshan/nodejs-readfile-line-by-line/pull/6/files">pull request</a> for your reference.</p><p>We can run this code by executing:</p><pre class="language-bash"><code class="language-bash"><span class="token function">node</span> line-reader.js</code></pre><p>It will end with an output that looks like the following:</p><img class="center" loading="lazy" src="/images/nodejs-read-file-line-by-line/05line-reader.jpg" title="Read file line by line with Node.js using line-reader npm module" alt="Read file line by line with Node.js using line-reader npm module"><p>As seen above the script finished in 10.66 seconds.</p><blockquote><p>Compared to 225 MB memory used in <code>fs.readFileSync</code>, reading a 90 MB file with line reader took only 5.18 MB of memory which is 45 times lesser.</p></blockquote><p>If you want to restart your Node.js script on each change try out <a href="/blog/2021/02/nodemon/">Nodemon</a>. Next up, we will see if there are other options but we surely have covered the top 3 most popular ones.</p><h2 id="other-options" tabindex="-1">Other options <a class="direct-link" href="#other-options">#</a></h2><p>There are other options to read file line by line with Node.js. There is a very popular NPM module called <a href="https://www.npmjs.com/package/readline">readline</a> but due to the name collision with the native Node.js module, it has been renamed to <a href="https://www.npmjs.com/package/linebyline">Line By LIne</a> now. It works very similarly to the native readline module.</p><p>Other less popular but available options are, <a href="https://www.npmjs.com/package/file-readline">file readline</a> and <a href="https://npmjs.com/package/readlines-ng">readlines-ng</a>. Both of them are NPM modules but they were downloaded around 3 times each last week.</p><p>For further processing of file contents, using these <a href="/blog/2021/03/javascript-array-functions/">JavaScript array functions</a> would be very helpful. This takes us to a quick comparison of these available options.</p><h2 id="quick-comparison" tabindex="-1">Quick comparison <a class="direct-link" href="#quick-comparison">#</a></h2><p>A quick comparison of these four NPM modules on <a href="https://www.npmtrends.com/file-readline-vs-line-reader-vs-n-readlines-vs-readlines-ng">NPM Trends</a> revealed that N-readlines is the most download one with 56K downloads in the last week. The second one is line-reader with 46K downloads last week but keep in mind that line-reader was last updated 6 years ago. Below is a snapshot of downloads for the past 1 year:</p><img class="center" loading="lazy" src="/images/nodejs-read-file-line-by-line/06npm-trends-compare.jpg" title="Comparing downloads and other aspects of 4 read file line by line NPM modules on NPM Trends" alt="Comparing downloads and other aspects of 4 read file line by line NPM modules on NPM Trends"><p>It will be better to choose the popular ones and the one most recently updated is n-readlines which was a year ago.</p><blockquote><p>The downloads for both file readline and readlines ng are around 3 per week compared to 46K and 56K for line reader and n-readlines respectively.</p></blockquote><p>Make an informed choice for better support if you need it. In case you want to read multiple files at once you can use <a href="/blog/2022/07/javascript-promise-all/">JavaScript Promise.all</a> to get the job done. If the file is long you can even <a href="/blog/2022/08/javascript-wait-1-second/">wait 1 second</a> to manage the resource in a better way.</p><p>In terms of memory and CPU usage all methods except of the first <code>fs.readfilesync</code>, all other stream or callback based options consumed under 10 MB or memoery and finished before 10 seconds with 70-94% CPU usage. Read file sync consumed 225 MB of memory for a 90 MB file.</p><h2 id="conclusion" tabindex="-1">Conclusion <a class="direct-link" href="#conclusion">#</a></h2><p>We looked at how to read a file line by line in Node.js. Even though it seems like a trivial problem there are multiple ways to do it in Node.js like most things in JavaScript.</p><blockquote><p>We also analyzed the memory usage and time it took for each of the 3 methods.</p></blockquote><p>Finally, we looked at a quick comparison of these and other options available in terms of popularity. I hope it helps you make an informed decision to read a file line by line with Node.js.</p></div><div class="flex items-center justify-between gap-3 md:gap-4 flex-wrap md:flex-nowrap py-2 border-y border-lightbg mt-4"><div class="flex items-center justify-start md:gap-4 gap-2 flex-wrap w-2/3"><div class="flex justify-start items-center gap-3 md:gap-4"><img src="/images/favicons/favicon-32x32-pp.png" alt="Geshan Manandhar" class="w-10 h-10 rounded-full object-cover flex-shrink-0"> <span class="text-gray font-medium font-ui text-md md:text-xl uppercase tracking-wide text-start">Geshan Manandhar</span></div><time datetime="2021-10-08" data-updated="true"><time class="entry-date" datetime="2021-10-08"><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">08-Oct-2021 </span></time></time><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">14 MIN READ</span></div><button type="button" id="share-button-bottom" class="flex items-center justify-center w-8 h-8 md:w-9 md:h-9 rounded text-lightGray hover:border-gray-400 hover:bg-gray-50 transition-colors flex-shrink-0" aria-label="Share this post" onclick="toggleShareIconsBottom(); ga('send', 'event', 'share', 'clickShareOnPost');"><img src="/images/shareIcon.svg" alt="Share this post" class="w-6 h-6"></button></div><div id="share-icons-container-bottom" class="share-icons-bottom print:hidden hidden mx-auto" aria-label="Share this post"><div class="w-full flex items-center justify-center mx-auto gap-3"><span class="share-icons"><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://geshan.com.np/blog/2021/10/nodejs-read-file-line-by-line/" target="_blank" title="Share '4 ways to read file line by line in Node.js' on LinkedIn" onclick="ga('send', 'event', 'share', 'clickShareOnLinkedIn');"><span id="linkedin-share" class="text-[#0077B5]"><img src="/images/social-icons/linkedin.svg" alt="LinkedIn" class="sharing-common"> </span></a><a href="http://twitter.com/share?text=4 ways to read file line by line in Node.js - &url=https://geshan.com.np/blog/2021/10/nodejs-read-file-line-by-line/" target="_blank" title="Share '4 ways to read file line by line in Node.js' on Twitter" onclick="ga('send', 'event', 'share', 'clickShareOnTwitter');"><span id="twitter-share" class="text-[#1DA1F2]"><img src="/images/social-icons/twitter.svg" alt="Twitter" class="sharing-common"> </span></a><a href="http://www.facebook.com/sharer.php?u=https://geshan.com.np/blog/2021/10/nodejs-read-file-line-by-line/" target="_blank" title="Share '4 ways to read file line by line in Node.js' on Facebook" onclick="ga('send', 'event', 'share', 'clickShareOnFacebook');"><span id="facebook-share" class="text-[#1877F2]"><img src="/images/social-icons/facebook.svg" alt="Facebook" class="sharing-common"> </span></a><a href="https://t.me/share/url?url=https://geshan.com.np/blog/2021/10/nodejs-read-file-line-by-line/" target="_blank" title="Share '4 ways to read file line by line in Node.js' on Telegram" onclick="ga('send', 'event', 'share', 'clickShareOnTelegram');"><span id="telegram-share" class="text-[#0088cc]"><img src="/images/social-icons/telegram.svg" alt="Telegram" class="sharing-common"> </span></a><a href="https://api.whatsapp.com/send?text=https://geshan.com.np/blog/2021/10/nodejs-read-file-line-by-line/" target="_blank" title="Share '4 ways to read file line by line in Node.js' on Whatsapp" onclick="ga('send', 'event', 'share', 'clickShareOnWhatsapp');"><span id="whatsapp-share" class="text-[#25d366]"><img src="/images/social-icons/whatsapp.svg" alt="WhatsApp" class="sharing-common"></span></a></span></div></div></article><div class="mt-3"><a href="/blog/categories/software-engineering/" title="Software Engineering" class="background-lightbg mr-4 mb-2 inline-block mt-2 rounded border-2 bg-gray-100 font-semibold font-ui text-gray hover:text-gray-400 px-3 py-1 text-xl border-gray-300 cursor-pointer hover:border-gray-400">software engineering </a><a href="/blog/categories/javascript/" title="Javascript" class="background-lightbg mr-4 mb-2 inline-block mt-2 rounded border-2 bg-gray-100 font-semibold font-ui text-gray hover:text-gray-400 px-3 py-1 text-xl border-gray-300 cursor-pointer hover:border-gray-400">javascript </a><a href="/blog/categories/node.js/" title="Node.js" class="background-lightbg mr-4 mb-2 inline-block mt-2 rounded border-2 bg-gray-100 font-semibold font-ui text-gray hover:text-gray-400 px-3 py-1 text-xl border-gray-300 cursor-pointer hover:border-gray-400">node.js</a></div><section class="md:w-full mx-auto mt-4"><h3 class="comments font-heading">Comments</h3><div id="disqus_thread"></div><button id="disqus_trigger" class="font-ui text-blackText hover:border-darkAvocado border-blacktext hover:shadow-lg border-2 transition ease-in-out delay-100 px-3 py-2 pt-2 mt-2 rounded-md text-center block h-auto text-xl" onclick="load_disqus()">Post a Comment</button><div id="disqus_thread" aria-live="polite"></div></section></div></div><section class="md:w-full mx-auto mt-4 bg-lightAvocado p-4 rounded-lg pb-8"><div class="max-w-6xl mx-auto md:py-12 px-4"><h2 class="text-4xl text-darkAvocado font-heading font-regular flex-shrink-0 py-8 tracking-normal leading-[105%] md:leading-[105%]"><span class="text-lightGray italic">Related</span> <span class="text-blackText">Blogs</span></h2><div class="grid grid-cols-1 md:grid-cols-2 gap-8"><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2023/12/nodejs-duet-ai-vs-code/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to write and deploy a basic Node.js API with Duet AI on VS Code a step-by-step guide</a> <time class="font-medium text-xl text-textColor uppercase font-ui">18-Dec-2023 &nbsp;&nbsp;&nbsp; 9 min read</time><p class="text-xl text-gray font-ui">Learn how to write and deploy a basic Node.js API with Duet AI on VS Code, in this step-by-step tutorial with 20+ screenshots!</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2022/08/nodejs-alternatives/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">Node.js alternatives: Exploring Deno and Bun (with code examples)</a> <time class="font-medium text-xl text-textColor uppercase font-ui">18-Aug-2022 &nbsp;&nbsp;&nbsp; 12 min read</time><p class="text-xl text-gray font-ui">Learn about 2 Node.js alternatives in JavaScript sphere, Deno and Bun with a simple code example.</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2022/07/javascript-promise-all/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to use JavaScript Promise.all with real-life code example</a> <time class="font-medium text-xl text-textColor uppercase font-ui">01-Jul-2022 &nbsp;&nbsp;&nbsp; 14 min read</time><p class="text-xl text-gray font-ui">Learn how to use JavaScript Promise.all with a real-life Axios API get call code example compared to a sequential call.</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2022/06/typescript-optional-parameters/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to use TypeScript optional parameters with example code</a> <time class="font-medium text-xl text-textColor uppercase font-ui">12-Jun-2022 &nbsp;&nbsp;&nbsp; 6 min read</time><p class="text-xl text-gray font-ui">Learn how to use optional paramters in typescript function with a simple yet useful example in this post.</p></div></div></div></section><section class="bg-avocado md:py-0 py-12 px-4"><div class="max-w-6xl mx-auto"><div class="md:hidden"><h2 class="mb-4 text-3xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-base text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-base text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity w-full text-center">Follow on LinkedIn &nbsp;→</a></div><div class="hidden md:grid lg:hidden grid-cols-3 gap-8 items-center"><div class="z-10 col-span-2"><h2 class="mb-4 text-2xl md:text-4xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-xl text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-xl text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity">Follow on LinkedIn &nbsp;→</a></div><div class="flex items-center justify-end col-span-1"><img class="w-32 h-auto" src="/images/theme/new_logo.svg" alt="Geshan"></div></div><div class="hidden lg:grid grid-cols-2 gap-8 lg:gap-12 items-center justify-between h-full"><div class="z-10"><h2 class="mb-4 text-2xl md:text-4xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-xl text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><p class="text-xl text-blackText font-body font-regular mb-6">A big thank you for supporting this ad. free, unobstructive (no overlays, no pop-ups) blog.</p></div><div class="flex items-center gap-12 w-full md:w-auto justify-end self-end"><img class="w-16 md:w-32 h-auto" src="/images/theme/new_logo.svg" alt="Geshan"> <a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-xl text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity w-full md:w-auto text-center md:text-left">Follow on LinkedIn &nbsp;→</a></div></div></div></section></div></div></div></main><footer role="contentinfo"><footer class="bg-avocado sm:px-4"><div class="max-w-6xl mx-auto flex flex-col md:flex-row sm:flex-col justify-between gap-2 items-center sm:items-center md:items-center py-10 font-nav text-lightGray text-base font-regular"><div class="pb-0 sm:pb-2 text-gray"><span class="pr-4">Copyright © 2026 Geshan Manandhar.</span></div><div class="pb-0 sm:pb-2"><ul class="flex"><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> LinkedIn</a></li><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://www.twitter.com/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> Twitter</a></li><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://github.com/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> Github</a></li></ul></div></div></footer></footer><script src="/js/all.min.js" defer="defer"></script></body></html>