<!doctype html><html class="no-js" lang="en"><head><meta charset="utf-8"><meta name="author" content="Geshan Manandhar"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="There are some important pragmatic aspects about Node.js which are ultra helpful for PHP developers. This 3000+ words guide lists 5 dominant ones with code examples."><meta name="keywords" content="node js for php, node js for php developers, nodejs for php, node.js for php, node js vs php, nodejs php, node.js vs php, php vs node js"><meta name="p:domain_verify" content="e654c68562abebfa25c291f59d7d00e8"><meta property="og:type" content="website"><meta property="og:url" content="https://geshan.com.np/blog/2020/11/nodejs-for-php-developers/"><meta property="og:title" content="Node.js for PHP developers: 5 must-know pragmatic aspects with code examples"><meta property="og:description" content="There are some important pragmatic aspects about Node.js which are ultra helpful for PHP developers. This 3000+ words guide lists 5 dominant ones with code examples."><meta property="og:site_name" content="Geshan&#39;s Blog"><meta property="og:image" content="https://geshan.com.np/images/nodejs-for-php-developers/01nodejs-for-php-developers.jpg"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:widgets:new-embed-design" content="on"><meta name="twitter:site" content="@geshan"><meta name="twitter:creator" content="@geshan"><meta name="twitter:title" content="Node.js for PHP developers: 5 must-know pragmatic aspects with code examples"><meta name="twitter:description" content="There are some important pragmatic aspects about Node.js which are ultra helpful for PHP developers. This 3000+ words guide lists 5 dominant ones with code examples."><meta name="twitter:image:src" content="https://geshan.com.np/images/nodejs-for-php-developers/01nodejs-for-php-developers.jpg"><link rel="canonical" href="https://geshan.com.np/blog/2020/11/nodejs-for-php-developers/"><meta property="fb:pages" content="30717799226"><meta property="fb:app_id" content="106030259434380"><meta name="monetization" content="$ilp.uphold.com/aKHWpqhphm9f"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicons/favicon-16x16.png"><link href="/atom.xml" rel="alternate" title="Geshan&#39;s Blog" type="application/atom+xml"><title>Node.js for PHP developers: 5 must-know practical aspects with code examples</title><link rel="preconnect" href="/" crossorigin><link rel="preload" href="/css/fonts.css" as="style"><link rel="preload" href="/fonts/source-sans-4/source-serif-4-latin-400-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/source-sans-4/source-serif-4-latin-500-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/source-sans-pro/source-sans-pro-latin-400-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="/css/fonts.css"><link rel="stylesheet" href="/css/tw-006.css"><link rel="alternate" href="/atom.xml" type="application/atom+xml" title="Geshan&#39;s Blog"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-P3NXCVQEPE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-P3NXCVQEPE');</script><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWT2D9T');</script><script src="https://cdn.jsdelivr.net/npm/@statsig/js-client@3/build/statsig-js-client+session-replay+web-analytics.min.js?apikey=client-rYO7rX8WSUyyLg9pKJwymLxM71tCE0CKgxgtUj4akzK"></script><link rel="manifest" href="/manifest.json"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="application-name" content="Geshan.com.np"><meta name="apple-mobile-web-app-title" content="Geshan.com.np"><meta name="msapplication-starturl" content="/index.html"><meta name="theme-color" content="#6947E7"><script>if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/sw.js").then(function(registration) {
        console.log('ServiceWorker registration successful with scope: ', registration.scope);
    }, function(err) {
        console.log('ServiceWorker registration failed: ', err);
    });
  }</script></head><body class="overflow-x-hidden font-ui flex flex-col min-h-screen"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWT2D9T" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><header role="banner"><div><nav class="bg-white" role="navigation"><div class="w-full md:max-w-6xl mx-auto py-4 px-4"><div class="flex items-center justify-between h-16"><div class="flex-shrink-0"><a href="/" class="flex items-center"><img class="h-12 w-12" src="/images/theme/new_logo.svg" alt="Geshan G"></a></div><div class="flex items-center gap-12"><div class="hidden sm:flex items-center gap-12"><a href="/posts/1/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">Posts </a><a href="/about/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">About Me </a><a href="https://newsletter.geshan.com.np/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">Newsletter</a></div><form class="search flex items-center" action="https://www.google.com/search" method="GET"><input type="hidden" name="sitesearch" value="geshan.com.np"><div class="relative"><input class="bg-gray-100 border border-neutralGray rounded-lg py-2 pl-10 pr-4 font-body text-sm focus:outline-none focus:ring-2 focus:ring-avocado focus:border-transparent w-40" type="text" name="q" placeholder="Search" label="search"> <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-neutralGray" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg></div></form><button type="button" class="sm:hidden inline-flex items-center justify-center p-2 rounded-md text-black focus:outline-none focus:ring-2 focus:ring-inset focus:ring-avocado" onclick="mobileView()" aria-controls="mobile-menu" aria-expanded="false"><span class="sr-only">Open main menu</span> <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg></button></div></div></div><div class="mobile-menu fixed inset-0 z-40 hidden sm:hidden bg-black bg-opacity-40" role="dialog" aria-modal="true"><div class="absolute inset-0" onclick="mobileView()" aria-hidden="true"></div><div class="mobile-menu-panel relative ml-auto flex h-full w-10/12 max-w-sm flex-col justify-start bg-white shadow-xl"><div class="flex items-center justify-between px-4 py-4 border-b border-gray-200"><div class="flex items-center gap-3"><img class="h-8 w-8" src="/images/theme/new_logo.svg" alt="Geshan G"> <span class="text-lg font-semibold text-textColor font-body">Geshan's Blog</span></div><button type="button" class="inline-flex items-center justify-center rounded-full p-2 text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-avocado" onclick="mobileView()" aria-label="Close main menu"><svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg></button></div><nav class="overflow-y-auto px-4 py-6 space-y-2"><a href="/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Home </a><a href="/posts/1/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Posts </a><a href="/about/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">About Me </a><a href="https://newsletter.geshan.com.np/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Newsletter</a></nav><div class="px 4 py-4 border-t border-gray-200"><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="rounded-lg bg-darkAvocado px-4 py-2 text-base font-regular font-body text-white hover:bg-avocado hover:text-black transition-colors w-2/3 mx-auto ml-4">Connect on LinkedIn</a></div></div></div></nav></div></header><main id="wrap" role="main" class="flex-grow md:px-0"><div id="content"><div class="row"><div><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Geshan&#39;s Blog",
    "alternativeHeadline": "Node.js for PHP developers: 5 must-know pragmatic aspects with code examples",
    "image": "https://geshan.com.np/images/nodejs-for-php-developers/01nodejs-for-php-developers.jpg",
    "editor": "Geshan Manandhar",
    "genre": "Web Development",
    "keywords": "node js for php, node js for php developers, nodejs for php, node.js for php, node js vs php, nodejs php, node.js vs php, php vs node js",
    "url": "https://geshan.com.np/blog/2020/11/nodejs-for-php-developers/",
    "datePublished": "2020-11-14",
    "dateCreated": "2020-11-14",
    "dateModified": "2020-11-14",
    "description": "There are some important pragmatic aspects about Node.js which are ultra helpful for PHP developers. This 3000+ words guide lists 5 dominant ones with code examples.",
    "articleBody": "While the popularity of Node.js is increasing, PHP’s traction is going down. With that context, this post is going to elaborate on 5 must-know practical aspects of using Node.js for PHP developers. These will be things no-one talks or writes about, time to get going.Table of contents #Node.js for PHP developers (not Node.js vs PHP)Node.js for PHP developers the practical sideNode.js code execution is async and non-sequentialNode.js promises possibilitiesNode.js process is long-running, unlike PHPMemoization exampleConnection Pool example with MySQLDebugging is easier in Node.js than in PHPMajor version upgrades in Node.js is seamless over PHPDockerizing a Node.js application is a breeze compared to PHPConclusionNode.js for PHP developers (not Node.js vs PHP) #This piece is a list of things you as a PHP developer must know and learn to use Node.js effectively. On the contrary, this post is not a Node.js vs PHP write up where PHP is bashed. I have used both languages. I started to write more Node.js in 2016. When I started I faced some difficulties as I was used to PHP at work for more than 7 years prior to that. There was a book released towards 2012 end covering Node.js for PHP developers.This blog post is not going to talk about what PHP or Node.js is, you can read about it in other posts. I will also not talk much about the Non-Blocking I/O or the event loop. Still, some of it will be brushed through when discussing the practical aspects of writing good Node.js code.Node.js for PHP developers the practical side #PHP has been alive since 1995 and reportedly is still used by 79.% of the websites monitored by W3tech (I can’t really say if it the whole internet). So chances are very high that you have used PHP or deployed something written in PHP. For instance with a growing trend:WordPress is used by 63.7% of all the websites whose content management system we know. This is 39.0% of all websites monitored by W3Tech.On the other hand, Node.js was released in 2009. Major tech companies like Linked In and Paypal started adopting it by 2011 to 2013 for various reasons like microservices. As per Stack Overflow developer survey of 2020:For the second year in a row, Node.js takes the top spot, as it is used by half of the respondents.It is not a secret that Node.js is getting very popular in the past 5 years.So as a PHP developer, these are 5 must-know practical things to be a great Node.js software engineer. Node.js for PHP developers is similar in some sense but also different in some other aspects some are described below:Node.js code execution is async and non-sequential #This is a behavior that tricks lots of PHP developers. In PHP the code runs in sequence, at first line 1 then 2, and so forth. In Javascript and particularly in Node.js that may not be the case. You can potentially put things in the background with good use of promises and callbacks.Below is a modified code example with an explanation taken from my open source currency-api repo:async function getExternal(fromCurrency, toCurrency, onDate) {  const rate = await getRate(fromCurrency, toCurrency, onDate);  db.query(    `INSERT INTO exchange_rates (from_currency, to_currency, rate, on_date) VALUES (?,?,?,?) ON DUPLICATE KEY UPDATE rate = ?`,    [fromCurrency, toCurrency, rate, onDate, rate]  ).then(result =&gt; {      if (result.affectedRows === 0) {        console.error(`Exchange rate of ${rate} for ${fromCurrency} to ${toCurrency} on ${onDate} could not be saved`);      }  }).catch(err =&gt; {      console.log(`Error while writing to db: `, err);  }); //this is done async for the API to respond faster  console.log(`Fetched exchange rate of ${rate} for ${fromCurrency} to ${toCurrency} of ${onDate} from the API`);  return { fromCurrency, toCurrency, onDate, rate };}If you look closer, that innocent looking  some code As Node.js has a built-in web server, the Dockerfile is much cleaner.When you install node, npm is bundled with it. This eliminates the need to install packages at a different stage in the docker build.In the above Dockerfile multi-stage docker build is used to separate production and development docker images. Having the package manager (npm) bundled and having the web-server as part of the language/runtime is something different in Node.js for PHP developers.If you are interested more in Dockering a Node.js applicaiton step-by-step follow this tutorial. Also, nodemon is only installed in the dev stage as it will be used only for development. There are other runtimes for Node.js which are new JavaScript Node.js alternatives. These are Deno and Bun, both claim to be better then Node.js in some way but Node.js is still the de-facto way to run JavaScript on the server.Conclusion #When using Node.js for PHP developers it does need a mild shift in thinking to exploit the powers of Node.js well. Node.js is not a silver bullet. There are drawbacks and it needs adapting to different ways of code execution.Certainly, there are some benefits of using Node.js for PHP developers like async programming and concurrency. Other advantages stem out from the Node.js process being long-running.I hope this post helps you get more out of Node.js as an experienced PHP developer.",
    "author": { "@type": "Person", "name": "Geshan Manandhar" },
    "publisher": {
      "@type": "Organization",
      "name": "Geshan Manandhar",
      "logo": { "@type": "ImageObject", "url": "https://geshan.com.np/images/favicons/favicon-32x32.png" }
    },
    "mainEntityOfPage": { "@type": "WebPage", "@id": "https://geshan.com.np/blog/2020/11/nodejs-for-php-developers/" }
  }</script><div class="progress-bar"></div><div class="max-w-6xl py-3 mx-auto grid-cols-12 grid gap-15 px-4 md:px-0 mb-20"><div class="col-span-12"><article class="md:w-full mx-auto"><header class="page-header text-center"><h1 class="font-semibold font-heading text-gray text-center mb-6 tracking-[-0.01em] leading-[105%] md:leading-[105%]">Node.js for PHP developers: 5 must-know pragmatic aspects with code examples</h1><div class="flex items-center justify-between gap-3 md:gap-4 flex-wrap md:flex-nowrap py-2 border-y border-lightbg mt-4"><div class="flex items-center justify-start md:gap-4 gap-2 flex-wrap w-2/3"><div class="flex justify-start items-center gap-3 md:gap-4"><img src="/images/favicons/favicon-32x32-pp.png" alt="Geshan Manandhar" class="w-10 h-10 rounded-full object-cover flex-shrink-0"> <span class="text-gray font-medium font-ui text-md md:text-xl uppercase tracking-wide text-start">Geshan Manandhar</span></div><time datetime="2020-11-14" data-updated="true"><time class="entry-date" datetime="2020-11-14"><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">14-Nov-2020 </span></time></time><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">16 MIN READ</span></div><button type="button" id="share-button" class="flex items-center justify-center w-8 h-8 md:w-9 md:h-9 rounded text-lightGray hover:border-gray-400 hover:bg-gray-50 transition-colors flex-shrink-0" aria-label="Share this post" onclick="toggleShareIcons(); ga('send', 'event', 'share', 'clickShareOnPost');"><img src="/images/shareIcon.svg" alt="Share this post" class="w-6 h-6"></button></div><div id="share-icons-container" class="share-icons print:hidden hidden" aria-label="Share this post"><div class="flex items-center justify-center gap-3"><span class="share-icons"><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://geshan.com.np/blog/2020/11/nodejs-for-php-developers/" target="_blank" title="Share 'Node.js for PHP developers: 5 must-know pragmatic aspects with code examples' on LinkedIn" onclick="ga('send', 'event', 'share', 'clickShareOnLinkedIn');"><span id="linkedin-share" class="text-[#0077B5]"><img src="/images/social-icons/linkedin.svg" alt="LinkedIn" class="sharing-common"> </span></a><a href="http://twitter.com/share?text=Node.js for PHP developers: 5 must-know pragmatic aspects with code examples - &url=https://geshan.com.np/blog/2020/11/nodejs-for-php-developers/" target="_blank" title="Share 'Node.js for PHP developers: 5 must-know pragmatic aspects with code examples' on Twitter" onclick="ga('send', 'event', 'share', 'clickShareOnTwitter');"><span id="twitter-share" class="text-[#1DA1F2]"><img src="/images/social-icons/twitter.svg" alt="Twitter" class="sharing-common"> </span></a><a href="http://www.facebook.com/sharer.php?u=https://geshan.com.np/blog/2020/11/nodejs-for-php-developers/" target="_blank" title="Share 'Node.js for PHP developers: 5 must-know pragmatic aspects with code examples' on Facebook" onclick="ga('send', 'event', 'share', 'clickShareOnFacebook');"><span id="facebook-share" class="text-[#1877F2]"><img src="/images/social-icons/facebook.svg" alt="Facebook" class="sharing-common"> </span></a><a href="https://t.me/share/url?url=https://geshan.com.np/blog/2020/11/nodejs-for-php-developers/" target="_blank" title="Share 'Node.js for PHP developers: 5 must-know pragmatic aspects with code examples' on Telegram" onclick="ga('send', 'event', 'share', 'clickShareOnTelegram');"><span id="telegram-share" class="text-[#0088cc]"><img src="/images/social-icons/telegram.svg" alt="Telegram" class="sharing-common"> </span></a><a href="https://api.whatsapp.com/send?text=https://geshan.com.np/blog/2020/11/nodejs-for-php-developers/" target="_blank" title="Share 'Node.js for PHP developers: 5 must-know pragmatic aspects with code examples' on Whatsapp" onclick="ga('send', 'event', 'share', 'clickShareOnWhatsapp');"><span id="whatsapp-share" class="text-[#25d366]"><img src="/images/social-icons/whatsapp.svg" alt="WhatsApp" class="sharing-common"></span></a></span></div></div></header><div class="entry-content clearfix font-body text-xl text-gray"><p>While the popularity of Node.js is <a href="https://trends.google.com/trends/explore?date=2019-11-12%202020-11-12&amp;q=%2Fm%2F060kv,%2Fm%2F0bbxf89">increasing</a>, PHP’s traction is going <a href="https://i.ibb.co/0XjJCRC/W3Tech.png">down</a>. With that context, this post is going to elaborate on 5 must-know practical aspects of using Node.js for PHP developers. These will be things no-one talks or writes about, time to get going.</p><img class="center" loading="lazy" src="/images/nodejs-for-php-developers/01nodejs-for-php-developers.jpg" title="Node.js for PHP developers practical aspects" alt="Node.js for PHP developers practical aspects with code examples"><h2 id="table-of-contents" tabindex="-1">Table of contents <a class="direct-link" href="#table-of-contents">#</a></h2><ol><li><a href="#node.js-for-php-developers-(not-node.js-vs-php)">Node.js for PHP developers (not Node.js vs PHP)</a></li><li><a href="#node.js-for-php-developers-the-practical-side">Node.js for PHP developers the practical side</a><ol><li><a href="#node.js-code-execution-is-async-and-non-sequential">Node.js code execution is async and non-sequential</a><ol><li><a href="#node.js-promises-possibilities">Node.js promises possibilities</a></li></ol></li><li><a href="#node.js-process-is-long-running%2C-unlike-php">Node.js process is long-running, unlike PHP</a><ol><li><a href="#memoization-example">Memoization example</a></li><li><a href="#connection-pool-example-with-mysql">Connection Pool example with MySQL</a></li></ol></li><li><a href="#debugging-is-easier-in-node.js-than-in-php">Debugging is easier in Node.js than in PHP</a></li><li><a href="#major-version-upgrades-in-node.js-is-seamless-over-php">Major version upgrades in Node.js is seamless over PHP</a></li><li><a href="#dockerizing-a-node.js-application-is-a-breeze-compared-to-php">Dockerizing a Node.js application is a breeze compared to PHP</a></li></ol></li><li><a href="#conclusion">Conclusion</a></li></ol><h2 id="node.js-for-php-developers-(not-node.js-vs-php)" tabindex="-1">Node.js for PHP developers (not Node.js vs PHP) <a class="direct-link" href="#node.js-for-php-developers-(not-node.js-vs-php)">#</a></h2><p>This piece is a list of things you as a PHP developer must know and learn to use Node.js effectively. On the contrary, this post is not a Node.js vs PHP write up where PHP is bashed. I have used both languages. I started to write more Node.js in 2016. When I started I faced some difficulties as I was used to PHP at work for more than 7 years prior to that. There was a book released towards 2012 end covering <a href="https://www.oreilly.com/library/view/nodejs-for-php/9781449333775/">Node.js for PHP developers</a>.</p><p>This blog post is not going to talk about what PHP or Node.js is, you can read about it in other <a href="https://www.freecodecamp.org/news/what-exactly-is-node-js-ae36e97449f5/">posts</a>. I will also not talk much about the <a href="https://blog.cloudboost.io/why-is-node-called-a-non-blocking-i-o-model-eb639063bc14">Non-Blocking I/O</a> or the <a href="https://blog.logrocket.com/a-complete-guide-to-the-node-js-event-loop/">event loop</a>. Still, some of it will be brushed through when discussing the practical aspects of writing good Node.js code.</p><h2 id="node.js-for-php-developers-the-practical-side" tabindex="-1">Node.js for PHP developers the practical side <a class="direct-link" href="#node.js-for-php-developers-the-practical-side">#</a></h2><p>PHP has been alive since 1995 and reportedly is still used by <a href="https://w3techs.com/technologies/history_overview/programming_language/ms/q">79.%</a> of the websites monitored by W3tech (I can’t really say if it the whole internet). So chances are very high that you have used PHP or deployed something written in PHP. For instance with a growing <a href="https://w3techs.com/technologies/details/cm-wordpress">trend</a>:</p><blockquote><p>WordPress is used by 63.7% of all the websites whose content management system we know. This is 39.0% of all websites monitored by W3Tech.</p></blockquote><p>On the other hand, Node.js was released in 2009. Major tech companies like Linked In and Paypal started adopting it by <a href="https://engineering.linkedin.com/42/and-running-nodejs-tech-talk-tom-hughes-croucher">2011</a> to <a href="https://medium.com/paypal-engineering/node-js-at-paypal-4e2d1d08ce4f">2013</a> for various reasons like <a href="/blog/2020/11/nodejs-microservices/">microservices</a>. As per Stack Overflow developer survey of <a href="https://insights.stackoverflow.com/survey/2020#technology-other-frameworks-libraries-and-tools">2020</a>:</p><blockquote><p>For the second year in a row, Node.js takes the top spot, as it is used by half of the respondents.</p></blockquote><p>It is not a secret that Node.js is getting very popular in the past <a href="https://trends.google.com/trends/explore?date=2015-11-12%202020-11-13&amp;q=%2Fm%2F0bbxf89">5 years</a>.</p><p>So as a PHP developer, these are 5 must-know practical things to be a great Node.js software engineer. Node.js for PHP developers is similar in some sense but also different in some other aspects some are described below:</p><h3 id="node.js-code-execution-is-async-and-non-sequential" tabindex="-1">Node.js code execution is async and non-sequential <a class="direct-link" href="#node.js-code-execution-is-async-and-non-sequential">#</a></h3><p>This is a behavior that tricks lots of PHP developers. In PHP the code runs in sequence, at first line 1 then 2, and so forth. In Javascript and particularly in Node.js that may not be the case. You can potentially put things in the background with good use of promises and callbacks.</p><p>Below is a modified code example with an explanation taken from my open source <a href="https://github.com/geshan/currency-api/blob/master/src/exchangeRates.js#L7-L43">currency-api</a> repo:</p><pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getExternal</span><span class="token punctuation">(</span><span class="token parameter">fromCurrency<span class="token punctuation">,</span> toCurrency<span class="token punctuation">,</span> onDate</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> rate <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getRate</span><span class="token punctuation">(</span>fromCurrency<span class="token punctuation">,</span> toCurrency<span class="token punctuation">,</span> onDate<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><mark class="highlight-line highlight-line-active">  db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span></mark><br><span class="highlight-line">    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">INSERT INTO exchange_rates (from_currency, to_currency, rate, on_date) VALUES (?,?,?,?) ON DUPLICATE KEY UPDATE rate = ?</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">[</span>fromCurrency<span class="token punctuation">,</span> toCurrency<span class="token punctuation">,</span> rate<span class="token punctuation">,</span> onDate<span class="token punctuation">,</span> rate<span class="token punctuation">]</span></span><br><span class="highlight-line">  <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>affectedRows <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Exchange rate of </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>rate<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> for </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fromCurrency<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>toCurrency<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> on </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>onDate<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> could not be saved</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Error while writing to db: </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//this is done async for the API to respond faster</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Fetched exchange rate of </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>rate<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> for </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fromCurrency<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>toCurrency<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> of </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>onDate<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> from the API</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token keyword">return</span> <span class="token punctuation">{</span> fromCurrency<span class="token punctuation">,</span> toCurrency<span class="token punctuation">,</span> onDate<span class="token punctuation">,</span> rate <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span></code></pre><p>If you look closer, that innocent looking <code>db.query</code> at line 3, has been pushed in the background. So it will execute like below:</p><ol><li>Get rate</li><li>Run insert query in the background</li><li>While the insert is running the function are already returned the rate</li><li>If there is an issue in the insert query it is logged in the catch</li></ol><p>There is no out of the box way to do something like this in PHP. This is the first thing that stumps PHP developers. It makes it harder to understand Node.js for PHP developers. This asynchronous code execution behavior also makes finding the right stack trace harder in case of errors in Node.js.</p><p>To be honest, in 2020 you can easily use <a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Async_await">async await</a>. Even though it is syntactic sugar on Promises, it does make asynchronous programming a hell lot easier. When I started in the Node 4/6 era around 2016 with callbacks and <a href="https://blog.greenroots.info/javascript-promises-explain-like-i-am-five">Promises</a> it was a different ball game altogether. Still, beware when to not use async-await (like above) and just go with promises, then and catch. Don’t get tangled in <a href="https://medium.com/@pyrolistical/how-to-get-out-of-promise-hell-8c20e0ab0513">promise hell</a> in the process though. Promise hell is like the next iteration of the <a href="http://callbackhell.com/">callback hell</a>.</p><blockquote><p>Pro tip: To know which ES6 features you can use with what version of Node.js, check it out at <a href="https://node.green/">node.green</a>.</p></blockquote><p>Another Pro Tip:</p><blockquote><p>Even Node.js versions are <a href="https://nodejs.org/en/about/previous-releases">LTS</a>, odd ones are not. So use Node 18 or 20 not 15 or 17 in production.</p></blockquote><p>Going a bit deeper into non-sequential execution, promises and the power it has plays an important role here. The ability to do concurrent things is great in Node.js and javascript in general.</p><h4 id="node.js-promises-possibilities" tabindex="-1">Node.js promises possibilities <a class="direct-link" href="#node.js-promises-possibilities">#</a></h4><p>Promises being <a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Promises">asynchronous</a>, you can run them concurrently. There are ways to do it. You could race 3 promises and get the results from the fastest one. You can even do <a href="/blog/2022/07/javascript-promise-all/">promise.all</a> where if one promise is rejected, it stops the whole operation. Please read more about <code>Promise.race</code>, <code>promise.all</code> and <code>promise.any</code> in this <a href="https://sung.codes/blog/2019/05/18/promise-race-vs-promise-any-and-promise-all-vs-promise-allsettled/">great comparison</a>.</p><p>With that in mind, you can try other NPM libraries to <a href="https://github.com/sindresorhus/p-limit">limit</a> promise concurrency or even <a href="https://github.com/sindresorhus/p-filter">filter</a> through promises concurrently. You can do some of it with <a href="https://reactphp.org/">ReactPHP</a>. But it is not included in the native PHP, not even in <a href="https://stitcher.io/blog/new-in-php-8">PHP 8</a>. This is something new to wrap your head around in Node.js for PHP developers.</p><p>Let’s proceed to the next point, the process does not need to die in Node.js like in PHP.</p><h3 id="node.js-process-is-long-running%2C-unlike-php" tabindex="-1">Node.js process is long-running, unlike PHP <a class="direct-link" href="#node.js-process-is-long-running%2C-unlike-php">#</a></h3><p><a href="https://software-gunslinger.tumblr.com/post/47131406821/php-is-meant-to-die">PHP is meant to die</a> not in the sense that it will not be used. In the sense that all PHP processes must die. PHP is not really designed for long-running tasks/processes. In PHP when a new HTTP request comes in the processing start, after sending the response back the process is killed. That’s how PHP works. That creates the need for <a href="https://www.php.net/manual/en/install.fpm.php">FPM</a> and other servers. You can argue PHP was <a href="https://medium.com/@keithwhor/rise-of-functions-as-a-service-how-php-set-the-serverless-stage-20-years-ago-ccb560c5f422">serverless</a> by design 20+ years ago. I leave that up to you.</p><p>On the other side, Node.js is a long-running process. This enables you to share information between requests as the same server/process is handling multiple requests. With a long-running process, you can easily exploit things like <a href="https://codeburst.io/understanding-memoization-in-3-minutes-2e58daf33a19">memoization on memory</a> and <a href="https://riptutorial.com/node-js/example/4587/using-a-connection-pool">connection pooling</a> for a database. It opens up other possibilities like counting the no. of concurrent requests on that process for instance.</p><h4 id="memoization-example" tabindex="-1">Memoization example <a class="direct-link" href="#memoization-example">#</a></h4><p>If you don’t know <a href="https://lispcast.com/what-is-memoization/">Memoization</a>.</p><blockquote><p>Memoization is a higher-order function that caches another function. It can turn some slow functions into fast ones. It saves the result of a function call after the first time to the cache, so if you call the function again with the same arguments, it will find it in the cache.</p></blockquote><p>It can be used in Node.js but not in PHP natively. Some workaround is possible in PHP like saving the function return value in Redis.</p><p>Below is a code sample of memoization on a express route with <a href="https://github.com/sindresorhus/p-memoize">p-memoize</a>:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token constant">ONE_MINUTE_IN_MS</span> <span class="token operator">=</span> <span class="token number">60000</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><br>  <span class="token literal-property property">maxAge</span><span class="token operator">:</span> <span class="token constant">ONE_MINUTE_IN_MS</span><span class="token punctuation">,</span><br>  <span class="token function-variable function">cacheKey</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">arguments_</span><span class="token punctuation">)</span> <span class="token operator">=></span> arguments_<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/products'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">try</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> memGetProducts <span class="token operator">=</span> <span class="token function">pMemoize</span><span class="token punctuation">(</span>products<span class="token punctuation">.</span>getMultiple<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">memGetProducts</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>page <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>search<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">next</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br></code></pre><p>The clear advantage of this is less load on the datastore. For 1 minute, it will respond back with the same response for the same parameters. The output of the function <code>products.getMultiple</code> is cached in memory for a minute. This makes the responses very fast. It is advisable to read more on <a href="/blog/2021/02/javascript-memoization/">javascript memoization</a>.</p><h4 id="connection-pool-example-with-mysql" tabindex="-1">Connection Pool example with MySQL <a class="direct-link" href="#connection-pool-example-with-mysql">#</a></h4><p>Another thing that is not possible because of a dying process in PHP is connection pooling. As per <a href="https://en.wikipedia.org/wiki/Connection_pool">Wikipedia</a>:</p><blockquote><p>In software engineering, a connection pool is a cache of database connections maintained so that the connections can be reused when future requests to the database are required. Connection pools are used to enhance the performance of executing commands on a database.</p></blockquote><p>So, you will have 5 connections in a pool and if you want to run 5 queries to the database it can be done concurrently. This saves time for both connecting to the database as well as running the query. This is easy to do in Node.js but not easily possible in PHP.</p><blockquote><p>Be mindful of the number of available connections and to keep your connection pool size optimal.</p></blockquote><p>For instance, if you are using Kubernetes and your application has 5 pods with a connection pool size of 2. That means your database will always have 10 open connections even though there are no queries being executed.</p><p>Time for a connection pool example with MySQL database with <a href="https://github.com/mysqljs/mysql#pooling-connections">MySQL</a> npm module:</p><pre class="language-js"><code class="language-js"><span class="token keyword">var</span> pool  <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createPool</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  <span class="token literal-property property">connectionLimit</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span><br>  <span class="token literal-property property">host</span>            <span class="token operator">:</span> <span class="token string">'example.org'</span><span class="token punctuation">,</span><br>  <span class="token literal-property property">user</span>            <span class="token operator">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span><br>  <span class="token literal-property property">password</span>        <span class="token operator">:</span> <span class="token string">'pass'</span><span class="token punctuation">,</span><br>  <span class="token literal-property property">database</span>        <span class="token operator">:</span> <span class="token string">'schema'</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>  pool<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">'SELECT 1 + 1 AS solution'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> rows<span class="token punctuation">,</span> fields</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span> <br>      <span class="token keyword">throw</span> err<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rows<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>solution<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Shows 2</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>The above code will run the same query 5 times in parallel with 5 MySQL connections taken from the connection pool. I wished I could do this in PHP out of the box.</p><p>In my experience, Node.js works very well with Mysql. If you want to try connection pooling with Mongo DB, here is a <a href="https://www.compose.com/articles/connection-pooling-with-mongodb/">Mongo</a> example.</p><blockquote><p>With a long-running process as a developer you need to be more careful about memory leaks and doing the housekeeping stuff well.</p></blockquote><p>This is where Node.js for PHP developers need a fair bit of shift in thinking about how the code is executed. On the other hand, this is a great advantage in Node.js for PHP developers.</p><h3 id="debugging-is-easier-in-node.js-than-in-php" tabindex="-1">Debugging is easier in Node.js than in PHP <a class="direct-link" href="#debugging-is-easier-in-node.js-than-in-php">#</a></h3><p>Line by line code debugging is an important part of developer experience for any programming language. To debug PHP code, you can use add ons like <a href="https://xdebug.org/">X-Debug</a> with some IDE settings. X-Debug is challenging to set up, to say the least. You have to <a href="https://xdebug.org/docs/install">install</a> it, enable the extension. After that configure it properly with an IDE like <a href="https://www.jetbrains.com/help/phpstorm/configuring-xdebug.html">PHPStorm</a>.</p><blockquote><p>Basically, easy is the last thing you will say about making X-debug run. Unless it is all configured well with a docker container and IDE settings are also easy to load.</p></blockquote><p>On the other hand, running node <a href="https://nodejs.org/api/debugger.html">native debugger</a> or even <a href="/blog/2019/01/getting-started-with-debugging-nodejs-applications-with-ndb/">ndb</a> is a lot easier compared to PHP and X-debug. With the use of VS Code, <a href="https://itnext.io/the-absolute-easiest-way-to-debug-node-js-with-vscode-2e02ef5b1bad">debugging Node.js application</a> is so easy that even a caveman can do it.</p><blockquote><p>Open up Preferences &gt; Settings and in the search box type in “node debug”. Under the Extensions tab, there should be one extension titled “Node debug”. From here, click the first box: Debug &gt; Node: Auto Attach and set the drop-down to “on”. You’re almost ready to go now. Yes, it really is that easy.</p></blockquote><p>Then set some breakpoints on VS code with say <code>index.js</code> and in the terminal type <code>node --inspect index.js</code>.</p><p>BOOM! Your step by step Node.js debugger is running well on the VS Code editor without much effort. A good difference from PHP, there is no need to install a different extension, enable it, and configure it to be able to debug a program. No need to install an extra extension is a benefit found in Node.js for PHP developers.</p><p>The next point is also about better developer experience while upgrading even multiple major versions of the language.</p><h3 id="major-version-upgrades-in-node.js-is-seamless-over-php" tabindex="-1">Major version upgrades in Node.js is seamless over PHP <a class="direct-link" href="#major-version-upgrades-in-node.js-is-seamless-over-php">#</a></h3><p>Jumping even multiple major versions in Node.js is a seamless experience. Upgrading from PHP 5.x to PHP 7.x is a week to month-long process depending on the size and complexity of the project.</p><p>In my personal experience, I have upgraded Node.js microservices from versions 0.12 to 4 in the past. Recently I upgraded an application from Node.js 10 to 14. All of my Node.js major version upgrades have been easy.</p><img class="center" loading="lazy" src="/images/nodejs-for-php-developers/02node-10-to-14.jpg" title="Upgrading node 10 to 14 is easy" alt="Node.js for PHP developers, upgrading Node.js from version 10 to 14 is seamless" style="min-height: 100px;"><p>Some minor package.json changes were the only small issues I encountered. After deployment, there were rarely any issues related to code compatibility. As an added bonus, the performance was usually better upgrading the major versions.</p><p>On the other hand, upgrading PHP has not been easy. Minor version upgrade for an application from PHP 5.4 to 5.6 was not much cumbersome. But, going from PHP 5.6 to 7.2 for a relatively big application was a pain. It took a long time, and needed multiple composer.json changes. It was also a difficult task to test it. The good side of a major version upgrade in PHP was surely the performance boost.</p><blockquote><p>Just a note here, the PHP applications I worked with were older than the Node.js applications. Your experience can surely be different than mine.</p></blockquote><h3 id="dockerizing-a-node.js-application-is-a-breeze-compared-to-php" tabindex="-1">Dockerizing a Node.js application is a breeze compared to PHP <a class="direct-link" href="#dockerizing-a-node.js-application-is-a-breeze-compared-to-php">#</a></h3><p>Docker’s popularity has been steadily rising in the past <a href="https://trends.google.com/trends/explore?date=2015-02-11%202020-11-14&amp;q=%2Fm%2F0wkcjgj">5 years</a>. It has changed <a href="/blog/2018/11/4-ways-docker-changed-the-way-software-engineers-work-in-past-half-decade/">how we software engineers work</a> since its release. You should use <a href="/blog/2018/10/why-use-docker-3-reasons-from-a-development-perspective/">Docker for local development</a> too. With that in mind, Dockerizing a PHP application can be a difficult task depending on how components are laid out and the complexity of the application. Conversely, for dockerizing a Node.js application the effort is less and the process is a breeze.</p><p>Below is an example of a <a href="https://github.com/geshan/laravel6-on-google-cloud-run/blob/master/Dockerfile">dockerfile</a> for a PHP Laravel app with Apache.</p><pre class="language-bash"><code class="language-bash">FROM composer:1.9.0 as build<br>WORKDIR /app<br>COPY <span class="token builtin class-name">.</span> /app<br>RUN <span class="token function">composer</span> global require hirak/prestissimo <span class="token operator">&amp;&amp;</span> <span class="token function">composer</span> <span class="token function">install</span><br><br>FROM php:7.3-apache-stretch<br>RUN docker-php-ext-install pdo pdo_mysql<br><br>EXPOSE <span class="token number">8080</span><br>COPY <span class="token parameter variable">--from</span><span class="token operator">=</span>build /app /var/www/<br>COPY docker/000-default.conf /etc/apache2/sites-available/000-default.conf<br>COPY .env.example /var/www/.env<br>RUN <span class="token function">chmod</span> <span class="token number">777</span> <span class="token parameter variable">-R</span> /var/www/storage/ <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\</span><br>    <span class="token builtin class-name">echo</span> <span class="token string">"Listen 8080"</span> <span class="token operator">>></span> /etc/apache2/ports.conf <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\</span><br>    <span class="token function">chown</span> <span class="token parameter variable">-R</span> www-data:www-data /var/www/ <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\</span><br>    a2enmod rewrite</code></pre><p>The good thing with this Docker image for Laravel is PHP is bundled with apache in the same image. It can be argued if this is a better way to do it than splitting PHP and Apache into two docker images.</p><p>Also notice the <a href="/blog/2019/11/how-to-use-docker-multi-stage-build/">multi-stage docker build</a> in the above docker image. Composer install is done in a different image and output is copied to the main one. If we had used PHP-FPM and Nginx in different docker images, it would have been more complex. There would be a need to manage two distinct docker images.</p><p>Now it's time to have a look at a Node.js <a href="https://github.com/geshan/currency-api/blob/master/Dockerfile">Dockerfile</a>.</p><pre class="language-bash"><code class="language-bash">FROM node:18-alpine as base<br><br>WORKDIR /src<br>COPY package.json package-lock.json /src/<br>COPY <span class="token builtin class-name">.</span> /src<br>EXPOSE <span class="token number">8080</span><br><br>FROM base as production<br><br>ENV <span class="token assign-left variable">NODE_ENV</span><span class="token operator">=</span>production<br>RUN <span class="token function">npm</span> <span class="token function">install</span><br><br>CMD <span class="token punctuation">[</span><span class="token string">"node"</span>, <span class="token string">"index.js"</span><span class="token punctuation">]</span><br><br>FROM base as dev<br><br>ENV <span class="token assign-left variable">NODE_ENV</span><span class="token operator">=</span>development<br>RUN <span class="token function">npm</span> config <span class="token builtin class-name">set</span> unsafe-perm <span class="token boolean">true</span> <span class="token operator">&amp;&amp;</span> <span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> nodemon<br>RUN <span class="token function">npm</span> <span class="token function">install</span><br>CMD <span class="token punctuation">[</span><span class="token string">"npm"</span>, <span class="token string">"start"</span><span class="token punctuation">]</span></code></pre><p>As Node.js has a built-in web server, the Dockerfile is much cleaner.</p><blockquote><p>When you install node, npm is bundled with it. This eliminates the need to install packages at a different stage in the docker build.</p></blockquote><p>In the above Dockerfile multi-stage docker build is used to separate production and development docker images. Having the package manager (npm) bundled and having the web-server as part of the language/runtime is something different in Node.js for PHP developers.</p><p>If you are interested more in Dockering a Node.js applicaiton step-by-step follow this <a href="/blog/2020/11/nodejs-with-docker/">tutorial</a>. Also, <a href="/blog/2021/02/nodemon/">nodemon</a> is only installed in the dev stage as it will be used only for development. There are other runtimes for Node.js which are new JavaScript <a href="/blog/2022/08/nodejs-alternatives/">Node.js alternatives</a>. These are Deno and Bun, both claim to be better then Node.js in some way but Node.js is still the de-facto way to run JavaScript on the server.</p><h2 id="conclusion" tabindex="-1">Conclusion <a class="direct-link" href="#conclusion">#</a></h2><p>When using Node.js for PHP developers it does need a mild shift in thinking to exploit the powers of Node.js well. Node.js is not a silver bullet. There are drawbacks and it needs adapting to different ways of code execution.</p><blockquote><p>Certainly, there are some benefits of using Node.js for PHP developers like async programming and concurrency. Other advantages stem out from the Node.js process being long-running.</p></blockquote><p>I hope this post helps you get more out of Node.js as an experienced PHP developer.</p></div><div class="flex items-center justify-between gap-3 md:gap-4 flex-wrap md:flex-nowrap py-2 border-y border-lightbg mt-4"><div class="flex items-center justify-start md:gap-4 gap-2 flex-wrap w-2/3"><div class="flex justify-start items-center gap-3 md:gap-4"><img src="/images/favicons/favicon-32x32-pp.png" alt="Geshan Manandhar" class="w-10 h-10 rounded-full object-cover flex-shrink-0"> <span class="text-gray font-medium font-ui text-md md:text-xl uppercase tracking-wide text-start">Geshan Manandhar</span></div><time datetime="2020-11-14" data-updated="true"><time class="entry-date" datetime="2020-11-14"><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">14-Nov-2020 </span></time></time><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">16 MIN READ</span></div><button type="button" id="share-button-bottom" class="flex items-center justify-center w-8 h-8 md:w-9 md:h-9 rounded text-lightGray hover:border-gray-400 hover:bg-gray-50 transition-colors flex-shrink-0" aria-label="Share this post" onclick="toggleShareIconsBottom(); ga('send', 'event', 'share', 'clickShareOnPost');"><img src="/images/shareIcon.svg" alt="Share this post" class="w-6 h-6"></button></div><div id="share-icons-container-bottom" class="share-icons-bottom print:hidden hidden mx-auto" aria-label="Share this post"><div class="w-full flex items-center justify-center mx-auto gap-3"><span class="share-icons"><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://geshan.com.np/blog/2020/11/nodejs-for-php-developers/" target="_blank" title="Share 'Node.js for PHP developers: 5 must-know pragmatic aspects with code examples' on LinkedIn" onclick="ga('send', 'event', 'share', 'clickShareOnLinkedIn');"><span id="linkedin-share" class="text-[#0077B5]"><img src="/images/social-icons/linkedin.svg" alt="LinkedIn" class="sharing-common"> </span></a><a href="http://twitter.com/share?text=Node.js for PHP developers: 5 must-know pragmatic aspects with code examples - &url=https://geshan.com.np/blog/2020/11/nodejs-for-php-developers/" target="_blank" title="Share 'Node.js for PHP developers: 5 must-know pragmatic aspects with code examples' on Twitter" onclick="ga('send', 'event', 'share', 'clickShareOnTwitter');"><span id="twitter-share" class="text-[#1DA1F2]"><img src="/images/social-icons/twitter.svg" alt="Twitter" class="sharing-common"> </span></a><a href="http://www.facebook.com/sharer.php?u=https://geshan.com.np/blog/2020/11/nodejs-for-php-developers/" target="_blank" title="Share 'Node.js for PHP developers: 5 must-know pragmatic aspects with code examples' on Facebook" onclick="ga('send', 'event', 'share', 'clickShareOnFacebook');"><span id="facebook-share" class="text-[#1877F2]"><img src="/images/social-icons/facebook.svg" alt="Facebook" class="sharing-common"> </span></a><a href="https://t.me/share/url?url=https://geshan.com.np/blog/2020/11/nodejs-for-php-developers/" target="_blank" title="Share 'Node.js for PHP developers: 5 must-know pragmatic aspects with code examples' on Telegram" onclick="ga('send', 'event', 'share', 'clickShareOnTelegram');"><span id="telegram-share" class="text-[#0088cc]"><img src="/images/social-icons/telegram.svg" alt="Telegram" class="sharing-common"> </span></a><a href="https://api.whatsapp.com/send?text=https://geshan.com.np/blog/2020/11/nodejs-for-php-developers/" target="_blank" title="Share 'Node.js for PHP developers: 5 must-know pragmatic aspects with code examples' on Whatsapp" onclick="ga('send', 'event', 'share', 'clickShareOnWhatsapp');"><span id="whatsapp-share" class="text-[#25d366]"><img src="/images/social-icons/whatsapp.svg" alt="WhatsApp" class="sharing-common"></span></a></span></div></div></article><div class="mt-3"><a href="/blog/categories/web-development/" title="Web Development" class="background-lightbg mr-4 mb-2 inline-block mt-2 rounded border-2 bg-gray-100 font-semibold font-ui text-gray hover:text-gray-400 px-3 py-1 text-xl border-gray-300 cursor-pointer hover:border-gray-400">web development </a><a href="/blog/categories/node.js/" title="Node.js" class="background-lightbg mr-4 mb-2 inline-block mt-2 rounded border-2 bg-gray-100 font-semibold font-ui text-gray hover:text-gray-400 px-3 py-1 text-xl border-gray-300 cursor-pointer hover:border-gray-400">node.js </a><a href="/blog/categories/php/" title="PHP" class="background-lightbg mr-4 mb-2 inline-block mt-2 rounded border-2 bg-gray-100 font-semibold font-ui text-gray hover:text-gray-400 px-3 py-1 text-xl border-gray-300 cursor-pointer hover:border-gray-400">php</a></div><section class="md:w-full mx-auto mt-4"><h3 class="comments font-heading">Comments</h3><div id="disqus_thread"></div><button id="disqus_trigger" class="font-ui text-blackText hover:border-darkAvocado border-blacktext hover:shadow-lg border-2 transition ease-in-out delay-100 px-3 py-2 pt-2 mt-2 rounded-md text-center block h-auto text-xl" onclick="load_disqus()">Post a Comment</button><div id="disqus_thread" aria-live="polite"></div></section></div></div><section class="md:w-full mx-auto mt-4 bg-lightAvocado p-4 rounded-lg pb-8"><div class="max-w-6xl mx-auto md:py-12 px-4"><h2 class="text-4xl text-darkAvocado font-heading font-regular flex-shrink-0 py-8 tracking-normal leading-[105%] md:leading-[105%]"><span class="text-lightGray italic">Related</span> <span class="text-blackText">Blogs</span></h2><div class="grid grid-cols-1 md:grid-cols-2 gap-8"><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2024/11/nodejs-dotenv/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to use environment variables from a .env file in Node.js</a> <time class="font-medium text-xl text-textColor uppercase font-ui">24-Nov-2024 &nbsp;&nbsp;&nbsp; 8 min read</time><p class="text-xl text-gray font-ui">Learn how to use environment variables with the dotenv NPM package and natively with Node 20+.</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2024/10/nodejs-read-json-file/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to Read a JSON File Using Node.js</a> <time class="font-medium text-xl text-textColor uppercase font-ui">30-Oct-2024 &nbsp;&nbsp;&nbsp; 10 min read</time><p class="text-xl text-gray font-ui">Learn how to read a JSON file using Node.js. This post covers reading a JSON file synchronously and asynchronously using the fs module and fs-extra NPM package.</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2023/12/nodejs-duet-ai-vs-code/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to write and deploy a basic Node.js API with Duet AI on VS Code a step-by-step guide</a> <time class="font-medium text-xl text-textColor uppercase font-ui">18-Dec-2023 &nbsp;&nbsp;&nbsp; 9 min read</time><p class="text-xl text-gray font-ui">Learn how to write and deploy a basic Node.js API with Duet AI on VS Code, in this step-by-step tutorial with 20+ screenshots!</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2023/03/mongodb-docker-compose/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to run MongoDB with Docker and Docker Compose a Step-by-Step guide</a> <time class="font-medium text-xl text-textColor uppercase font-ui">29-Mar-2023 &nbsp;&nbsp;&nbsp; 9 min read</time><p class="text-xl text-gray font-ui">In this step-by-step tutorial learn how to run MongoDB with Docker and Docker Compose. Also has an example with Node.js + MongoDB with Docker Compose.</p></div></div></div></section><section class="bg-avocado md:py-0 py-12 px-4"><div class="max-w-6xl mx-auto"><div class="md:hidden"><h2 class="mb-4 text-3xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-base text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-base text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity w-full text-center">Follow on LinkedIn &nbsp;→</a></div><div class="hidden md:grid lg:hidden grid-cols-3 gap-8 items-center"><div class="z-10 col-span-2"><h2 class="mb-4 text-2xl md:text-4xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-xl text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-xl text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity">Follow on LinkedIn &nbsp;→</a></div><div class="flex items-center justify-end col-span-1"><img class="w-32 h-auto" src="/images/theme/new_logo.svg" alt="Geshan"></div></div><div class="hidden lg:grid grid-cols-2 gap-8 lg:gap-12 items-center justify-between h-full"><div class="z-10"><h2 class="mb-4 text-2xl md:text-4xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-xl text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><p class="text-xl text-blackText font-body font-regular mb-6">A big thank you for supporting this ad. free, unobstructive (no overlays, no pop-ups) blog.</p></div><div class="flex items-center gap-12 w-full md:w-auto justify-end self-end"><img class="w-16 md:w-32 h-auto" src="/images/theme/new_logo.svg" alt="Geshan"> <a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-xl text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity w-full md:w-auto text-center md:text-left">Follow on LinkedIn &nbsp;→</a></div></div></div></section></div></div></div></main><footer role="contentinfo"><footer class="bg-avocado sm:px-4"><div class="max-w-6xl mx-auto flex flex-col md:flex-row sm:flex-col justify-between gap-2 items-center sm:items-center md:items-center py-10 font-nav text-lightGray text-base font-regular"><div class="pb-0 sm:pb-2 text-gray"><span class="pr-4">Copyright © 2026 Geshan Manandhar.</span></div><div class="pb-0 sm:pb-2"><ul class="flex"><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> LinkedIn</a></li><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://www.twitter.com/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> Twitter</a></li><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://github.com/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> Github</a></li></ul></div></div></footer></footer><script src="/js/all.min.js" defer="defer"></script></body></html>