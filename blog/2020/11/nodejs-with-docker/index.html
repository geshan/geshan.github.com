<!doctype html><html class="no-js" lang="en"><head><meta charset="utf-8"><meta name="author" content="Geshan Manandhar"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Follow this step-by-step tutorial to use Docker with Node.js using best practices like BUILDKIT and caching with docker compose."><meta name="keywords" content="docker with nodejs, nodejs on docker, docker nodejs, node dockerfile, node.js docker, nodejs dockerfile, docker node js development, docker compose, nodejs docker compose"><meta name="p:domain_verify" content="e654c68562abebfa25c291f59d7d00e8"><meta property="og:type" content="website"><meta property="og:url" content="https://geshan.com.np/blog/2020/11/nodejs-with-docker/"><meta property="og:title" content="How to use Docker with Node.js a step-by-step tutorial"><meta property="og:description" content="Follow this step-by-step tutorial to use Docker with Node.js using best practices like BUILDKIT and caching with docker compose."><meta property="og:site_name" content="Geshan&#39;s Blog"><meta property="og:image" content="https://geshan.com.np/images/nodejs-docker-docker-compose/00nodejs-docker-docker-compose.jpg"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:widgets:new-embed-design" content="on"><meta name="twitter:site" content="@geshan"><meta name="twitter:creator" content="@geshan"><meta name="twitter:title" content="How to use Docker with Node.js a step-by-step tutorial"><meta name="twitter:description" content="Follow this step-by-step tutorial to use Docker with Node.js using best practices like BUILDKIT and caching with docker compose."><meta name="twitter:image:src" content="https://geshan.com.np/images/nodejs-docker-docker-compose/00nodejs-docker-docker-compose.jpg"><link rel="canonical" href="https://geshan.com.np/blog/2020/11/nodejs-with-docker/"><meta property="fb:pages" content="30717799226"><meta property="fb:app_id" content="106030259434380"><meta name="monetization" content="$ilp.uphold.com/aKHWpqhphm9f"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicons/favicon-16x16.png"><link href="/atom.xml" rel="alternate" title="Geshan&#39;s Blog" type="application/atom+xml"><title>How to use Docker with Node.js a step-by-step tutorial</title><link rel="preconnect" href="/" crossorigin><link rel="preload" href="/css/fonts.css" as="style"><link rel="preload" href="/fonts/source-sans-4/source-serif-4-latin-400-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/source-sans-4/source-serif-4-latin-500-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/source-sans-pro/source-sans-pro-latin-400-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="/css/fonts.css"><link rel="stylesheet" href="/css/tw-006.css"><link rel="alternate" href="/atom.xml" type="application/atom+xml" title="Geshan&#39;s Blog"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-P3NXCVQEPE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-P3NXCVQEPE');</script><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWT2D9T');</script><script src="https://cdn.jsdelivr.net/npm/@statsig/js-client@3/build/statsig-js-client+session-replay+web-analytics.min.js?apikey=client-rYO7rX8WSUyyLg9pKJwymLxM71tCE0CKgxgtUj4akzK"></script><link rel="manifest" href="/manifest.json"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="application-name" content="Geshan.com.np"><meta name="apple-mobile-web-app-title" content="Geshan.com.np"><meta name="msapplication-starturl" content="/index.html"><meta name="theme-color" content="#6947E7"><script>if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/sw.js").then(function(registration) {
        console.log('ServiceWorker registration successful with scope: ', registration.scope);
    }, function(err) {
        console.log('ServiceWorker registration failed: ', err);
    });
  }</script></head><body class="overflow-x-hidden font-ui flex flex-col min-h-screen"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWT2D9T" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><header role="banner"><div><nav class="bg-white" role="navigation"><div class="w-full md:max-w-6xl mx-auto py-4 px-4"><div class="flex items-center justify-between h-16"><div class="flex-shrink-0"><a href="/" class="flex items-center"><img class="h-12 w-12" src="/images/theme/new_logo.svg" alt="Geshan G"></a></div><div class="flex items-center gap-12"><div class="hidden sm:flex items-center gap-12"><a href="/posts/1/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">Posts </a><a href="/about/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">About Me </a><a href="https://newsletter.geshan.com.np/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">Newsletter</a></div><form class="search flex items-center" action="https://www.google.com/search" method="GET"><input type="hidden" name="sitesearch" value="geshan.com.np"><div class="relative"><input class="bg-gray-100 border border-neutralGray rounded-lg py-2 pl-10 pr-4 font-body text-sm focus:outline-none focus:ring-2 focus:ring-avocado focus:border-transparent w-40" type="text" name="q" placeholder="Search" label="search"> <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-neutralGray" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg></div></form><button type="button" class="sm:hidden inline-flex items-center justify-center p-2 rounded-md text-black focus:outline-none focus:ring-2 focus:ring-inset focus:ring-avocado" onclick="mobileView()" aria-controls="mobile-menu" aria-expanded="false"><span class="sr-only">Open main menu</span> <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg></button></div></div></div><div class="mobile-menu fixed inset-0 z-40 hidden sm:hidden bg-black bg-opacity-40" role="dialog" aria-modal="true"><div class="absolute inset-0" onclick="mobileView()" aria-hidden="true"></div><div class="mobile-menu-panel relative ml-auto flex h-full w-10/12 max-w-sm flex-col justify-start bg-white shadow-xl"><div class="flex items-center justify-between px-4 py-4 border-b border-gray-200"><div class="flex items-center gap-3"><img class="h-8 w-8" src="/images/theme/new_logo.svg" alt="Geshan G"> <span class="text-lg font-semibold text-textColor font-body">Geshan's Blog</span></div><button type="button" class="inline-flex items-center justify-center rounded-full p-2 text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-avocado" onclick="mobileView()" aria-label="Close main menu"><svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg></button></div><nav class="overflow-y-auto px-4 py-6 space-y-2"><a href="/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Home </a><a href="/posts/1/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Posts </a><a href="/about/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">About Me </a><a href="https://newsletter.geshan.com.np/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Newsletter</a></nav><div class="px 4 py-4 border-t border-gray-200"><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="rounded-lg bg-darkAvocado px-4 py-2 text-base font-regular font-body text-white hover:bg-avocado hover:text-black transition-colors w-2/3 mx-auto ml-4">Connect on LinkedIn</a></div></div></div></nav></div></header><main id="wrap" role="main" class="flex-grow md:px-0"><div id="content"><div class="row"><div><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Geshan&#39;s Blog",
    "alternativeHeadline": "How to use Docker with Node.js a step-by-step tutorial",
    "image": "https://geshan.com.np/images/nodejs-docker-docker-compose/00nodejs-docker-docker-compose.jpg",
    "editor": "Geshan Manandhar",
    "genre": "Web Development",
    "keywords": "docker with nodejs, nodejs on docker, docker nodejs, node dockerfile, node.js docker, nodejs dockerfile, docker node js development, docker compose, nodejs docker compose",
    "url": "https://geshan.com.np/blog/2020/11/nodejs-with-docker/",
    "datePublished": "2020-11-20",
    "dateCreated": "2020-11-20",
    "dateModified": "2020-11-20",
    "description": "Follow this step-by-step tutorial to use Docker with Node.js using best practices like BUILDKIT and caching with docker compose.",
    "articleBody": "Both Docker and Node.js have risen in popularity in the past 5 years. Running Node.js on docker containers with docker-compose for local development is a great experience. In this step-by-step tutorial, we will look at how Node.js docker and docker-compose with multi-stage docker build work in sync. Time to get cracking!Table of contents #Docker the new normNode.js on Docker with high scalabilityAssumptions for Docker with Node.jsStepsSetup express with express-generator1.1 Use express-generator to scaffold the app1.2 Edit the index to see the changes1.3 Add nodemon to monitor changes and reloadUse Node.js on Docker2.1 Simple docker file for local Node.js docker development2.2 Multi-stage docker file to support Nodejs docker in productionNode.js Docker made better with docker-compose3.1 Build the Node.js docker-compose with dev target3.2 Run the Docker with Node.js using docker compose upTLDR; Give me a quick run downConsiderationsConclusionDocker the new norm #Docker has changed the way we software engineers work in the past 5-7 years.Containers have made it easier to ship the whole stack including the OS, not just the code.There is more than one reason to use docker everywhere, especially in the development environment. Docker was the second most loved platform in the Stack Overflow Survey 2020 same as 2019. The same survey 2020 edition also quotes“We also see some year over year growth in the popularity of container technologies such as Docker and Kubernetes.”Docker is used by 35% of all respondents and 39.2% of professional developers. It is safe to say 1/3rd or more software engineers are using docker. In 2020 and beyond, if you are not using docker as a developer you are missing out for sure.Node.js on Docker with high scalability #Node.js was initially released in 2009. It has been used for high traffic web applications by big companies like Paypal, Netflix, Ebay, and LinkedIn to name a few. It has surely been battle-tested in the past 10 years and has proven its mettle.It also works well with a big team where Spotify is an example. It was used by 90 teams and 600 developers at Spotify. As per W3tech, 1% of websites use Node.js.1% of the websites tracked by W3tech might seem a small number, but Node.js is popular in websites with high traffic as mentioned above.With high software scalability in the picture, it becomes a lot easier to scale the application horizontally with Docker and Kubernetes. We can say thet, using Docker with Node.js enables high scalability.Assumptions for Docker with Node.js #You have some familiarity with using Node.js (express js or any other framework)You have some experience using Docker (local development, production environments preferred)I am using Docker version 19.03.13 and docker-compose version 1.27.4, I hope you have similar versions.For the first part of this tutorial, we will use Node.js 18 with npm and npx installed.Steps #Let’s dive deeper into step-by-step details of this tutorial on how to run a Node.js express demo application on docker with docker-compose.1. Setup express with express-generator #As the first step, it is time to set up a bare-bones Node.js express application. To generate the express js application we will use the express application generator.1.1 Use express-generator to scaffold the app #To generate your demo Node.js express application for docker with Node.js, execute the following commands:npx express-generator --view=pug express-appNotice that we are generating a web app not an API and using pug as the templating engine for the views. It should give you an output like below:Now, let’s run the app to see how it looks on the browser, no Node.js on docker yet. To start the Node.js express application, please run the following commands:cd express-appnpm installDEBUG=express-app:* npm startAfter that, you should see something like below:Hit  some code  file.Conclusion #Using Node.js on Docker is a rewarding experience. If you want to upgrade Node.js, it is as simple as changing the version on the Docker file, rebuilding it and using it. Node.js is also great for microservices.If you want better developer experience and amazing scalability on production with ease, start using Node.js on docker today.",
    "author": { "@type": "Person", "name": "Geshan Manandhar" },
    "publisher": {
      "@type": "Organization",
      "name": "Geshan Manandhar",
      "logo": { "@type": "ImageObject", "url": "https://geshan.com.np/images/favicons/favicon-32x32.png" }
    },
    "mainEntityOfPage": { "@type": "WebPage", "@id": "https://geshan.com.np/blog/2020/11/nodejs-with-docker/" }
  }</script><div class="progress-bar"></div><div class="max-w-6xl py-3 mx-auto grid-cols-12 grid gap-15 px-4 md:px-0 mb-20"><div class="col-span-12"><article class="md:w-full mx-auto"><header class="page-header text-center"><h1 class="font-semibold font-heading text-gray text-center mb-6 tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to use Docker with Node.js a step-by-step tutorial</h1><div class="flex items-center justify-between gap-3 md:gap-4 flex-wrap md:flex-nowrap py-2 border-y border-lightbg mt-4"><div class="flex items-center justify-start md:gap-4 gap-2 flex-wrap w-2/3"><div class="flex justify-start items-center gap-3 md:gap-4"><img src="/images/favicons/favicon-32x32-pp.png" alt="Geshan Manandhar" class="w-10 h-10 rounded-full object-cover flex-shrink-0"> <span class="text-gray font-medium font-ui text-md md:text-xl uppercase tracking-wide text-start">Geshan Manandhar</span></div><time datetime="2020-11-20" data-updated="true"><time class="entry-date" datetime="2020-11-20"><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">20-Nov-2020 </span></time></time><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">14 MIN READ</span></div><button type="button" id="share-button" class="flex items-center justify-center w-8 h-8 md:w-9 md:h-9 rounded text-lightGray hover:border-gray-400 hover:bg-gray-50 transition-colors flex-shrink-0" aria-label="Share this post" onclick="toggleShareIcons(); ga('send', 'event', 'share', 'clickShareOnPost');"><img src="/images/shareIcon.svg" alt="Share this post" class="w-6 h-6"></button></div><div id="share-icons-container" class="share-icons print:hidden hidden" aria-label="Share this post"><div class="flex items-center justify-center gap-3"><span class="share-icons"><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://geshan.com.np/blog/2020/11/nodejs-with-docker/" target="_blank" title="Share 'How to use Docker with Node.js a step-by-step tutorial' on LinkedIn" onclick="ga('send', 'event', 'share', 'clickShareOnLinkedIn');"><span id="linkedin-share" class="text-[#0077B5]"><img src="/images/social-icons/linkedin.svg" alt="LinkedIn" class="sharing-common"> </span></a><a href="http://twitter.com/share?text=How to use Docker with Node.js a step-by-step tutorial - &url=https://geshan.com.np/blog/2020/11/nodejs-with-docker/" target="_blank" title="Share 'How to use Docker with Node.js a step-by-step tutorial' on Twitter" onclick="ga('send', 'event', 'share', 'clickShareOnTwitter');"><span id="twitter-share" class="text-[#1DA1F2]"><img src="/images/social-icons/twitter.svg" alt="Twitter" class="sharing-common"> </span></a><a href="http://www.facebook.com/sharer.php?u=https://geshan.com.np/blog/2020/11/nodejs-with-docker/" target="_blank" title="Share 'How to use Docker with Node.js a step-by-step tutorial' on Facebook" onclick="ga('send', 'event', 'share', 'clickShareOnFacebook');"><span id="facebook-share" class="text-[#1877F2]"><img src="/images/social-icons/facebook.svg" alt="Facebook" class="sharing-common"> </span></a><a href="https://t.me/share/url?url=https://geshan.com.np/blog/2020/11/nodejs-with-docker/" target="_blank" title="Share 'How to use Docker with Node.js a step-by-step tutorial' on Telegram" onclick="ga('send', 'event', 'share', 'clickShareOnTelegram');"><span id="telegram-share" class="text-[#0088cc]"><img src="/images/social-icons/telegram.svg" alt="Telegram" class="sharing-common"> </span></a><a href="https://api.whatsapp.com/send?text=https://geshan.com.np/blog/2020/11/nodejs-with-docker/" target="_blank" title="Share 'How to use Docker with Node.js a step-by-step tutorial' on Whatsapp" onclick="ga('send', 'event', 'share', 'clickShareOnWhatsapp');"><span id="whatsapp-share" class="text-[#25d366]"><img src="/images/social-icons/whatsapp.svg" alt="WhatsApp" class="sharing-common"></span></a></span></div></div></header><div class="entry-content clearfix font-body text-xl text-gray"><p>Both Docker and Node.js have risen in popularity in the past 5 years. Running Node.js on docker containers with docker-compose for local development is a great experience. In this step-by-step tutorial, we will look at how Node.js docker and docker-compose with multi-stage docker build work in sync. Time to get cracking!</p><img class="center" loading="lazy" src="/images/nodejs-docker-docker-compose/00nodejs-docker-docker-compose.jpg" title="Docker with Node.js and docker compose a step-by-step tutorial" alt="Docker with Node.js and docker compose"><h2 id="table-of-contents" tabindex="-1">Table of contents <a class="direct-link" href="#table-of-contents">#</a></h2><ol><li><a href="#docker-the-new-norm">Docker the new norm</a></li><li><a href="#node.js-on-docker-with-high-scalability">Node.js on Docker with high scalability</a></li><li><a href="#assumptions-for-docker-with-node.js">Assumptions for Docker with Node.js</a></li><li><a href="#steps">Steps</a><ol><li><a href="#1.-setup-express-with-express-generator">Setup express with express-generator</a><ol><li><a href="#1.1-use-express-generator-to-scaffold-the-app">1.1 Use express-generator to scaffold the app</a></li><li><a href="#1.2-edit-the-index-to-see-the-changes">1.2 Edit the index to see the changes</a></li><li><a href="#1.3-add-nodemon-to-monitor-changes-and-reload">1.3 Add nodemon to monitor changes and reload</a></li></ol></li><li><a href="#2.-use-node.js-on-docker">Use Node.js on Docker</a><ol><li><a href="#2.1-simple-docker-file-for-local-node.js-docker-development">2.1 Simple docker file for local Node.js docker development</a></li><li><a href="#2.2-multi-stage-docker-file-to-support-nodejs-docker-in-production">2.2 Multi-stage docker file to support Nodejs docker in production</a></li></ol></li><li><a href="#3.-node.js-docker-made-better-with-docker-compose">Node.js Docker made better with docker-compose</a><ol><li><a href="#3.1-build-the-node.js-docker-compose-with-dev-target">3.1 Build the Node.js docker-compose with dev target</a></li><li><a href="#3.2-run-the-docker-with-node.js-using-docker-compose-up">3.2 Run the Docker with Node.js using docker compose up</a></li></ol></li></ol></li><li><a href="#tldr%3B-give-me-a-quick-run-down">TLDR; Give me a quick run down</a></li><li><a href="#considerations">Considerations</a></li><li><a href="#conclusion">Conclusion</a></li></ol><h2 id="docker-the-new-norm" tabindex="-1">Docker the new norm <a class="direct-link" href="#docker-the-new-norm">#</a></h2><p>Docker has <a href="/blog/2018/11/4-ways-docker-changed-the-way-software-engineers-work-in-past-half-decade/">changed the way</a> we software engineers work in the past 5-7 years.</p><blockquote><p>Containers have made it easier to ship the whole stack including the OS, not just the code.</p></blockquote><p>There is more than one reason to use docker everywhere, especially in the <a href="/blog/2018/10/why-use-docker-3-reasons-from-a-development-perspective/">development environment</a>. Docker was the second most loved platform in the <a href="https://insights.stackoverflow.com/survey/2020#technology-most-loved-dreaded-and-wanted-platforms">Stack Overflow Survey 2020</a> same as <a href="https://insights.stackoverflow.com/survey/2019#technology-_-most-loved-dreaded-and-wanted-platforms">2019</a>. The same survey 2020 edition also quotes</p><blockquote><p>“We also see some year over year growth in the popularity of container technologies such as Docker and Kubernetes.”</p></blockquote><p>Docker is used by 35% of all respondents and 39.2% of professional developers. It is safe to say 1/3rd or more software engineers are using docker. In 2020 and beyond, if you are not using docker as a developer you are missing out for sure.</p><h2 id="node.js-on-docker-with-high-scalability" tabindex="-1">Node.js on Docker with high scalability <a class="direct-link" href="#node.js-on-docker-with-high-scalability">#</a></h2><p>Node.js was initially released in 2009. It has been used for high traffic web applications by big companies like <a href="http://highscalability.com/blog/2013/12/11/using-nodejs-paypal-doubles-rps-lowers-latency-with-fewer-de.html">Paypal</a>, <a href="https://netflixtechblog.com/making-netflix-com-faster-f95d15f2e972">Netflix</a>, <a href="https://tech.ebayinc.com/engineering/how-we-built-ebays-first-node-js-application/">Ebay</a>, and <a href="http://highscalability.com/blog/2012/10/4/linkedin-moved-from-rails-to-node-27-servers-cut-and-up-to-2.html">LinkedIn</a> to name a few. It has surely been battle-tested in the past 10 years and has proven its mettle.<br>It also works well with a big team where <a href="https://blog.risingstack.com/how-enterprises-benefit-from-microservices-architectures/#spotifybuildsflawlessuserexperiencewithmicroservices">Spotify</a> is an example. It was used by 90 teams and 600 developers at Spotify. As per <a href="https://w3techs.com/technologies/details/ws-nodejs">W3tech</a>, 1% of websites use Node.js.</p><blockquote><p>1% of the websites tracked by W3tech might seem a small number, but Node.js is popular in websites with high traffic as mentioned above.</p></blockquote><p>With high <a href="/blog/2020/12/software-scalability/">software scalability</a> in the picture, it becomes a lot easier to scale the application horizontally with Docker and Kubernetes. We can say thet, using Docker with Node.js enables high scalability.</p><h2 id="assumptions-for-docker-with-node.js" tabindex="-1">Assumptions for Docker with Node.js <a class="direct-link" href="#assumptions-for-docker-with-node.js">#</a></h2><ol><li>You have some familiarity with using Node.js (express js or any other framework)</li><li>You have some experience using Docker (local development, production environments preferred)</li><li>I am using Docker version 19.03.13 and docker-compose version 1.27.4, I hope you have similar versions.</li><li>For the first part of this tutorial, we will use Node.js 18 with npm and <a href="https://www.freecodecamp.org/news/npm-vs-npx-whats-the-difference/">npx</a> installed.</li></ol><h2 id="steps" tabindex="-1">Steps <a class="direct-link" href="#steps">#</a></h2><p>Let’s dive deeper into step-by-step details of this tutorial on how to run a Node.js express demo application on docker with docker-compose.</p><h3 id="1.-setup-express-with-express-generator" tabindex="-1">1. Setup express with express-generator <a class="direct-link" href="#1.-setup-express-with-express-generator">#</a></h3><p>As the first step, it is time to set up a bare-bones Node.js express application. To generate the express js application we will use the <a href="https://expressjs.com/en/starter/generator.html">express application generator</a>.</p><h4 id="1.1-use-express-generator-to-scaffold-the-app" tabindex="-1">1.1 Use express-generator to scaffold the app <a class="direct-link" href="#1.1-use-express-generator-to-scaffold-the-app">#</a></h4><p>To generate your demo Node.js express application for docker with Node.js, execute the following commands:</p><pre class="language-bash"><code class="language-bash">npx express-generator <span class="token parameter variable">--view</span><span class="token operator">=</span>pug express-app</code></pre><p>Notice that we are generating a web app not an API and using <a href="https://pugjs.org/api/getting-started.html">pug</a> as the templating engine for the views. It should give you an output like below:</p><img class="center" loading="lazy" src="/images/nodejs-docker-docker-compose/01setup-nodejs-express-with-generator.jpg" title="Generate Express.js with generator" alt="Output of Node.js Express generator"><p>Now, let’s run the app to see how it looks on the browser, no Node.js on docker yet. To start the Node.js express application, please run the following commands:</p><pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">cd</span> express-app<br><span class="token function">npm</span> <span class="token function">install</span><br><span class="token assign-left variable">DEBUG</span><span class="token operator">=</span>express-app:* <span class="token function">npm</span> start</code></pre><p>After that, you should see something like below:</p><img class="center" loading="lazy" src="/images/nodejs-docker-docker-compose/02run-express.jpg" title="Run express with debug enabled" alt="Output of Express run with Debug"><p>Hit <code>http://localhost:3000</code> on a browser like Chrome to check if the app is running correctly. You should see something similar to this:</p><img class="center" loading="lazy" src="/images/nodejs-docker-docker-compose/03express-output.jpg" title="Express output on browser" alt="Express output on the browser"><p>When you hit the homepage on the browser, you will also see some logs on how long the request took to respond on the command line.</p><p>At this point, I have added it to git, if you want to view the code it is in this <a href="https://github.com/geshan/express-app/pull/1/files">pull request</a>.</p><h4 id="1.2-edit-the-index-to-see-the-changes" tabindex="-1">1.2 Edit the index to see the changes <a class="direct-link" href="#1.2-edit-the-index-to-see-the-changes">#</a></h4><p>You can edit the page to say something different like <code>Express on Docker</code> and <code>Let’s get started</code> or something of that sort. To do this we will need to edit 2 files, <code>/routes/index.js</code> and <code>views/index.pug</code>, like below. You can get the file changes in this <a href="https://github.com/geshan/express-app/pull/2/files">pull request</a>:</p><img class="center" loading="lazy" src="/images/nodejs-docker-docker-compose/04nodejs-code-changes.jpg" title="Change some express code" alt="Change on some express node.js code"><p>It shows up on the browser like below:</p><img class="center" loading="lazy" src="/images/nodejs-docker-docker-compose/05express-output-changes.jpg" title="Express code changes on the browser" alt="Code changes of Node.js express refected onn the browser"><h4 id="1.3-add-nodemon-to-monitor-changes-and-reload" tabindex="-1">1.3 Add nodemon to monitor changes and reload <a class="direct-link" href="#1.3-add-nodemon-to-monitor-changes-and-reload">#</a></h4><p>For a better developer experience, it is best to reload the server when a file changes. To achieve this we use <a href="https://nodemon.io/">nodemon</a>. There are 2 ways to use Nodemon. The first way is to install it as a global node module resulting in a global <code>nodemon</code> command. The second one is to have it as a dev dependency local to the project. We will be using the first way with the following command:</p><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> nodemon<span class="token punctuation">;</span> <span class="token comment">#if you don’t have nodemon installed</span><br>nodemon bin/www</code></pre><p>After you run your application index (<code>bin/www</code> in this case) with <a href="/blog/2021/02/nodemon/">nodemon</a> it will restart the server on each file save. Below is an example of how it looks on server restarts on code change:</p><img class="center" loading="lazy" src="/images/nodejs-docker-docker-compose/06run-express-with-nodemon.jpg" title="Run Express with nodemon" alt="Running Node.js express with nodemon"><p>At this stage, you have the generated Node.js express app running. It can also be run with nodemon to restart the Node.js server on every file save. Next stage is to use Node.js on docker.</p><h3 id="2.-use-node.js-on-docker" tabindex="-1">2. Use Node.js on Docker <a class="direct-link" href="#2.-use-node.js-on-docker">#</a></h3><p>To use Node.js on Docker, we will start with a <code>Dockerfile</code>. As per the <a href="https://docs.docker.com/engine/reference/builder/">Docker’s</a> official website:</p><blockquote><p>A Dockerfile is a text document that contains all the commands a user could call on the command line to assemble an image. Using docker build users can create an automated build that executes several command-line instructions in succession.</p></blockquote><p>We will start with a simple dockerfile and move on to a multi-stage one. We will use a multi-stage build dockerfile so that we have one stage for development and another one for production. In the development stage we will have Nodemon. There will be some optimization for the production docker container, one of them being the absence of not needed Nodemon.</p><h4 id="2.1-simple-docker-file-for-local-node.js-docker-development" tabindex="-1">2.1 Simple docker file for local Node.js docker development <a class="direct-link" href="#2.1-simple-docker-file-for-local-node.js-docker-development">#</a></h4><p>Below is the simple Node Dockerfile for the express application:</p><pre class="language-bash"><code class="language-bash">FROM node:18-alpine<br><br>WORKDIR /src<br>COPY package.json package-lock.json /src/<br>RUN <span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--production</span><br><br>COPY <span class="token builtin class-name">.</span> /src<br><br>EXPOSE <span class="token number">3000</span><br><br>CMD <span class="token punctuation">[</span><span class="token string">"node"</span>, <span class="token string">"bin/www"</span><span class="token punctuation">]</span></code></pre><p>The dockerfile is simple. It is:</p><ul><li>using <code>node:18-alpine</code> as the starting point. We are using alpine because it is a small and secure base image for docker containers.</li><li>We first copy package.json and lock file to the WORKDIR <code>/src</code> to exploit docker’s build caching</li><li>Then we run <code>npm install --production</code> to get only the needed application dependencies from npm</li><li>After that our application code is copied to <code>/src</code></li><li>Consequently the port is exposed and command to star the server is executed</li></ul><p>With good use of Docker caching and BUILDKIT you can get <a href="/blog/2020/10/docker-build-example-faster-docker-build/">faster docker builds</a>. To build the above dockerfile to a Node.js docker image execute the following:</p><pre class="language-bash"><code class="language-bash"><span class="token assign-left variable">DOCKER_BUILDKIT</span><span class="token operator">=</span><span class="token number">1</span> <span class="token function">docker</span> build <span class="token parameter variable">-t</span> nodejs-express-docker <span class="token builtin class-name">.</span></code></pre><p>It will take some time. After it is done you should see an output like below:</p><img class="center" loading="lazy" src="/images/nodejs-docker-docker-compose/07docker-build-with-biuildkit.jpg" title="Docker build with Buildkit" alt="Docker build output with buildkit use"><p>Time to run the docker image and see the output for Node.js with Docker on the browser. To do this run the following command:</p><pre class="language-bash"><code class="language-bash"><span class="token function">docker</span> run <span class="token parameter variable">--rm</span> <span class="token parameter variable">--name</span> nodejs_express <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">3000</span>:3000 nodejs-express-docker</code></pre><p>In the above command:</p><ul><li><code>--rm</code> is used to remove the container when it is stopped</li><li><code>--name</code> is used to name the container running Node.js on docker, it will be used later to see logs and stop the container</li><li><code>-d</code> is used to detach the container process sending it in the background</li><li><code>-p 3000:3000</code> means the local post 3000 is mapped to container port 3000</li></ul><p>Now to know the container is running, run the following command:</p><pre class="language-bash"><code class="language-bash"><span class="token function">docker</span> <span class="token function">ps</span></code></pre><p>You should see something like below:</p><pre class="language-bash"><code class="language-bash">CONTAINER ID        IMAGE                   COMMAND                  CREATED             STATUS              PORTS                    NAMES<br>930b3227688b        nodejs-express-docker   <span class="token string">"docker-entrypoint.s…"</span>   <span class="token number">4</span> seconds ago       Up <span class="token number">4</span> seconds        <span class="token number">0.0</span>.0.0:3000-<span class="token operator">></span><span class="token number">3000</span>/tcp   nodejs_express</code></pre><p>You can view the logs from the container with the following command:</p><pre class="language-bash"><code class="language-bash"><span class="token function">docker</span> logs <span class="token parameter variable">-f</span> nodejs_express</code></pre><p>This will attach the command line (bash) to the container logs. Then hit the url <code>http://localhost:3000</code> on a browser. You will see some logs. Hit <code>Ctrl+C</code> to stop viewing logs. Now you can stop the container with the following command:</p><pre class="language-bash"><code class="language-bash"><span class="token function">docker</span> stop nodejs_express</code></pre><p>Below is a recap of running the docker container, viewing logs and stopping it:</p><img class="center" loading="lazy" src="/images/nodejs-docker-docker-compose/08docker-run-simple.jpg" title="Docker run logs and stop" alt="Ouptut of docker run with logs and later stopping it"><p>This above simple dockerfile is also available as a <a href="https://github.com/geshan/express-app/pull/3/files">pull request</a> for your convenience. At this juncture, we can proceed to make the Node.js dockerfile even better with <a href="/blog/2019/11/how-to-use-docker-multi-stage-build/">multi-stage docker build</a>.</p><h4 id="2.2-multi-stage-docker-file-to-support-nodejs-docker-in-production" tabindex="-1">2.2 Multi-stage docker file to support Nodejs docker in production <a class="direct-link" href="#2.2-multi-stage-docker-file-to-support-nodejs-docker-in-production">#</a></h4><p>We will create 3 stages from the above simple dockerfile. The stages will be as follows:</p><ol><li>Base: This stage will have things common for docker with Node.js</li><li>Production: This stage will have components useful for production environment for Node.js on docker. It also uses <code>npm ci</code> in place of npm install.</li><li>Dev: This stage will have nodemon which is only useful for developing Node.js on docker</li></ol><p>Below is the modified dockerfile:</p><pre class="language-bash"><code class="language-bash">FROM node:18-alpine as base<br><br>WORKDIR /src<br>COPY package.json package-lock.json /src/<br>EXPOSE <span class="token number">3000</span><br><br>FROM base as production<br>ENV <span class="token assign-left variable">NODE_ENV</span><span class="token operator">=</span>production<br>RUN <span class="token function">npm</span> ci<br>COPY <span class="token builtin class-name">.</span> /src<br>CMD <span class="token punctuation">[</span><span class="token string">"node"</span>, <span class="token string">"bin/www"</span><span class="token punctuation">]</span><br><br>FROM base as dev<br>ENV <span class="token assign-left variable">NODE_ENV</span><span class="token operator">=</span>development<br>RUN <span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> nodemon <span class="token operator">&amp;&amp;</span> <span class="token function">npm</span> <span class="token function">install</span><br>COPY <span class="token builtin class-name">.</span> /src<br>CMD <span class="token punctuation">[</span><span class="token string">"nodemon"</span>, <span class="token string">"bin/www"</span><span class="token punctuation">]</span></code></pre><p>You can build the above Node.js dockerfile to run Node.js on docker with the following command:</p><pre class="language-bash"><code class="language-bash"><span class="token assign-left variable">DOCKER_BUILDKIT</span><span class="token operator">=</span><span class="token number">1</span> <span class="token function">docker</span> build <span class="token parameter variable">--target</span><span class="token operator">=</span>dev <span class="token parameter variable">-t</span> nodejs-express-docker-multi-stage <span class="token builtin class-name">.</span></code></pre><p>The addition here in this <code>docker build</code> command compared to the above one is the inclusion of <code>--target=dev</code>. It tells docker to build the <code>dev</code> stage not <code>production</code>. If you want to build this multi-stage docker file for Node.js on docker use <code>--target=production</code> and it will create a docker image optimized for production.</p><p>To run the Node.js docker image and attach to its logs, you can run the following comamnd:</p><pre class="language-bash"><code class="language-bash"><span class="token function">docker</span> run <span class="token parameter variable">--rm</span> <span class="token parameter variable">--name</span> nodejs_express_ms <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">3000</span>:3000 <span class="token parameter variable">-v</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>"</span>:/src nodejs-express-docker-multi-stage <span class="token operator">&amp;&amp;</span> <span class="token function">docker</span> logs <span class="token parameter variable">-f</span> nodejs_express_ms</code></pre><p>The main difference here from the above <a href="/blog/2022/05/docker-commands/#docker-run">docker run command</a> for Node.js with Docker is <code>-v &quot;$(pwd)&quot;:/src</code>. As we want the server to restart on every file change the current directory is mounted on the docker container’s work dir. With this on each change the sever will restart for Node.js on docker.</p><p>The mulit-stage dockerfile for docker with Node.js can be found in this <a href="https://github.com/geshan/express-app/pull/4/files">pull request</a>. Below is a quick recap of the commands for Node.js docker multi-stage build:</p><img class="center" loading="lazy" src="/images/nodejs-docker-docker-compose/09docker-run-multi-stage.jpg" title="Docker run logs and stop with multi-stage" alt="Ouptut of docker run with logs and later stopping it for multi-stage Docker with Node.js"><h3 id="3.-node.js-docker-made-better-with-docker-compose" tabindex="-1">3. Node.js Docker made better with docker-compose <a class="direct-link" href="#3.-node.js-docker-made-better-with-docker-compose">#</a></h3><p>As seen, we had to run long commands like below:</p><pre class="language-bash"><code class="language-bash"><span class="token function">docker</span> run <span class="token parameter variable">--rm</span> <span class="token parameter variable">--name</span> nodejs_express_ms <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">3000</span>:3000 <span class="token parameter variable">-v</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>"</span>:/src nodejs-express-docker-multi-stage </code></pre><p>It was not easy, to say the least. Stopping the running contianer also needed another <code>docker stop</code> command. The solution to these issue is using docker-compose with Node.js on docker. Docker compose can be used effectively to sew up multiple services like a database with the applicaiton Node.js docker container.</p><p>With docker-compose you can get the application running with just as single commands, <code>docker compose up</code>. It will build the containers if they are not built and run them for you. Next, we will see how to do it.</p><h4 id="3.1-build-the-node.js-docker-compose-with-dev-target" tabindex="-1">3.1 Build the Node.js docker-compose with dev target <a class="direct-link" href="#3.1-build-the-node.js-docker-compose-with-dev-target">#</a></h4><p>To being with, below is the docker-compose.yml file that can run the applicaiton on docker with Node.js using docker-compose:</p><pre class="language-bash"><code class="language-bash">version: <span class="token string">'3.8'</span><br>services:<br>  web:<br>    build:<br>      context: ./<br>      target: dev<br>    volumes:<br>      - .:/src<br>    command: <span class="token function">npm</span> start<br>    ports:<br>      - <span class="token string">"3000:3000"</span><br>    environment:<br>      NODE_ENV: dev</code></pre><p>The docker compose file has some parts to understand:</p><ul><li>The version is latest at <code>3.8</code></li><li>In services, the web service has <code>target:dev</code> being sent so that we build only for the dev stage not production</li><li>The current directory <code>.</code> is mounted to the docker container at <code>/src</code> so the changes will be reflected in the container too.</li><li>We changed the <code>npm start</code> command in the Docker with Node.js to use <code>nodemon</code> as we wil use docker compose only for development.</li><li>We pass in only one environment variable <code>NODE_ENV</code> as <code>dev</code> other environment variables for instance database credentials can also be passed in as environment variables. In this tutorial, you can learn more about <a href="/blog/2023/08/docker-compose-environment-variables/">docker compose environment varaibles</a> and ways to pass it.</li></ul><p>We will be using <code>BUILDKIT</code> to build docker containers with docker-compose too. To use BUILKIT with docker-compose while building the docker container we can execute the command below:</p><pre class="language-bash"><code class="language-bash"><span class="token assign-left variable">COMPOSE_DOCKER_CLI_BUILD</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">DOCKER_BUILDKIT</span><span class="token operator">=</span><span class="token number">1</span> <span class="token function">docker-compose</span> build</code></pre><p>Here you see the output of the docker-compose build for docker with Node.js with BUILKIT in action:</p><img class="center" loading="lazy" src="/images/nodejs-docker-docker-compose/10nodejs-docker-compose-build.jpg" title="Node.js Docker compose build with build kit" alt="Ouptut of docker bulid with multi-stage docker file using buildkit"><h4 id="3.2-run-the-docker-with-node.js-using-docker-compose-up" tabindex="-1">3.2 Run the Docker with Node.js using docker compose up <a class="direct-link" href="#3.2-run-the-docker-with-node.js-using-docker-compose-up">#</a></h4><p>After the containers are built it can be easily run with <code>docker-compose up</code>.<br>After the Node.js docker containers are built, it can be run with <code>docker-compose up</code> like below:</p><img class="center" loading="lazy" src="/images/nodejs-docker-docker-compose/11nodejs-docker-compose-up.jpg" title="Node.js Docker compose up" alt="Ouptut of Node.js docker compoase up and logs"><p>The changes for docker-compose addition is in this <a href="https://github.com/geshan/express-app/pull/5/files">pull request</a>. This is how you can run Node.js on Docker which works very well for Developing as well as putting the containers in production environment.</p><h2 id="tldr%3B-give-me-a-quick-run-down" tabindex="-1">TLDR; Give me a quick run down <a class="direct-link" href="#tldr%3B-give-me-a-quick-run-down">#</a></h2><p>All the code is in a public <a href="https://github.com/geshan/express-app">github repository</a>. You can run the following commands to get started quickly:</p><ol><li>Given you have git setup correctly, clone the repo with: <code>git clone git@github.com:geshan/express-app.git</code></li><li>Then execute <code>cd express-app</code></li><li>After that run <code>COMPOSE_DOCKER_CLI_BUILD=1 DOCKER_BUILDKIT=1 docker-compose build</code>, wait for build to finish.</li><li>Consequently execute: <code>docker-compose up</code>, wait for some time to see <code>nodemon starting...</code> on your console.</li><li>Following that, hit <code>http://localhost:3000</code> on a browser</li><li>You should see the following output on your browser:</li></ol><img class="center" loading="lazy" src="/images/nodejs-docker-docker-compose/05express-output-changes.jpg" title="Node.js Express code on the browser with docker and docker compose" alt="Node.js Express code on the browser with docker and docker compose"><p>Enjoy! Now you can reverse engineer the <code>Dockerfile</code> and <code>docker-compose.yml</code> file. If you have any questions, search for specific thing like say <code>target</code> in this post.</p><h2 id="considerations" tabindex="-1">Considerations <a class="direct-link" href="#considerations">#</a></h2><p>There are some considerations you should be aware of:</p><ol><li>In my expreience, containers on production is run with an orcherstrator like Kubernetes. I believe Docker Swarm (and docker compose) in produciton have lost the race by now.</li><li>It is best to use Docker build caching and BUILDKIT for faster builds.</li><li>Docker compose makes it easier to use multiple dependency on development environment. For exmaple if you application depends on MySQL and Redis it can be easily put together in the <code>docker-compose,yml</code> file.</li></ol><h2 id="conclusion" tabindex="-1">Conclusion <a class="direct-link" href="#conclusion">#</a></h2><p>Using Node.js on Docker is a rewarding experience. If you want to upgrade Node.js, it is as simple as changing the version on the Docker file, rebuilding it and using it. Node.js is also great for <a href="/blog/2020/11/nodejs-microservices/">microservices</a>.</p><blockquote><p>If you want better developer experience and amazing scalability on production with ease, start using Node.js on docker today.</p></blockquote></div><div class="flex items-center justify-between gap-3 md:gap-4 flex-wrap md:flex-nowrap py-2 border-y border-lightbg mt-4"><div class="flex items-center justify-start md:gap-4 gap-2 flex-wrap w-2/3"><div class="flex justify-start items-center gap-3 md:gap-4"><img src="/images/favicons/favicon-32x32-pp.png" alt="Geshan Manandhar" class="w-10 h-10 rounded-full object-cover flex-shrink-0"> <span class="text-gray font-medium font-ui text-md md:text-xl uppercase tracking-wide text-start">Geshan Manandhar</span></div><time datetime="2020-11-20" data-updated="true"><time class="entry-date" datetime="2020-11-20"><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">20-Nov-2020 </span></time></time><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">14 MIN READ</span></div><button type="button" id="share-button-bottom" class="flex items-center justify-center w-8 h-8 md:w-9 md:h-9 rounded text-lightGray hover:border-gray-400 hover:bg-gray-50 transition-colors flex-shrink-0" aria-label="Share this post" onclick="toggleShareIconsBottom(); ga('send', 'event', 'share', 'clickShareOnPost');"><img src="/images/shareIcon.svg" alt="Share this post" class="w-6 h-6"></button></div><div id="share-icons-container-bottom" class="share-icons-bottom print:hidden hidden mx-auto" aria-label="Share this post"><div class="w-full flex items-center justify-center mx-auto gap-3"><span class="share-icons"><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://geshan.com.np/blog/2020/11/nodejs-with-docker/" target="_blank" title="Share 'How to use Docker with Node.js a step-by-step tutorial' on LinkedIn" onclick="ga('send', 'event', 'share', 'clickShareOnLinkedIn');"><span id="linkedin-share" class="text-[#0077B5]"><img src="/images/social-icons/linkedin.svg" alt="LinkedIn" class="sharing-common"> </span></a><a href="http://twitter.com/share?text=How to use Docker with Node.js a step-by-step tutorial - &url=https://geshan.com.np/blog/2020/11/nodejs-with-docker/" target="_blank" title="Share 'How to use Docker with Node.js a step-by-step tutorial' on Twitter" onclick="ga('send', 'event', 'share', 'clickShareOnTwitter');"><span id="twitter-share" class="text-[#1DA1F2]"><img src="/images/social-icons/twitter.svg" alt="Twitter" class="sharing-common"> </span></a><a href="http://www.facebook.com/sharer.php?u=https://geshan.com.np/blog/2020/11/nodejs-with-docker/" target="_blank" title="Share 'How to use Docker with Node.js a step-by-step tutorial' on Facebook" onclick="ga('send', 'event', 'share', 'clickShareOnFacebook');"><span id="facebook-share" class="text-[#1877F2]"><img src="/images/social-icons/facebook.svg" alt="Facebook" class="sharing-common"> </span></a><a href="https://t.me/share/url?url=https://geshan.com.np/blog/2020/11/nodejs-with-docker/" target="_blank" title="Share 'How to use Docker with Node.js a step-by-step tutorial' on Telegram" onclick="ga('send', 'event', 'share', 'clickShareOnTelegram');"><span id="telegram-share" class="text-[#0088cc]"><img src="/images/social-icons/telegram.svg" alt="Telegram" class="sharing-common"> </span></a><a href="https://api.whatsapp.com/send?text=https://geshan.com.np/blog/2020/11/nodejs-with-docker/" target="_blank" title="Share 'How to use Docker with Node.js a step-by-step tutorial' on Whatsapp" onclick="ga('send', 'event', 'share', 'clickShareOnWhatsapp');"><span id="whatsapp-share" class="text-[#25d366]"><img src="/images/social-icons/whatsapp.svg" alt="WhatsApp" class="sharing-common"></span></a></span></div></div></article><div class="mt-3"><a href="/blog/categories/web-development/" title="Web Development" class="background-lightbg mr-4 mb-2 inline-block mt-2 rounded border-2 bg-gray-100 font-semibold font-ui text-gray hover:text-gray-400 px-3 py-1 text-xl border-gray-300 cursor-pointer hover:border-gray-400">web development </a><a href="/blog/categories/node.js/" title="Node.js" class="background-lightbg mr-4 mb-2 inline-block mt-2 rounded border-2 bg-gray-100 font-semibold font-ui text-gray hover:text-gray-400 px-3 py-1 text-xl border-gray-300 cursor-pointer hover:border-gray-400">node.js </a><a href="/blog/categories/docker/" title="Docker" class="background-lightbg mr-4 mb-2 inline-block mt-2 rounded border-2 bg-gray-100 font-semibold font-ui text-gray hover:text-gray-400 px-3 py-1 text-xl border-gray-300 cursor-pointer hover:border-gray-400">docker</a></div><section class="md:w-full mx-auto mt-4"><h3 class="comments font-heading">Comments</h3><div id="disqus_thread"></div><button id="disqus_trigger" class="font-ui text-blackText hover:border-darkAvocado border-blacktext hover:shadow-lg border-2 transition ease-in-out delay-100 px-3 py-2 pt-2 mt-2 rounded-md text-center block h-auto text-xl" onclick="load_disqus()">Post a Comment</button><div id="disqus_thread" aria-live="polite"></div></section></div></div><section class="md:w-full mx-auto mt-4 bg-lightAvocado p-4 rounded-lg pb-8"><div class="max-w-6xl mx-auto md:py-12 px-4"><h2 class="text-4xl text-darkAvocado font-heading font-regular flex-shrink-0 py-8 tracking-normal leading-[105%] md:leading-[105%]"><span class="text-lightGray italic">Related</span> <span class="text-blackText">Blogs</span></h2><div class="grid grid-cols-1 md:grid-cols-2 gap-8"><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2023/03/mongodb-docker-compose/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to run MongoDB with Docker and Docker Compose a Step-by-Step guide</a> <time class="font-medium text-xl text-textColor uppercase font-ui">29-Mar-2023 &nbsp;&nbsp;&nbsp; 9 min read</time><p class="text-xl text-gray font-ui">In this step-by-step tutorial learn how to run MongoDB with Docker and Docker Compose. Also has an example with Node.js + MongoDB with Docker Compose.</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2023/01/nextjs-docker/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to use Next.js with Docker and Docker compose a beginner&#39;s guide</a> <time class="font-medium text-xl text-textColor uppercase font-ui">08-Jan-2023 &nbsp;&nbsp;&nbsp; 8 min read</time><p class="text-xl text-gray font-ui">In this tutorial, learn how to use Next.js with docker with a step-by-step example.</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2024/11/nodejs-dotenv/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to use environment variables from a .env file in Node.js</a> <time class="font-medium text-xl text-textColor uppercase font-ui">24-Nov-2024 &nbsp;&nbsp;&nbsp; 8 min read</time><p class="text-xl text-gray font-ui">Learn how to use environment variables with the dotenv NPM package and natively with Node 20+.</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2024/10/nodejs-read-json-file/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to Read a JSON File Using Node.js</a> <time class="font-medium text-xl text-textColor uppercase font-ui">30-Oct-2024 &nbsp;&nbsp;&nbsp; 10 min read</time><p class="text-xl text-gray font-ui">Learn how to read a JSON file using Node.js. This post covers reading a JSON file synchronously and asynchronously using the fs module and fs-extra NPM package.</p></div></div></div></section><section class="bg-avocado md:py-0 py-12 px-4"><div class="max-w-6xl mx-auto"><div class="md:hidden"><h2 class="mb-4 text-3xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-base text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-base text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity w-full text-center">Follow on LinkedIn &nbsp;→</a></div><div class="hidden md:grid lg:hidden grid-cols-3 gap-8 items-center"><div class="z-10 col-span-2"><h2 class="mb-4 text-2xl md:text-4xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-xl text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-xl text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity">Follow on LinkedIn &nbsp;→</a></div><div class="flex items-center justify-end col-span-1"><img class="w-32 h-auto" src="/images/theme/new_logo.svg" alt="Geshan"></div></div><div class="hidden lg:grid grid-cols-2 gap-8 lg:gap-12 items-center justify-between h-full"><div class="z-10"><h2 class="mb-4 text-2xl md:text-4xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-xl text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><p class="text-xl text-blackText font-body font-regular mb-6">A big thank you for supporting this ad. free, unobstructive (no overlays, no pop-ups) blog.</p></div><div class="flex items-center gap-12 w-full md:w-auto justify-end self-end"><img class="w-16 md:w-32 h-auto" src="/images/theme/new_logo.svg" alt="Geshan"> <a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-xl text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity w-full md:w-auto text-center md:text-left">Follow on LinkedIn &nbsp;→</a></div></div></div></section></div></div></div></main><footer role="contentinfo"><footer class="bg-avocado sm:px-4"><div class="max-w-6xl mx-auto flex flex-col md:flex-row sm:flex-col justify-between gap-2 items-center sm:items-center md:items-center py-10 font-nav text-lightGray text-base font-regular"><div class="pb-0 sm:pb-2 text-gray"><span class="pr-4">Copyright © 2026 Geshan Manandhar.</span></div><div class="pb-0 sm:pb-2"><ul class="flex"><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> LinkedIn</a></li><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://www.twitter.com/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> Twitter</a></li><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://github.com/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> Github</a></li></ul></div></div></footer></footer><script src="/js/all.min.js" defer="defer"></script></body></html>