<!doctype html><html class="no-js" lang="en"><head><meta charset="utf-8"><meta name="author" content="Geshan Manandhar"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Software resilience is a must-have quality for fault-tolerant software. Read this 2000+ word post to know more about the major factors to build resilient software systems."><meta name="keywords" content="sofware resilience, resilient software, sofware resilience, highly resilient software"><meta name="p:domain_verify" content="e654c68562abebfa25c291f59d7d00e8"><meta property="og:type" content="website"><meta property="og:url" content="https://geshan.com.np/blog/2020/12/software-resilience/"><meta property="og:title" content="Software Resilience: 7 must-have factors for healing from the unexpected"><meta property="og:description" content="Software resilience is a must-have quality for fault-tolerant software. Read this 2000+ word post to know more about the major factors to build resilient software systems."><meta property="og:site_name" content="Geshan&#39;s Blog"><meta property="og:image" content="https://geshan.com.np/images/software-resilience/01software-resilience.jpg"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:widgets:new-embed-design" content="on"><meta name="twitter:site" content="@geshan"><meta name="twitter:creator" content="@geshan"><meta name="twitter:title" content="Software Resilience: 7 must-have factors for healing from the unexpected"><meta name="twitter:description" content="Software resilience is a must-have quality for fault-tolerant software. Read this 2000+ word post to know more about the major factors to build resilient software systems."><meta name="twitter:image:src" content="https://geshan.com.np/images/software-resilience/01software-resilience.jpg"><link rel="canonical" href="https://geshan.com.np/blog/2020/12/software-resilience/"><meta property="fb:pages" content="30717799226"><meta property="fb:app_id" content="106030259434380"><meta name="monetization" content="$ilp.uphold.com/aKHWpqhphm9f"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicons/favicon-16x16.png"><link href="/atom.xml" rel="alternate" title="Geshan&#39;s Blog" type="application/atom+xml"><title>Software Resilience: 7 must-have factors for healing from the unexpected</title><link rel="preconnect" href="/" crossorigin><link rel="preload" href="/css/fonts.css" as="style"><link rel="preload" href="/fonts/source-sans-4/source-serif-4-latin-400-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/source-sans-4/source-serif-4-latin-500-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/source-sans-pro/source-sans-pro-latin-400-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="/css/fonts.css"><link rel="stylesheet" href="/css/tw-006.css"><link rel="alternate" href="/atom.xml" type="application/atom+xml" title="Geshan&#39;s Blog"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-P3NXCVQEPE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-P3NXCVQEPE');</script><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWT2D9T');</script><script src="https://cdn.jsdelivr.net/npm/@statsig/js-client@3/build/statsig-js-client+session-replay+web-analytics.min.js?apikey=client-rYO7rX8WSUyyLg9pKJwymLxM71tCE0CKgxgtUj4akzK"></script><link rel="manifest" href="/manifest.json"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="application-name" content="Geshan.com.np"><meta name="apple-mobile-web-app-title" content="Geshan.com.np"><meta name="msapplication-starturl" content="/index.html"><meta name="theme-color" content="#6947E7"><script>if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/sw.js").then(function(registration) {
        console.log('ServiceWorker registration successful with scope: ', registration.scope);
    }, function(err) {
        console.log('ServiceWorker registration failed: ', err);
    });
  }</script></head><body class="overflow-x-hidden font-ui flex flex-col min-h-screen"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWT2D9T" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><header role="banner"><div><nav class="bg-white" role="navigation"><div class="w-full md:max-w-6xl mx-auto py-4 px-4"><div class="flex items-center justify-between h-16"><div class="flex-shrink-0"><a href="/" class="flex items-center"><img class="h-12 w-12" src="/images/theme/new_logo.svg" alt="Geshan G"></a></div><div class="flex items-center gap-12"><div class="hidden sm:flex items-center gap-12"><a href="/posts/1/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">Posts </a><a href="/about/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">About Me </a><a href="https://newsletter.geshan.com.np/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">Newsletter</a></div><form class="search flex items-center" action="https://www.google.com/search" method="GET"><input type="hidden" name="sitesearch" value="geshan.com.np"><div class="relative"><input class="bg-gray-100 border border-neutralGray rounded-lg py-2 pl-10 pr-4 font-body text-sm focus:outline-none focus:ring-2 focus:ring-avocado focus:border-transparent w-40" type="text" name="q" placeholder="Search" label="search"> <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-neutralGray" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg></div></form><button type="button" class="sm:hidden inline-flex items-center justify-center p-2 rounded-md text-black focus:outline-none focus:ring-2 focus:ring-inset focus:ring-avocado" onclick="mobileView()" aria-controls="mobile-menu" aria-expanded="false"><span class="sr-only">Open main menu</span> <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg></button></div></div></div><div class="mobile-menu fixed inset-0 z-40 hidden sm:hidden bg-black bg-opacity-40" role="dialog" aria-modal="true"><div class="absolute inset-0" onclick="mobileView()" aria-hidden="true"></div><div class="mobile-menu-panel relative ml-auto flex h-full w-10/12 max-w-sm flex-col justify-start bg-white shadow-xl"><div class="flex items-center justify-between px-4 py-4 border-b border-gray-200"><div class="flex items-center gap-3"><img class="h-8 w-8" src="/images/theme/new_logo.svg" alt="Geshan G"> <span class="text-lg font-semibold text-textColor font-body">Geshan's Blog</span></div><button type="button" class="inline-flex items-center justify-center rounded-full p-2 text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-avocado" onclick="mobileView()" aria-label="Close main menu"><svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg></button></div><nav class="overflow-y-auto px-4 py-6 space-y-2"><a href="/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Home </a><a href="/posts/1/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Posts </a><a href="/about/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">About Me </a><a href="https://newsletter.geshan.com.np/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Newsletter</a></nav><div class="px 4 py-4 border-t border-gray-200"><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="rounded-lg bg-darkAvocado px-4 py-2 text-base font-regular font-body text-white hover:bg-avocado hover:text-black transition-colors w-2/3 mx-auto ml-4">Connect on LinkedIn</a></div></div></div></nav></div></header><main id="wrap" role="main" class="flex-grow md:px-0"><div id="content"><div class="row"><div><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Geshan&#39;s Blog",
    "alternativeHeadline": "Software Resilience: 7 must-have factors for healing from the unexpected",
    "image": "https://geshan.com.np/images/software-resilience/01software-resilience.jpg",
    "editor": "Geshan Manandhar",
    "genre": "Software Engineering",
    "keywords": "sofware resilience, resilient software, sofware resilience, highly resilient software",
    "url": "https://geshan.com.np/blog/2020/12/software-resilience/",
    "datePublished": "2020-12-17",
    "dateCreated": "2020-12-17",
    "dateModified": "2020-12-17",
    "description": "Software resilience is a must-have quality for fault-tolerant software. Read this 2000+ word post to know more about the major factors to build resilient software systems.",
    "articleBody": "Software resilience is a must-have quality for any software that is scalable, performant, and fault-tolerant.The ability of software to heal from unexpected events is software resilience. This means a software engineer has to anticipate unexpected events and account for them. The solution for creating this fault tolerance can be in code or on the infrastructure layer.Distributed systems will fail, a resilient software system will not try to avoid failure but expect it and respond gracefully.In this post, we will look into some aspects that you need to be careful to have software resilience.Table of Contents #What is software resilienceResilient software factorsGradual rollout/deployRetry for software resilienceTimeouts for resilient softwareFallbackIdempotent operations enable software resilienceDatabase transactionRate limitingOther things to considerConclusionWhat is software resilience #Software Engineering Institute blog of Carnegie Mellon University indicates:Basically, a system is resilient if it continues to carry out its mission in the face of adversity (i.e., if it provides required capabilities despite excessive stresses that can cause disruptions). Being resilient is important because no matter how well a system is engineered, reality will sooner or later conspire to disrupt the system.If a software system is able to function even partially well when unexpected events occur that is software resilience. On an infrastructure level, there is the infamous Chaos Monkey by NetFlix. Chaos Monkey goes into your production environment and randomly starts killing instances. This acts as a stress test for your software resilience.Software resilience is also affected by the blast radius. If the change is low risk in terms of the radius it can cover it is easier to go on with the change. If the blast radius is very big you might need to think of other things too.Resilient software factors #There are multiple factors that are part of the software resilience equation. Below are some that I have had experience within my more than a decade long software engineering career.The examples mentioned below will be related to E-commerce as I have worked in fashion E-commerce for almost 9 years now.Let&#39;s get started.Gradual rollout/deploy #A gradual rollout or deployment is the ability to give access to a release in parts. It may be canary deployment or blue green deployment or just a feature flag or even a rolling deployment. You can read more about these deployment techniques in a colorful way.The point here is, even if this is a manual task it is very important for resilient software. Imagine this, you are changing the Payment gateway for an e-commerce website. If you do a big bang 100% of the transactions go from the former Payment gateway A to the New payment gateway B you will land in deep trouble.But, if you can try out like 1% of the customers for 1 week, smoothen out any bugs with the new gateway integration it helps a lot and the blast radius is just 1% of the transactions.Slowly week by week you can go from 1 to 5 then to 10 and finally to 100 with full confidence. The same logic goes on having a health check when deploying. If the health check fails the deployment is automatically rolled back. Depending on the services, you can even do a gradual rollout meaning this particular version only get 2% of the traffic. Gradual rollout is supported by services like Google Cloud run on the infrastructure layer not the code layer.Another important consideration for resilient software is a deployment is not a release.Retry for software resilience #If you call another system you always need to expect they might fail. So a retry mechanism helps in this case. For instance, you are calling a product review service to create a new product review.If it fails to create the review you could easily retry 1 or 2 times more to get a successful response.A very simple curl example is below:curl -i --retry 3 http://httpbin.org/status/500The curl here is always going to retry 3 times as it will get a 500 error back. The curl below will only run once as it will get at 200 back on the first try:curl -i --retry 3 http://httpbin.org/status/200A retry is a simple but effective way to make the software more resilient.Timeouts for resilient software #External systems can be slow and you don&#39;t have control over their response times. This can in turn makes the systems you develop slow. Once we were integrating with a &amp;quot;popular&amp;quot; courier service. Unfortunately, their response time to create a shipment was in seconds not milliseconds.We tackled this with an optimum timeout and pushing the task async where possible. This really helps keep software resilience intact.This unblocked the person doing quality checks and putting the items in a box to be shipped to the customer. While the box was traveling from the QC station to the packing station the shipment would be created and the shipping label could be printed. Even though it took some seconds for the box to go from QC to the packing station it was enough for us to create the shipment. If some shipments failed there was an easy option to retry that would call the courier on demand.The moral of the story, always add relevant timeouts and fail fast. As per need give a way for the user to retry manually when needed. Timeouts are very important.Fallback #Fallback is a very simple concept. If the main thing does not work use the backup. The main thing in the case of a web system can be a response from an API. So if your API call fails even after some retries you can fall back to a local copy of the response.Another example in terms of pure code can be as simple as:const shippingFee = fees.shipping ? fees.shipping: 10.00;In the above code snippet, it looks for  some code  on the Twitter API, it says “900 requests/15-min window (user-auth)” and “100,000 requests/24-hour window (application level)”. So if as a consumer you do more than 900 calls to get statues by a user there will be a response with status code 429.The same principles must be practiced when you develop APIs even if they are consumed by other internal services. Let’s assume if one of the other internal services has a misconfigured infinite loop your service will come down when it starts hitting your service frantically.If you have a good rate-limiting in place the other service will start seeing errors early and they can fix the problem quicker.On your end, your service doesn’t gobble up resources as well as keeps things sane by failing faster.Other things to consider #For better software resilience there are many other things to consider. A database read-write segregation is a good practice. Where there is one master database for mainly writing and multiple read replicas.In this case, the bulk of the operation which is read is load-balanced between the read replicas and the master node gets the write.There can be “seconds” of lag for the master to sync with the read replicas but that is a cost you should be willing to pay for the resiliency it provides.Another important software resilience pattern is the Circuit breaker pattern.Similar to your house’s electric circuit breaker if your software system cannot reach another software system multiple times it breaks the circuit marking it open. It periodically checks if the other system is back.When the other system comes back the circuit is closed again. Microsoft blog has a great explanation of the circuit breaker pattern.Resilient software systems scale automatically. They add up resources depending on the load. This point is also related to software scalability, generally software scalability and resilience go hand in hand. Autoscaling systems depend on health checks.For systems to be resilient to load they should be able to add resources when the load is high and lower down the resources as the traffic subsides.This keeps the software resilient and the costs optimal too.Conclusion #Resilience and self-healing software is very important for high uptime.Even in case of adversity the software that can have a degraded but functional performance is a mark of resilient software.Software resilience is achieved by always questioning what happens if this fails especially when communicating with external services like a database or an external API. I hope this helps you architect more resilient software. If you have any more aspects to share, please don’t forget to comment.",
    "author": { "@type": "Person", "name": "Geshan Manandhar" },
    "publisher": {
      "@type": "Organization",
      "name": "Geshan Manandhar",
      "logo": { "@type": "ImageObject", "url": "https://geshan.com.np/images/favicons/favicon-32x32.png" }
    },
    "mainEntityOfPage": { "@type": "WebPage", "@id": "https://geshan.com.np/blog/2020/12/software-resilience/" }
  }</script><div class="progress-bar"></div><div class="max-w-6xl py-3 mx-auto grid-cols-12 grid gap-15 px-4 md:px-0 mb-20"><div class="col-span-12"><article class="md:w-full mx-auto"><header class="page-header text-center"><h1 class="font-semibold font-heading text-gray text-center mb-6 tracking-[-0.01em] leading-[105%] md:leading-[105%]">Software Resilience: 7 must-have factors for healing from the unexpected</h1><div class="flex items-center justify-between gap-3 md:gap-4 flex-wrap md:flex-nowrap py-2 border-y border-lightbg mt-4"><div class="flex items-center justify-start md:gap-4 gap-2 flex-wrap w-2/3"><div class="flex justify-start items-center gap-3 md:gap-4"><img src="/images/favicons/favicon-32x32-pp.png" alt="Geshan Manandhar" class="w-10 h-10 rounded-full object-cover flex-shrink-0"> <span class="text-gray font-medium font-ui text-md md:text-xl uppercase tracking-wide text-start">Geshan Manandhar</span></div><time datetime="2020-12-17" data-updated="true"><time class="entry-date" datetime="2020-12-17"><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">17-Dec-2020 </span></time></time><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">9 MIN READ</span></div><button type="button" id="share-button" class="flex items-center justify-center w-8 h-8 md:w-9 md:h-9 rounded text-lightGray hover:border-gray-400 hover:bg-gray-50 transition-colors flex-shrink-0" aria-label="Share this post" onclick="toggleShareIcons(); ga('send', 'event', 'share', 'clickShareOnPost');"><img src="/images/shareIcon.svg" alt="Share this post" class="w-6 h-6"></button></div><div id="share-icons-container" class="share-icons print:hidden hidden" aria-label="Share this post"><div class="flex items-center justify-center gap-3"><span class="share-icons"><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://geshan.com.np/blog/2020/12/software-resilience/" target="_blank" title="Share 'Software Resilience: 7 must-have factors for healing from the unexpected' on LinkedIn" onclick="ga('send', 'event', 'share', 'clickShareOnLinkedIn');"><span id="linkedin-share" class="text-[#0077B5]"><img src="/images/social-icons/linkedin.svg" alt="LinkedIn" class="sharing-common"> </span></a><a href="http://twitter.com/share?text=Software Resilience: 7 must-have factors for healing from the unexpected - &url=https://geshan.com.np/blog/2020/12/software-resilience/" target="_blank" title="Share 'Software Resilience: 7 must-have factors for healing from the unexpected' on Twitter" onclick="ga('send', 'event', 'share', 'clickShareOnTwitter');"><span id="twitter-share" class="text-[#1DA1F2]"><img src="/images/social-icons/twitter.svg" alt="Twitter" class="sharing-common"> </span></a><a href="http://www.facebook.com/sharer.php?u=https://geshan.com.np/blog/2020/12/software-resilience/" target="_blank" title="Share 'Software Resilience: 7 must-have factors for healing from the unexpected' on Facebook" onclick="ga('send', 'event', 'share', 'clickShareOnFacebook');"><span id="facebook-share" class="text-[#1877F2]"><img src="/images/social-icons/facebook.svg" alt="Facebook" class="sharing-common"> </span></a><a href="https://t.me/share/url?url=https://geshan.com.np/blog/2020/12/software-resilience/" target="_blank" title="Share 'Software Resilience: 7 must-have factors for healing from the unexpected' on Telegram" onclick="ga('send', 'event', 'share', 'clickShareOnTelegram');"><span id="telegram-share" class="text-[#0088cc]"><img src="/images/social-icons/telegram.svg" alt="Telegram" class="sharing-common"> </span></a><a href="https://api.whatsapp.com/send?text=https://geshan.com.np/blog/2020/12/software-resilience/" target="_blank" title="Share 'Software Resilience: 7 must-have factors for healing from the unexpected' on Whatsapp" onclick="ga('send', 'event', 'share', 'clickShareOnWhatsapp');"><span id="whatsapp-share" class="text-[#25d366]"><img src="/images/social-icons/whatsapp.svg" alt="WhatsApp" class="sharing-common"></span></a></span></div></div></header><div class="entry-content clearfix font-body text-xl text-gray"><p>Software resilience is a must-have quality for any software that is scalable, performant, and fault-tolerant.</p><p>The ability of software to heal from unexpected events is software resilience. This means a software engineer has to anticipate unexpected events and account for them. The solution for creating this fault tolerance can be in code or on the infrastructure layer.</p><blockquote><p>Distributed systems will fail, a resilient software system will not try to avoid failure but expect it and respond gracefully.</p></blockquote><p>In this post, we will look into some aspects that you need to be careful to have software resilience.</p><img class="center" loading="lazy" src="/images/software-resilience/01software-resilience.jpg" title="Software resilience factors to consider" alt="Software resilience  factors to consider to heal from the unexpected"><h2 id="table-of-contents" tabindex="-1">Table of Contents <a class="direct-link" href="#table-of-contents">#</a></h2><ol><li><a href="#what-is-software-resilience">What is software resilience</a></li><li><a href="#resilient-software-factors">Resilient software factors</a><ol><li><a href="#gradual-rollout%2Fdeploy">Gradual rollout/deploy</a></li><li><a href="#retry-for-software-resilience">Retry for software resilience</a></li><li><a href="#timeouts-for-resilient-software">Timeouts for resilient software</a></li><li><a href="#fallback">Fallback</a></li><li><a href="#idempotent-operations-enable-software-resilience">Idempotent operations enable software resilience</a></li><li><a href="#database-transaction">Database transaction</a></li><li><a href="#rate-limiting">Rate limiting</a></li></ol></li><li><a href="#other-things-to-consider">Other things to consider</a></li><li><a href="#conclusion">Conclusion</a></li></ol><h2 id="what-is-software-resilience" tabindex="-1">What is software resilience <a class="direct-link" href="#what-is-software-resilience">#</a></h2><p>Software Engineering Institute <a href="https://insights.sei.cmu.edu/sei_blog/2019/11/system-resilience-what-exactly-is-it.html">blog</a> of Carnegie Mellon University indicates:</p><blockquote><p>Basically, a system is resilient if it continues to carry out its mission in the face of adversity (i.e., if it provides required capabilities despite excessive stresses that can cause disruptions). Being resilient is important because no matter how well a system is engineered, reality will sooner or later conspire to disrupt the system.</p></blockquote><p>If a software system is able to function even partially well when unexpected events occur that is software resilience. On an infrastructure level, there is the infamous <a href="https://netflix.github.io/chaosmonkey/">Chaos Monkey</a> by NetFlix. Chaos Monkey goes into your production environment and randomly starts killing instances. This acts as a stress test for your software resilience.</p><p>Software resilience is also affected by the blast radius. If the change is low risk in terms of the radius it can cover it is easier to go on with the change. If the blast radius is very big you might need to think of other things too.</p><h2 id="resilient-software-factors" tabindex="-1">Resilient software factors <a class="direct-link" href="#resilient-software-factors">#</a></h2><p>There are multiple factors that are part of the software resilience equation. Below are some that I have had experience within my more than a decade long software engineering career.</p><blockquote><p>The examples mentioned below will be related to E-commerce as I have worked in fashion E-commerce for almost 9 years now.</p></blockquote><p>Let's get started.</p><h3 id="gradual-rollout%2Fdeploy" tabindex="-1">Gradual rollout/deploy <a class="direct-link" href="#gradual-rollout%2Fdeploy">#</a></h3><p>A gradual rollout or deployment is the ability to give access to a release in parts. It may be canary deployment or blue green deployment or just a feature flag or even a rolling deployment. You can read more about these <a href="https://opensource.com/article/17/5/colorful-deployments">deployment techniques</a> in a colorful way.</p><p>The point here is, even if this is a manual task it is very important for resilient software. Imagine this, you are changing the Payment gateway for an e-commerce website. If you do a big bang 100% of the transactions go from the former Payment gateway A to the New payment gateway B you will land in deep trouble.</p><blockquote><p>But, if you can try out like 1% of the customers for 1 week, smoothen out any bugs with the new gateway integration it helps a lot and the blast radius is just 1% of the transactions.</p></blockquote><p>Slowly week by week you can go from 1 to 5 then to 10 and finally to 100 with full confidence. The same logic goes on having a <a href="https://microservices.io/patterns/observability/health-check-api.html">health check</a> when deploying. If the health check fails the deployment is automatically rolled back. Depending on the services, you can even do a gradual rollout meaning this particular version only get 2% of the traffic. <a href="https://cloud.google.com/run/docs/rollouts-rollbacks-traffic-migration">Gradual rollout</a> is supported by services like <a href="/blog/2019/11/why-use-google-cloud-run-5-compelling-reasons/">Google Cloud run</a> on the infrastructure layer not the code layer.</p><p>Another important consideration for resilient software is a <a href="/blog/2018/10/deployment-is-not-release/">deployment is not a release</a>.</p><h3 id="retry-for-software-resilience" tabindex="-1">Retry for software resilience <a class="direct-link" href="#retry-for-software-resilience">#</a></h3><p>If you call another system you always need to expect they might fail. So a retry mechanism helps in this case. For instance, you are calling a product review service to create a new product review.</p><blockquote><p>If it fails to create the review you could easily retry 1 or 2 times more to get a successful response.</p></blockquote><p>A very simple curl example is below:</p><pre class="language-bash"><code class="language-bash"><span class="token function">curl</span> <span class="token parameter variable">-i</span> <span class="token parameter variable">--retry</span> <span class="token number">3</span> http://httpbin.org/status/500</code></pre><p>The curl here is always going to retry 3 times as it will get a 500 error back. The curl below will only run once as it will get at 200 back on the first try:</p><pre class="language-bash"><code class="language-bash"><span class="token function">curl</span> <span class="token parameter variable">-i</span> <span class="token parameter variable">--retry</span> <span class="token number">3</span> http://httpbin.org/status/200</code></pre><p>A retry is a simple but effective way to make the software more resilient.</p><h3 id="timeouts-for-resilient-software" tabindex="-1">Timeouts for resilient software <a class="direct-link" href="#timeouts-for-resilient-software">#</a></h3><p>External systems can be slow and you don't have control over their response times. This can in turn makes the systems you develop slow. Once we were integrating with a &quot;popular&quot; courier service. Unfortunately, their response time to create a shipment was in seconds not milliseconds.</p><blockquote><p>We tackled this with an optimum timeout and pushing the task async where possible. This really helps keep software resilience intact.</p></blockquote><p>This unblocked the person doing quality checks and putting the items in a box to be shipped to the customer. While the box was traveling from the QC station to the packing station the shipment would be created and the shipping label could be printed. Even though it took some seconds for the box to go from QC to the packing station it was enough for us to create the shipment. If some shipments failed there was an easy option to retry that would call the courier on demand.</p><p>The moral of the story, always add relevant timeouts and fail fast. As per need give a way for the user to retry manually when needed. Timeouts are very <a href="https://itnext.io/why-i-like-go-http-client-as-a-java-developer-676ea1e698b4">important</a>.</p><h3 id="fallback" tabindex="-1">Fallback <a class="direct-link" href="#fallback">#</a></h3><p>Fallback is a very simple concept. If the main thing does not work use the backup. The main thing in the case of a web system can be a response from an API. So if your API call fails even after some retries you can fall back to a local copy of the response.</p><p>Another example in terms of pure code can be as simple as:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> shippingFee <span class="token operator">=</span> fees<span class="token punctuation">.</span>shipping <span class="token operator">?</span> fees<span class="token punctuation">.</span>shipping<span class="token operator">:</span> <span class="token number">10.00</span><span class="token punctuation">;</span></code></pre><p>In the above code snippet, it looks for <code>fees.shipping</code> if that is not available it falls back to the value of 10.00. We could implement the same thing to an API call, if we don’t get the desired result from the API call it will gracefully degrade to using the default value.</p><blockquote><p>Fallbacks seem very obvious but at times I have seen them being forgotten or omitted.</p></blockquote><p>This can cause problems for high traffic systems.</p><h3 id="idempotent-operations-enable-software-resilience" tabindex="-1">Idempotent operations enable software resilience <a class="direct-link" href="#idempotent-operations-enable-software-resilience">#</a></h3><p>One <a href="https://stackoverflow.com/a/1077421/112849">stack overflow</a> answer sums it up well:</p><blockquote><p>In computing, an idempotent operation is one that has no additional effect if it is called more than once with the same input parameters.</p></blockquote><p>In real life, it is like that stop button on the bus. You press it once or 100 times after the stop sign is lit, it has the same result to indicate the bus driver to stop at the next bus stop. For instance, a GET operation in an API is Idempotent. This is important in designing resilient systems, let me explain with an example.</p><p>You are designing an API to mark a message as read.</p><blockquote><p>Regardless of how many times the API is called to mark that single message as read, the first one will set it from unread to read and all the others won’t change the state.</p></blockquote><p>This is an easy to understand example of idempotency. When making your systems resilient you can safely ignore the second and later requests preserving your resources.</p><h3 id="database-transaction" tabindex="-1">Database transaction <a class="direct-link" href="#database-transaction">#</a></h3><p>The simplest way to understand <a href="https://www.tutorialspoint.com/dbms/dbms_transaction.htm">database transactions</a> is <code>all or nothing</code>. If you have 3 steps to complete a task and there is an issue in step 2 it will rollback the whole operation.</p><blockquote><p>A classic example is a money transfer between 2 bank accounts, either it goes through in full or nothing happens.</p></blockquote><p>There should not be a case where the money is deducted from account A but not added to account B. Database transactions are very important for consistent data.</p><p>With good use of <a href="https://www.geeksforgeeks.org/transaction-isolation-levels-dbms/">isolation levels</a>, we can use database transactions to counter race conditions. For instance, 20 records are to be updated by a cron and a flag called <code>synced</code> will be set to true if the rows are successfully synced with another system like an ERP. It can be done in the following steps to avoid another cron doing the same task at the same time:</p><ol><li>Prepare for the underlying task like sync those rows with an Enterprise Resource Planning (ERP) software</li><li>Start a database transaction</li><li><code>SELECT … FOR UPDATE</code> with isolation level read committed and longer timeout than usual for the session</li><li>Sync the rows with the ERP</li><li>Set the synced flag to 1 for selected rows with an update query</li><li>Commit the transaction</li><li>If there is any problem, roll back the whole transaction</li></ol><p>So, in the above case if step 4 fails the transaction will be rolled back. While the rows are locked with a select for update another cron will not be able to read it as it is locked for UPDATE and is done with isolation level read committed.</p><p>This helps in creating fault-tolerant and resilient software by stopping the same rows to be synced twice. If another cron even by mistake runs while the first one is running it will wait for those rows to be free to be read by the new SELECT … FOR UPDATE query.</p><h3 id="rate-limiting" tabindex="-1">Rate limiting <a class="direct-link" href="#rate-limiting">#</a></h3><p>By now you have surely found out that for software to be more resilient it needs to use the resources optimally. This rate-limiting factor is saving our resources from misuse. For instance, <a href="https://developer.twitter.com/en/docs/twitter-api/v1/tweets/timelines/">Twitter API</a> rate limits call. Let's take an example of <code>/statuses/user_timeline</code> on the Twitter API, it says “900 requests/15-min window (user-auth)” and “100,000 requests/24-hour window (application level)”. So if as a consumer you do more than 900 calls to get statues by a user there will be a response with status code 429.</p><p>The same principles must be practiced when you develop APIs even if they are consumed by other internal services. Let’s assume if one of the other internal services has a misconfigured infinite loop your service will come down when it starts hitting your service frantically.</p><blockquote><p>If you have a good rate-limiting in place the other service will start seeing errors early and they can fix the problem quicker.</p></blockquote><p>On your end, your service doesn’t gobble up resources as well as keeps things sane by failing faster.</p><h2 id="other-things-to-consider" tabindex="-1">Other things to consider <a class="direct-link" href="#other-things-to-consider">#</a></h2><p>For better software resilience there are many other things to consider. A database read-write segregation is a good practice. Where there is one master database for mainly writing and multiple read replicas.</p><blockquote><p>In this case, the bulk of the operation which is read is load-balanced between the read replicas and the master node gets the write.</p></blockquote><p>There can be “seconds” of lag for the master to sync with the read replicas but that is a cost you should be willing to pay for the resiliency it provides.</p><p>Another important software resilience <a href="https://docs.microsoft.com/en-us/azure/architecture/patterns/category/resiliency">pattern</a> is the Circuit breaker pattern.</p><blockquote><p>Similar to your house’s electric circuit breaker if your software system cannot reach another software system multiple times it breaks the circuit marking it open. It periodically checks if the other system is back.</p></blockquote><p>When the other system comes back the circuit is closed again. Microsoft blog has a great explanation of the <a href="https://docs.microsoft.com/en-us/azure/architecture/patterns/circuit-breaker">circuit breaker</a> pattern.</p><p>Resilient software systems scale automatically. They add up resources depending on the load. This point is also related to <a href="/blog/2020/12/software-scalability/">software scalability</a>, generally software scalability and resilience go hand in hand. Autoscaling systems depend on <a href="https://docs.microsoft.com/en-us/azure/architecture/patterns/health-endpoint-monitoring">health checks</a>.</p><blockquote><p>For systems to be resilient to load they should be able to add resources when the load is high and lower down the resources as the traffic subsides.</p></blockquote><p>This keeps the software resilient and the costs optimal too.</p><h2 id="conclusion" tabindex="-1">Conclusion <a class="direct-link" href="#conclusion">#</a></h2><p>Resilience and self-healing software is very important for high uptime.</p><blockquote><p>Even in case of adversity the software that can have a degraded but functional performance is a mark of resilient software.</p></blockquote><p>Software resilience is achieved by always questioning what happens if this fails especially when communicating with external services like a database or an external API. I hope this helps you architect more resilient software. If you have any more aspects to share, please don’t forget to comment.</p></div><div class="flex items-center justify-between gap-3 md:gap-4 flex-wrap md:flex-nowrap py-2 border-y border-lightbg mt-4"><div class="flex items-center justify-start md:gap-4 gap-2 flex-wrap w-2/3"><div class="flex justify-start items-center gap-3 md:gap-4"><img src="/images/favicons/favicon-32x32-pp.png" alt="Geshan Manandhar" class="w-10 h-10 rounded-full object-cover flex-shrink-0"> <span class="text-gray font-medium font-ui text-md md:text-xl uppercase tracking-wide text-start">Geshan Manandhar</span></div><time datetime="2020-12-17" data-updated="true"><time class="entry-date" datetime="2020-12-17"><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">17-Dec-2020 </span></time></time><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">9 MIN READ</span></div><button type="button" id="share-button-bottom" class="flex items-center justify-center w-8 h-8 md:w-9 md:h-9 rounded text-lightGray hover:border-gray-400 hover:bg-gray-50 transition-colors flex-shrink-0" aria-label="Share this post" onclick="toggleShareIconsBottom(); ga('send', 'event', 'share', 'clickShareOnPost');"><img src="/images/shareIcon.svg" alt="Share this post" class="w-6 h-6"></button></div><div id="share-icons-container-bottom" class="share-icons-bottom print:hidden hidden mx-auto" aria-label="Share this post"><div class="w-full flex items-center justify-center mx-auto gap-3"><span class="share-icons"><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://geshan.com.np/blog/2020/12/software-resilience/" target="_blank" title="Share 'Software Resilience: 7 must-have factors for healing from the unexpected' on LinkedIn" onclick="ga('send', 'event', 'share', 'clickShareOnLinkedIn');"><span id="linkedin-share" class="text-[#0077B5]"><img src="/images/social-icons/linkedin.svg" alt="LinkedIn" class="sharing-common"> </span></a><a href="http://twitter.com/share?text=Software Resilience: 7 must-have factors for healing from the unexpected - &url=https://geshan.com.np/blog/2020/12/software-resilience/" target="_blank" title="Share 'Software Resilience: 7 must-have factors for healing from the unexpected' on Twitter" onclick="ga('send', 'event', 'share', 'clickShareOnTwitter');"><span id="twitter-share" class="text-[#1DA1F2]"><img src="/images/social-icons/twitter.svg" alt="Twitter" class="sharing-common"> </span></a><a href="http://www.facebook.com/sharer.php?u=https://geshan.com.np/blog/2020/12/software-resilience/" target="_blank" title="Share 'Software Resilience: 7 must-have factors for healing from the unexpected' on Facebook" onclick="ga('send', 'event', 'share', 'clickShareOnFacebook');"><span id="facebook-share" class="text-[#1877F2]"><img src="/images/social-icons/facebook.svg" alt="Facebook" class="sharing-common"> </span></a><a href="https://t.me/share/url?url=https://geshan.com.np/blog/2020/12/software-resilience/" target="_blank" title="Share 'Software Resilience: 7 must-have factors for healing from the unexpected' on Telegram" onclick="ga('send', 'event', 'share', 'clickShareOnTelegram');"><span id="telegram-share" class="text-[#0088cc]"><img src="/images/social-icons/telegram.svg" alt="Telegram" class="sharing-common"> </span></a><a href="https://api.whatsapp.com/send?text=https://geshan.com.np/blog/2020/12/software-resilience/" target="_blank" title="Share 'Software Resilience: 7 must-have factors for healing from the unexpected' on Whatsapp" onclick="ga('send', 'event', 'share', 'clickShareOnWhatsapp');"><span id="whatsapp-share" class="text-[#25d366]"><img src="/images/social-icons/whatsapp.svg" alt="WhatsApp" class="sharing-common"></span></a></span></div></div></article><div class="mt-3"><a href="/blog/categories/software-engineering/" title="Software Engineering" class="background-lightbg mr-4 mb-2 inline-block mt-2 rounded border-2 bg-gray-100 font-semibold font-ui text-gray hover:text-gray-400 px-3 py-1 text-xl border-gray-300 cursor-pointer hover:border-gray-400">software engineering</a></div><section class="md:w-full mx-auto mt-4"><h3 class="comments font-heading">Comments</h3><div id="disqus_thread"></div><button id="disqus_trigger" class="font-ui text-blackText hover:border-darkAvocado border-blacktext hover:shadow-lg border-2 transition ease-in-out delay-100 px-3 py-2 pt-2 mt-2 rounded-md text-center block h-auto text-xl" onclick="load_disqus()">Post a Comment</button><div id="disqus_thread" aria-live="polite"></div></section></div></div><section class="md:w-full mx-auto mt-4 bg-lightAvocado p-4 rounded-lg pb-8"><div class="max-w-6xl mx-auto md:py-12 px-4"><h2 class="text-4xl text-darkAvocado font-heading font-regular flex-shrink-0 py-8 tracking-normal leading-[105%] md:leading-[105%]"><span class="text-lightGray italic">Related</span> <span class="text-blackText">Blogs</span></h2><div class="grid grid-cols-1 md:grid-cols-2 gap-8"><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2024/12/postgres-insert-on-conflict-update/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to Upsert Data in Postgres Using INSERT ON CONFLICT UPDATE</a> <time class="font-medium text-xl text-textColor uppercase font-ui">14-Dec-2024 &nbsp;&nbsp;&nbsp; 9 min read</time><p class="text-xl text-gray font-ui">Learn how to upsert data in Postgres using the INSERT ON CONFLICT UPDATE clause with practical examples. Combine insert and update operations into one UPSERT.</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2024/10/unblock-software-engineers/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">Unblocking Software Engineers: Overcoming Non-technical and Technical Roadblocks</a> <time class="font-medium text-xl text-textColor uppercase font-ui">12-Oct-2024 &nbsp;&nbsp;&nbsp; 9 min read</time><p class="text-xl text-gray font-ui">Learn how to unlblock software engineers by overcoming non-technical and technical roadblocks. This guide will help you understand the common blockers and how to overcome them.</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2024/09/jest-mock-date/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to mock Date in Jest: the easiest way without installing any extra NPM package</a> <time class="font-medium text-xl text-textColor uppercase font-ui">26-Sep-2024 &nbsp;&nbsp;&nbsp; 9 min read</time><p class="text-xl text-gray font-ui">Learn to mock Date in Jest unit test in this simple to follow guide</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2024/08/postgres-insert-multiple-rows/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to insert multiple rows in Postgres using two useful methods</a> <time class="font-medium text-xl text-textColor uppercase font-ui">14-Aug-2024 &nbsp;&nbsp;&nbsp; 10 min read</time><p class="text-xl text-gray font-ui">Learn to insert multiple rows at once in Postgres with a single insert statement and the copy command in this useful tutorial.</p></div></div></div></section><section class="bg-avocado md:py-0 py-12 px-4"><div class="max-w-6xl mx-auto"><div class="md:hidden"><h2 class="mb-4 text-3xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-base text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-base text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity w-full text-center">Follow on LinkedIn &nbsp;→</a></div><div class="hidden md:grid lg:hidden grid-cols-3 gap-8 items-center"><div class="z-10 col-span-2"><h2 class="mb-4 text-2xl md:text-4xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-xl text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-xl text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity">Follow on LinkedIn &nbsp;→</a></div><div class="flex items-center justify-end col-span-1"><img class="w-32 h-auto" src="/images/theme/new_logo.svg" alt="Geshan"></div></div><div class="hidden lg:grid grid-cols-2 gap-8 lg:gap-12 items-center justify-between h-full"><div class="z-10"><h2 class="mb-4 text-2xl md:text-4xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-xl text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><p class="text-xl text-blackText font-body font-regular mb-6">A big thank you for supporting this ad. free, unobstructive (no overlays, no pop-ups) blog.</p></div><div class="flex items-center gap-12 w-full md:w-auto justify-end self-end"><img class="w-16 md:w-32 h-auto" src="/images/theme/new_logo.svg" alt="Geshan"> <a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-xl text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity w-full md:w-auto text-center md:text-left">Follow on LinkedIn &nbsp;→</a></div></div></div></section></div></div></div></main><footer role="contentinfo"><footer class="bg-avocado sm:px-4"><div class="max-w-6xl mx-auto flex flex-col md:flex-row sm:flex-col justify-between gap-2 items-center sm:items-center md:items-center py-10 font-nav text-lightGray text-base font-regular"><div class="pb-0 sm:pb-2 text-gray"><span class="pr-4">Copyright © 2026 Geshan Manandhar.</span></div><div class="pb-0 sm:pb-2"><ul class="flex"><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> LinkedIn</a></li><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://www.twitter.com/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> Twitter</a></li><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://github.com/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> Github</a></li></ul></div></div></footer></footer><script src="/js/all.min.js" defer="defer"></script></body></html>