<!doctype html><html class="no-js" lang="en"><head><meta charset="utf-8"><meta name="author" content="Geshan Manandhar"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="&amp;quot;How do I get new team members contributing code to the project in a matter of minutes/hours not days?&amp;quot; is a common question heard i..."><meta name="keywords" content=""><meta name="p:domain_verify" content="e654c68562abebfa25c291f59d7d00e8"><meta property="og:type" content="website"><meta property="og:url" content="https://geshan.com.np/blog/2015/10/getting-started-with-laravel-mariadb-mysql-docker/"><meta property="og:title" content="Getting started with Laravel, MariaDB (MySQL) and docker, docker compose"><meta property="og:description" content="A blog about software engineering, devops and web development covering topics like php, javascript, docker, microservices etc."><meta property="og:site_name" content="Geshan&#39;s Blog"><meta property="og:image" content="https://geshan.com.np/images/laravel-mysql-docker/laravel-mysql-docker.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:widgets:new-embed-design" content="on"><meta name="twitter:site" content="@geshan"><meta name="twitter:creator" content="@geshan"><meta name="twitter:title" content="Getting started with Laravel, MariaDB (MySQL) and docker, docker compose"><meta name="twitter:description" content="A blog about software engineering, devops and web development covering topics like php, javascript, docker, microservices etc."><meta name="twitter:image:src" content="https://geshan.com.np/images/laravel-mysql-docker/laravel-mysql-docker.png"><link rel="canonical" href="https://geshan.com.np/blog/2015/10/getting-started-with-laravel-mariadb-mysql-docker/"><meta property="fb:pages" content="30717799226"><meta property="fb:app_id" content="106030259434380"><meta name="monetization" content="$ilp.uphold.com/aKHWpqhphm9f"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicons/favicon-16x16.png"><link href="/atom.xml" rel="alternate" title="Geshan&#39;s Blog" type="application/atom+xml"><title>Getting started with Laravel, MariaDB (MySQL) and docker, docker compose</title><link rel="preconnect" href="/" crossorigin><link rel="preload" href="/css/fonts.css" as="style"><link rel="preload" href="/fonts/source-sans-4/source-serif-4-latin-400-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/source-sans-4/source-serif-4-latin-500-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/source-sans-pro/source-sans-pro-latin-400-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="/css/fonts.css"><link rel="stylesheet" href="/css/tw-006.css"><link rel="alternate" href="/atom.xml" type="application/atom+xml" title="Geshan&#39;s Blog"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-P3NXCVQEPE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-P3NXCVQEPE');</script><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWT2D9T');</script><script src="https://cdn.jsdelivr.net/npm/@statsig/js-client@3/build/statsig-js-client+session-replay+web-analytics.min.js?apikey=client-rYO7rX8WSUyyLg9pKJwymLxM71tCE0CKgxgtUj4akzK"></script><link rel="manifest" href="/manifest.json"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="application-name" content="Geshan.com.np"><meta name="apple-mobile-web-app-title" content="Geshan.com.np"><meta name="msapplication-starturl" content="/index.html"><meta name="theme-color" content="#6947E7"><script>if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/sw.js").then(function(registration) {
        console.log('ServiceWorker registration successful with scope: ', registration.scope);
    }, function(err) {
        console.log('ServiceWorker registration failed: ', err);
    });
  }</script></head><body class="overflow-x-hidden font-ui flex flex-col min-h-screen"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWT2D9T" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><header role="banner"><div><nav class="bg-white" role="navigation"><div class="w-full md:max-w-6xl mx-auto py-4 px-4"><div class="flex items-center justify-between h-16"><div class="flex-shrink-0"><a href="/" class="flex items-center"><img class="h-12 w-12" src="/images/theme/new_logo.svg" alt="Geshan G"></a></div><div class="flex items-center gap-12"><div class="hidden sm:flex items-center gap-12"><a href="/posts/1/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">Posts </a><a href="/about/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">About Me </a><a href="https://newsletter.geshan.com.np/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">Newsletter</a></div><form class="search flex items-center" action="https://www.google.com/search" method="GET"><input type="hidden" name="sitesearch" value="geshan.com.np"><div class="relative"><input class="bg-gray-100 border border-neutralGray rounded-lg py-2 pl-10 pr-4 font-body text-sm focus:outline-none focus:ring-2 focus:ring-avocado focus:border-transparent w-40" type="text" name="q" placeholder="Search" label="search"> <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-neutralGray" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg></div></form><button type="button" class="sm:hidden inline-flex items-center justify-center p-2 rounded-md text-black focus:outline-none focus:ring-2 focus:ring-inset focus:ring-avocado" onclick="mobileView()" aria-controls="mobile-menu" aria-expanded="false"><span class="sr-only">Open main menu</span> <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg></button></div></div></div><div class="mobile-menu fixed inset-0 z-40 hidden sm:hidden bg-black bg-opacity-40" role="dialog" aria-modal="true"><div class="absolute inset-0" onclick="mobileView()" aria-hidden="true"></div><div class="mobile-menu-panel relative ml-auto flex h-full w-10/12 max-w-sm flex-col justify-start bg-white shadow-xl"><div class="flex items-center justify-between px-4 py-4 border-b border-gray-200"><div class="flex items-center gap-3"><img class="h-8 w-8" src="/images/theme/new_logo.svg" alt="Geshan G"> <span class="text-lg font-semibold text-textColor font-body">Geshan's Blog</span></div><button type="button" class="inline-flex items-center justify-center rounded-full p-2 text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-avocado" onclick="mobileView()" aria-label="Close main menu"><svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg></button></div><nav class="overflow-y-auto px-4 py-6 space-y-2"><a href="/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Home </a><a href="/posts/1/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Posts </a><a href="/about/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">About Me </a><a href="https://newsletter.geshan.com.np/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Newsletter</a></nav><div class="px 4 py-4 border-t border-gray-200"><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="rounded-lg bg-darkAvocado px-4 py-2 text-base font-regular font-body text-white hover:bg-avocado hover:text-black transition-colors w-2/3 mx-auto ml-4">Connect on LinkedIn</a></div></div></div></nav></div></header><main id="wrap" role="main" class="flex-grow md:px-0"><div id="content"><div class="row"><div><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Geshan&#39;s Blog",
    "alternativeHeadline": "Getting started with Laravel, MariaDB (MySQL) and docker, docker compose",
    "image": "https://geshan.com.np/images/laravel-mysql-docker/laravel-mysql-docker.png",
    "editor": "Geshan Manandhar",
    "genre": "Docker",
    "keywords": "",
    "url": "https://geshan.com.np/blog/2015/10/getting-started-with-laravel-mariadb-mysql-docker/",
    "datePublished": "2015-10-24",
    "dateCreated": "2015-10-24",
    "dateModified": "2015-10-24",
    "description": "A blog about software engineering, devops and web development covering topics like php, javascript, docker, microservices etc.",
    "articleBody": "&amp;quot;How do I get new team members contributing code to the project in a matter of minutes/hours not days?&amp;quot; is a common question heard in development teams. There are some ways to do, in my opinion docker is one of the best.Docker enables using the same software stack in development, staging and production. You don&#39;t need to worry about the version of PHP, MYSQL or any other dependency with Docker. This post will be about Laravel and MariaDB (MySQL) with Docker for local development. It will also feature the use of docker-compose. We will use PHP 5.6 and MariaDB 10.1 with Laravel 5.1. This guide helps getting started with Laravel and Docker with a database.Prerequisites #You are aware about docker and is basic usage. If you are new to docker check an introduction screen-cast) or read this Docker for PHP Developers postYou know about docker volumes and linking containers with docker-compose.You are running Laravel 5.x on your local machine with some PHP and MySQL setup. The setup can be local LEMP stack or XAMPP or something similar.You have docker and docker compose installed on your machineYou have stopped your Apache/Nginx service and MYSQL service. It will free port 80 and 3306. Ifyou are using vagrant and homestead then you can run Laravel without starting it.Software Versions used #I am running this example on Ubuntu 14.04.2 LTS.Docker : 1.7.1 (Installation Instructions)Docker compose : 1.3.1 (Installation Instructions)Why use docker? #The reasons to use docker are simiar to vagrant. There are some more compelling reasons to use docker and docker compose, some of them are:Quick setup of development environment #The developer/software engineer does not need to know which version of PHP or MySQL is in use. All s/he needs to do is  some code on the project root and it will stop the containers like below:Next Steps #You can carry on using the docker containers to replace your local Apache/Ngnix and MySQL. You can develop your Laravel application with ease using docker and docker compose.Conclusion #You can use this analogy that containers are cattle and virtual machines (VMs) are pets.Creating, deleting and reconstructing the containers should be easy, fast and seamless than VMs.If you want to speed up your development flow and help other team members contribute faster to the project opt for docker and docker-comopse.You can even host your Laravel app using serverless containers on Google Cloud Run, this guide will show you how to do it step-by-step. Happy Dockerizing and coding Laravel + PHP!",
    "author": { "@type": "Person", "name": "Geshan Manandhar" },
    "publisher": {
      "@type": "Organization",
      "name": "Geshan Manandhar",
      "logo": { "@type": "ImageObject", "url": "https://geshan.com.np/images/favicons/favicon-32x32.png" }
    },
    "mainEntityOfPage": { "@type": "WebPage", "@id": "https://geshan.com.np/blog/2015/10/getting-started-with-laravel-mariadb-mysql-docker/" }
  }</script><div class="progress-bar"></div><div class="max-w-6xl py-3 mx-auto grid-cols-12 grid gap-15 px-4 md:px-0 mb-20"><div class="col-span-12"><article class="md:w-full mx-auto"><header class="page-header text-center"><h1 class="font-semibold font-heading text-gray text-center mb-6 tracking-[-0.01em] leading-[105%] md:leading-[105%]">Getting started with Laravel, MariaDB (MySQL) and docker, docker compose</h1><div class="flex items-center justify-between gap-3 md:gap-4 flex-wrap md:flex-nowrap py-2 border-y border-lightbg mt-4"><div class="flex items-center justify-start md:gap-4 gap-2 flex-wrap w-2/3"><div class="flex justify-start items-center gap-3 md:gap-4"><img src="/images/favicons/favicon-32x32-pp.png" alt="Geshan Manandhar" class="w-10 h-10 rounded-full object-cover flex-shrink-0"> <span class="text-gray font-medium font-ui text-md md:text-xl uppercase tracking-wide text-start">Geshan Manandhar</span></div><time datetime="2015-10-24" data-updated="true"><time class="entry-date" datetime="2015-10-24"><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">24-Oct-2015 </span></time></time><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">8 MIN READ</span></div><button type="button" id="share-button" class="flex items-center justify-center w-8 h-8 md:w-9 md:h-9 rounded text-lightGray hover:border-gray-400 hover:bg-gray-50 transition-colors flex-shrink-0" aria-label="Share this post" onclick="toggleShareIcons(); ga('send', 'event', 'share', 'clickShareOnPost');"><img src="/images/shareIcon.svg" alt="Share this post" class="w-6 h-6"></button></div><div id="share-icons-container" class="share-icons print:hidden hidden" aria-label="Share this post"><div class="flex items-center justify-center gap-3"><span class="share-icons"><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://geshan.com.np/blog/2015/10/getting-started-with-laravel-mariadb-mysql-docker/" target="_blank" title="Share 'Getting started with Laravel, MariaDB (MySQL) and docker, docker compose' on LinkedIn" onclick="ga('send', 'event', 'share', 'clickShareOnLinkedIn');"><span id="linkedin-share" class="text-[#0077B5]"><img src="/images/social-icons/linkedin.svg" alt="LinkedIn" class="sharing-common"> </span></a><a href="http://twitter.com/share?text=Getting started with Laravel, MariaDB (MySQL) and docker, docker compose - &url=https://geshan.com.np/blog/2015/10/getting-started-with-laravel-mariadb-mysql-docker/" target="_blank" title="Share 'Getting started with Laravel, MariaDB (MySQL) and docker, docker compose' on Twitter" onclick="ga('send', 'event', 'share', 'clickShareOnTwitter');"><span id="twitter-share" class="text-[#1DA1F2]"><img src="/images/social-icons/twitter.svg" alt="Twitter" class="sharing-common"> </span></a><a href="http://www.facebook.com/sharer.php?u=https://geshan.com.np/blog/2015/10/getting-started-with-laravel-mariadb-mysql-docker/" target="_blank" title="Share 'Getting started with Laravel, MariaDB (MySQL) and docker, docker compose' on Facebook" onclick="ga('send', 'event', 'share', 'clickShareOnFacebook');"><span id="facebook-share" class="text-[#1877F2]"><img src="/images/social-icons/facebook.svg" alt="Facebook" class="sharing-common"> </span></a><a href="https://t.me/share/url?url=https://geshan.com.np/blog/2015/10/getting-started-with-laravel-mariadb-mysql-docker/" target="_blank" title="Share 'Getting started with Laravel, MariaDB (MySQL) and docker, docker compose' on Telegram" onclick="ga('send', 'event', 'share', 'clickShareOnTelegram');"><span id="telegram-share" class="text-[#0088cc]"><img src="/images/social-icons/telegram.svg" alt="Telegram" class="sharing-common"> </span></a><a href="https://api.whatsapp.com/send?text=https://geshan.com.np/blog/2015/10/getting-started-with-laravel-mariadb-mysql-docker/" target="_blank" title="Share 'Getting started with Laravel, MariaDB (MySQL) and docker, docker compose' on Whatsapp" onclick="ga('send', 'event', 'share', 'clickShareOnWhatsapp');"><span id="whatsapp-share" class="text-[#25d366]"><img src="/images/social-icons/whatsapp.svg" alt="WhatsApp" class="sharing-common"></span></a></span></div></div></header><div class="entry-content clearfix font-body text-xl text-gray"><p>&quot;How do I get new team members contributing code to the project in a matter of minutes/hours not days?&quot; is a common question heard in development teams. There are some ways to do, in my opinion <a href="http://docker.com">docker</a> is one of the best.</p><p>Docker enables using the same software stack in development, staging and production. You don't need to worry about the version of PHP, MYSQL or any other dependency with Docker. This post will be about Laravel and MariaDB (MySQL) with Docker for local development. It will also feature the use of docker-compose. We will use PHP 5.6 and MariaDB 10.1 with Laravel 5.1. This guide helps getting started with Laravel and Docker with a database.</p><img class="center" loading="lazy" src="/images/laravel-mysql-docker/laravel-mysql-docker.png" title="Getting started with Laravel, MariaDB (MySQL) and docker, docker compose" alt="Getting started with Laravel, MariaDB (MySQL) and docker, docker compose"><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="direct-link" href="#prerequisites">#</a></h2><ul><li>You are aware about docker and is basic usage. If you are new to docker check an <a href="http://bit.ly/1LsQ4X6">introduction screen-cast</a>) or read this <a href="http://bit.ly/1FVjL0k">Docker for PHP Developers</a> post</li><li>You know about docker volumes and linking containers with docker-compose.</li><li>You are running Laravel 5.x on your local machine with some PHP and MySQL setup. The setup can be local LEMP stack or XAMPP or something similar.</li><li>You have docker and <a href="https://docs.docker.com/compose/install/">docker compose</a> installed on your machine</li><li>You have stopped your Apache/Nginx service and MYSQL service. It will free port 80 and 3306. If<br>you are using vagrant and homestead then you can run Laravel without starting it.</li></ul><h2 id="software-versions-used" tabindex="-1">Software Versions used <a class="direct-link" href="#software-versions-used">#</a></h2><p>I am running this example on Ubuntu 14.04.2 LTS.</p><ul><li>Docker : 1.7.1 (<a href="https://docs.docker.com/installation/">Installation Instructions</a>)</li><li>Docker compose : 1.3.1 (<a href="https://docs.docker.com/compose/install/">Installation Instructions</a>)</li></ul><h2 id="why-use-docker%3F" tabindex="-1">Why use docker? <a class="direct-link" href="#why-use-docker%3F">#</a></h2><p>The reasons to use docker are simiar to <a href="https://geshan.com.np/blog/2014/07/getting-started-with-php-lemp-on-vagrant/">vagrant</a>. There are some more compelling reasons to use docker and docker compose, some of them are:</p><h3 id="quick-setup-of-development-environment" tabindex="-1">Quick setup of development environment <a class="direct-link" href="#quick-setup-of-development-environment">#</a></h3><p>The developer/software engineer does not need to know which version of PHP or MySQL is in use. All s/he needs to do is <code>docker-compose up</code> and wait for the images to download (around 230 MB). After that add a entry to the /etc/hostsfile like <code>echo 127.0.0.1 project-name.dev &gt;&gt; /etc/hosts</code>. Then the project runs at <code>http://project-name.dev</code> on the browser.</p><h3 id="no-need-to-install-software-on-local-machine" tabindex="-1">No need to install software on local machine <a class="direct-link" href="#no-need-to-install-software-on-local-machine">#</a></h3><p>With docker containers applications are self sufficient. There is no need to upgrade to the latest version of PHP or MySQL. The right version is already packaged inside the dockerfile and also in the container. There is no problem of one developer running PHP 5.5 and another one running PHP 5.6. All developers run the same container. You can install PHP to run composer and other scripts.</p><h3 id="same-software-stack-in-all-environments" tabindex="-1">Same software stack in all environments <a class="direct-link" href="#same-software-stack-in-all-environments">#</a></h3><p>Same docker container can be deployed to staging or production environments. The same software stack with correct software versions is used across environments. For example the problem of one developer using MySQL 5.6 and staging running MySQL 5.5 ends.</p><p>A <a href="https://github.com/jwilder/nginx-proxy">NGINX proxy</a> can be used to make the virtual hosts dynamic. This post is about keeping things simple.</p><h2 id="steps-to-running-laravel-5.x-with-mariadb-(mysql)-with-docker" tabindex="-1">Steps to running Laravel 5.x with MariaDB (MySQL) with docker <a class="direct-link" href="#steps-to-running-laravel-5.x-with-mariadb-(mysql)-with-docker">#</a></h2><p>For this example I will use docker images with <a href="https://hub.docker.com/_/alpine/">Alpine Linux</a> base images. Alpine image is just 5 MB which makes it the best candidate for docker base images. We will use PHP version 5.6 and MariaDB version 10.1. MariaDB is a drop in replacement of MySQL and for Alpine only MariaDb is available. The example git repo for this blog post is available on <a href="https://github.com/geshan/laravel-mysql-docker">github</a>.</p><h3 id="install-laravel-5.1-on-local-machine" tabindex="-1">Install Laravel 5.1 on local machine <a class="direct-link" href="#install-laravel-5.1-on-local-machine">#</a></h3><p>Run the following command:</p><pre><code>composer create-project laravel/laravel --prefer-dist laravel-mysql-docker
</code></pre><p>I installed it on <code>~/Projects/misc/laravel-mysql-docker</code></p><h3 id="add-larael-docker.dev-to-%2Fetc%2Fhosts" tabindex="-1">Add larael-docker.dev to /etc/hosts <a class="direct-link" href="#add-larael-docker.dev-to-%2Fetc%2Fhosts">#</a></h3><p>While it is downloading Laravel add <code>127.0.0.1 larave-docker.dev</code> to your <code>/etc/hosts</code> file. It can be<br>done quickly with the command below:</p><pre><code>sudo echo '120.0.0.1 laravel-docker.dev' &gt;&gt; /etc/hosts
</code></pre><h3 id="setup-docker-images-with-docker-compose" tabindex="-1">Setup docker images with docker-compose <a class="direct-link" href="#setup-docker-images-with-docker-compose">#</a></h3><p>We will use <a href="https://github.com/dydx/alpine-nginx-php-mariadb">dydx/alpine-nginx-php-mariadb</a> and modify it to suit our needs. It is a docker replacement for homestead. Both docker images are based on Alpine Linux which makes it small. Create the following <code>docker-compose.yml</code> file on root of the project:</p><pre><code>front:
  image: dydx/alpine-nginx-phpfpm
  ports:
    - &quot;80:80&quot;
  volumes:
    - .:/var/www
    - docker/nginx/sites-enabled:/etc/nginx/sites-enabled
  links:
    - mysql:mysql

mysql:
  image: dydx/alpine-mariadb
  ports:
    - &quot;3306:3306&quot;
  volumes:
    - docker/db/data:/var/lib/mysql
</code></pre><ul><li>We are using dydx/alpine-nginx-phpfpm image named as front, it has PHP Nginx 1.8 and PHP-FPM.</li><li>It uses supervisor to keep nginx and PHP-FPM running.</li><li>We copy the all the files in current folder inside docker at <code>/var/www</code> to execute it.</li><li>Other volumes are there to override the sites-enabled with virtual host and supervisor config to fix an error.</li><li>The second definition is MySQL for which the data is saved in ./docker/db/data folder.</li><li>The front container links the MySQL (MariaDB) container with the name <code>mysql</code></li></ul><h3 id="create-needed-folders" tabindex="-1">Create needed folders <a class="direct-link" href="#create-needed-folders">#</a></h3><p>In project root create the following folders:</p><pre><code>./docker
./docker/db
./docker/nginx
./docker/nginx/sites-enabled
</code></pre><p>All MYSQL/MariaDB data that would generally be stored in <code>/var/lib/mysql</code> will be linked as volume from <code>./docker/db</code>.<br>This is done as docker containers don't have data persistence. This will keep the MySQL data persisted on the host machine which will be reused when the MySQL/MariaDB container is restarted. The folder structure should<br>be like below:</p><img class="center" loading="lazy" src="/images/laravel-mysql-docker/folder-structure.png" title="Laravel, MariaDB (MySQL) and docker, docker compose folder structure" alt="Laravel, MariaDB (MySQL) and docker, docker compose folder structure"><h3 id="create-default-sites-enabled" tabindex="-1">Create default sites-enabled <a class="direct-link" href="#create-default-sites-enabled">#</a></h3><p>Create a file named <code>default</code> on <code>./docker/nginx/sites-enabled</code> like below:</p><pre><code>server {
  server_name laravel-docker.dev;
  root        /var/www/public;
  index       index.php;

  client_max_body_size 100M;
  fastcgi_read_timeout 1800;

  location / {
    try_files $uri $uri/ /index.php$query_string;
  }

  location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
    expires       max;
    log_not_found off;
    access_log    off;
  }

  location ~ \.php$ {
    try_files     $uri =404;
    include       fastcgi_params;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    fastcgi_pass  127.0.0.1:9000;
  }
}
</code></pre><h3 id="run-docker-compose-up" tabindex="-1">Run Docker compose up <a class="direct-link" href="#run-docker-compose-up">#</a></h3><p>Now give you are in the project root, you can run <code>docker-compose up</code> to build and run the containers.<br>Wait for the containers to download. You can do more customization if you create your own image and do a<br>docker-compose build to build the images.</p><p>After you run docker-compose up you will see output like below:</p><img class="center" loading="lazy" src="/images/laravel-mysql-docker/docker-compose-up.png" title="Laravel, MariaDB (MySQL) and docker, docker compose up output" alt="Laravel, MariaDB (MySQL) and docker, docker compose up output"><h3 id="fix-permissions" tabindex="-1">Fix permissions <a class="direct-link" href="#fix-permissions">#</a></h3><p>The containers are up still as the cache and logs are not writable it will hit a 500 Internal server<br>error. To fix this use the following command to relax the file permissions inside the container in a<br>new console tab.</p><pre><code>docker exec -it laravelmysqldocker_front_1 chmod 0777 /var/www/storage -R
</code></pre><p>or it can be done locally too with the following command:</p><pre><code>chmod 0777 /var/www/storage -R
</code></pre><p>If you want to run your artisan commands you can run them inside the front container. Hit the command below:</p><pre><code>docker exec -it laravelmysqldocker_front_1 /bin/sh
</code></pre><p>You will get the shell of the front container then do <code>cd /var/www</code> and <code>php artisan</code> all your artisan commands are there.</p><h3 id="access-http%3A%2F%2Flaravel-docker.dev" tabindex="-1">Access <a href="http://laravel-docker.dev">http://laravel-docker.dev</a> <a class="direct-link" href="#access-http%3A%2F%2Flaravel-docker.dev">#</a></h3><p>You should be able to load Laravel in the browser now navigating to <code>http://laravel-docker.dev</code>. Here you can see the Laravel 5 default page loading.</p><h2 id="mysql-settings" tabindex="-1">MySQL Settings <a class="direct-link" href="#mysql-settings">#</a></h2><p>You can check if MySQL/MariaDB is running by logging into MySQL locally with:</p><pre><code>mysql -uhomestead -psecret homestead
</code></pre><p>This will connect to you local port 3306 and you can see that mysql is working. You can even use tools like<br>MySQL workbench to verify that MySQL is working fine.</p><p>From the container when you connect to MySQL the <code>DB_HOST</code> is not localhost anymore it should be <code>mysql</code> (as set in docker-compose.yml file) and you are all set to use MySQL. As an example have a look at the db part of .env file I used:</p><pre><code>DB_HOST=mysql
DB_DATABASE=homestead
DB_USERNAME=homestead
DB_PASSWORD=secret
</code></pre><p>The easiest way to verify if Laravel is talking to MySQL/MariaDb correctly is just run the following command:</p><pre><code>docker exec -it laravelmysqldocker_front_1 /bin/sh

## you will be inside the front container now

cd /var/www/

php artisan migrate
</code></pre><p>Then you will see some messages like below:</p><pre><code>Migration table created successfully.
Migrated: 2014_10_12_000000_create_users_table
Migrated: 2014_10_12_100000_create_password_resets_table
</code></pre><p>Now run the following queries on MySQL/MariaDb via the cli client or some other client like MySQL Workbench.</p><pre><code>use homestead;
describe users;
</code></pre><p>You will get an output like below:</p><img class="center" loading="lazy" src="/images/laravel-mysql-docker/users-table.png" title="Laravel, MariaDB (MySQL) and docker, docker compose users table" alt="Laravel, MariaDB (MySQL) and docker, docker compose users table"><h3 id="stop-docker-containers" tabindex="-1">Stop docker containers <a class="direct-link" href="#stop-docker-containers">#</a></h3><p>You have seen that docker is running from the containers. To stop your containers you should run:</p><pre><code>docker-compose stop
</code></pre><p>on the project root and it will stop the containers like below:</p><img class="center" loading="lazy" src="/images/laravel-mysql-docker/docker-compose-stop.png" title="Laravel, MariaDB (MySQL) and docker, docker compose stop output" alt="Laravel, MariaDB (MySQL) and docker, docker compose stop output"><h2 id="next-steps" tabindex="-1">Next Steps <a class="direct-link" href="#next-steps">#</a></h2><p>You can carry on using the docker containers to replace your local Apache/Ngnix and MySQL. You can develop your Laravel application with ease using docker and docker compose.</p><h2 id="conclusion" tabindex="-1">Conclusion <a class="direct-link" href="#conclusion">#</a></h2><blockquote><p>You can use this analogy that containers are cattle and virtual machines (VMs) are pets.</p></blockquote><p>Creating, deleting and reconstructing the containers should be easy, fast and seamless than VMs.<br>If you want to speed up your development flow and help other team members contribute faster to the project opt for docker and docker-comopse.</p><p>You can even host your Laravel app using <a href="/blog/2023/04/serverless-containers/">serverless containers</a> on Google <a href="/blog/2019/11/why-use-google-cloud-run-5-compelling-reasons/">Cloud Run</a>, this <a href="/blog/2019/10/get-laravel-6-running-on-google-cloud-run-step-by-step-with-ci/">guide</a> will show you how to do it step-by-step. Happy Dockerizing and coding Laravel + PHP!</p></div><div class="flex items-center justify-between gap-3 md:gap-4 flex-wrap md:flex-nowrap py-2 border-y border-lightbg mt-4"><div class="flex items-center justify-start md:gap-4 gap-2 flex-wrap w-2/3"><div class="flex justify-start items-center gap-3 md:gap-4"><img src="/images/favicons/favicon-32x32-pp.png" alt="Geshan Manandhar" class="w-10 h-10 rounded-full object-cover flex-shrink-0"> <span class="text-gray font-medium font-ui text-md md:text-xl uppercase tracking-wide text-start">Geshan Manandhar</span></div><time datetime="2015-10-24" data-updated="true"><time class="entry-date" datetime="2015-10-24"><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">24-Oct-2015 </span></time></time><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">8 MIN READ</span></div><button type="button" id="share-button-bottom" class="flex items-center justify-center w-8 h-8 md:w-9 md:h-9 rounded text-lightGray hover:border-gray-400 hover:bg-gray-50 transition-colors flex-shrink-0" aria-label="Share this post" onclick="toggleShareIconsBottom(); ga('send', 'event', 'share', 'clickShareOnPost');"><img src="/images/shareIcon.svg" alt="Share this post" class="w-6 h-6"></button></div><div id="share-icons-container-bottom" class="share-icons-bottom print:hidden hidden mx-auto" aria-label="Share this post"><div class="w-full flex items-center justify-center mx-auto gap-3"><span class="share-icons"><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://geshan.com.np/blog/2015/10/getting-started-with-laravel-mariadb-mysql-docker/" target="_blank" title="Share 'Getting started with Laravel, MariaDB (MySQL) and docker, docker compose' on LinkedIn" onclick="ga('send', 'event', 'share', 'clickShareOnLinkedIn');"><span id="linkedin-share" class="text-[#0077B5]"><img src="/images/social-icons/linkedin.svg" alt="LinkedIn" class="sharing-common"> </span></a><a href="http://twitter.com/share?text=Getting started with Laravel, MariaDB (MySQL) and docker, docker compose - &url=https://geshan.com.np/blog/2015/10/getting-started-with-laravel-mariadb-mysql-docker/" target="_blank" title="Share 'Getting started with Laravel, MariaDB (MySQL) and docker, docker compose' on Twitter" onclick="ga('send', 'event', 'share', 'clickShareOnTwitter');"><span id="twitter-share" class="text-[#1DA1F2]"><img src="/images/social-icons/twitter.svg" alt="Twitter" class="sharing-common"> </span></a><a href="http://www.facebook.com/sharer.php?u=https://geshan.com.np/blog/2015/10/getting-started-with-laravel-mariadb-mysql-docker/" target="_blank" title="Share 'Getting started with Laravel, MariaDB (MySQL) and docker, docker compose' on Facebook" onclick="ga('send', 'event', 'share', 'clickShareOnFacebook');"><span id="facebook-share" class="text-[#1877F2]"><img src="/images/social-icons/facebook.svg" alt="Facebook" class="sharing-common"> </span></a><a href="https://t.me/share/url?url=https://geshan.com.np/blog/2015/10/getting-started-with-laravel-mariadb-mysql-docker/" target="_blank" title="Share 'Getting started with Laravel, MariaDB (MySQL) and docker, docker compose' on Telegram" onclick="ga('send', 'event', 'share', 'clickShareOnTelegram');"><span id="telegram-share" class="text-[#0088cc]"><img src="/images/social-icons/telegram.svg" alt="Telegram" class="sharing-common"> </span></a><a href="https://api.whatsapp.com/send?text=https://geshan.com.np/blog/2015/10/getting-started-with-laravel-mariadb-mysql-docker/" target="_blank" title="Share 'Getting started with Laravel, MariaDB (MySQL) and docker, docker compose' on Whatsapp" onclick="ga('send', 'event', 'share', 'clickShareOnWhatsapp');"><span id="whatsapp-share" class="text-[#25d366]"><img src="/images/social-icons/whatsapp.svg" alt="WhatsApp" class="sharing-common"></span></a></span></div></div></article><div class="mt-3"><a href="/blog/categories/docker/" title="Docker" class="background-lightbg mr-4 mb-2 inline-block mt-2 rounded border-2 bg-gray-100 font-semibold font-ui text-gray hover:text-gray-400 px-3 py-1 text-xl border-gray-300 cursor-pointer hover:border-gray-400">docker </a><a href="/blog/categories/php/" title="PHP" class="background-lightbg mr-4 mb-2 inline-block mt-2 rounded border-2 bg-gray-100 font-semibold font-ui text-gray hover:text-gray-400 px-3 py-1 text-xl border-gray-300 cursor-pointer hover:border-gray-400">php </a><a href="/blog/categories/laravel/" title="Laravel" class="background-lightbg mr-4 mb-2 inline-block mt-2 rounded border-2 bg-gray-100 font-semibold font-ui text-gray hover:text-gray-400 px-3 py-1 text-xl border-gray-300 cursor-pointer hover:border-gray-400">laravel</a></div><section class="md:w-full mx-auto mt-4"><h3 class="comments font-heading">Comments</h3><div id="disqus_thread"></div><button id="disqus_trigger" class="font-ui text-blackText hover:border-darkAvocado border-blacktext hover:shadow-lg border-2 transition ease-in-out delay-100 px-3 py-2 pt-2 mt-2 rounded-md text-center block h-auto text-xl" onclick="load_disqus()">Post a Comment</button><div id="disqus_thread" aria-live="polite"></div></section></div></div><section class="md:w-full mx-auto mt-4 bg-lightAvocado p-4 rounded-lg pb-8"><div class="max-w-6xl mx-auto md:py-12 px-4"><h2 class="text-4xl text-darkAvocado font-heading font-regular flex-shrink-0 py-8 tracking-normal leading-[105%] md:leading-[105%]"><span class="text-lightGray italic">Related</span> <span class="text-blackText">Blogs</span></h2><div class="grid grid-cols-1 md:grid-cols-2 gap-8"><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2019/10/get-laravel-6-running-on-google-cloud-run-step-by-step-with-ci/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">Set up Laravel 6 on Google Cloud Run step by step with Continuous Integration (CI)</a> <time class="font-medium text-xl text-textColor uppercase font-ui">21-Oct-2019 &nbsp;&nbsp;&nbsp; 11 min read</time><p class="text-xl text-gray font-ui">Follow this step by step guide to run Laravel on Google Cloud Run</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2023/04/serverless-containers/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">A comprehensive guide to Serverless Containers includes 3 services to run them</a> <time class="font-medium text-xl text-textColor uppercase font-ui">11-Apr-2023 &nbsp;&nbsp;&nbsp; 15 min read</time><p class="text-xl text-gray font-ui">In this extensive guide to Serverless Containers you will learn what they are and 3 services by the Big 3 Clouds to run them including Google Cloud Run.</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2020/10/docker-build-example-faster-docker-build/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">Docker build example: how to go from slow to fast docker builds</a> <time class="font-medium text-xl text-textColor uppercase font-ui">24-Oct-2020 &nbsp;&nbsp;&nbsp; 5 min read</time><p class="text-xl text-gray font-ui">In this post, we will see a docker build example of a node js API application starting from slow and ending up in a ~10x faster build (60 secs to 6 secs).</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2019/11/how-to-use-docker-multi-stage-build/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to use docker multi-stage build to create optimal images for dev and production</a> <time class="font-medium text-xl text-textColor uppercase font-ui">25-Nov-2019 &nbsp;&nbsp;&nbsp; 6 min read</time><p class="text-xl text-gray font-ui">Follow this step by step guide to know how to use docker multi-stage build with a Node js app demo</p></div></div></div></section><section class="bg-avocado md:py-0 py-12 px-4"><div class="max-w-6xl mx-auto"><div class="md:hidden"><h2 class="mb-4 text-3xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-base text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-base text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity w-full text-center">Follow on LinkedIn &nbsp;→</a></div><div class="hidden md:grid lg:hidden grid-cols-3 gap-8 items-center"><div class="z-10 col-span-2"><h2 class="mb-4 text-2xl md:text-4xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-xl text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-xl text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity">Follow on LinkedIn &nbsp;→</a></div><div class="flex items-center justify-end col-span-1"><img class="w-32 h-auto" src="/images/theme/new_logo.svg" alt="Geshan"></div></div><div class="hidden lg:grid grid-cols-2 gap-8 lg:gap-12 items-center justify-between h-full"><div class="z-10"><h2 class="mb-4 text-2xl md:text-4xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-xl text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><p class="text-xl text-blackText font-body font-regular mb-6">A big thank you for supporting this ad. free, unobstructive (no overlays, no pop-ups) blog.</p></div><div class="flex items-center gap-12 w-full md:w-auto justify-end self-end"><img class="w-16 md:w-32 h-auto" src="/images/theme/new_logo.svg" alt="Geshan"> <a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-xl text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity w-full md:w-auto text-center md:text-left">Follow on LinkedIn &nbsp;→</a></div></div></div></section></div></div></div></main><footer role="contentinfo"><footer class="bg-avocado sm:px-4"><div class="max-w-6xl mx-auto flex flex-col md:flex-row sm:flex-col justify-between gap-2 items-center sm:items-center md:items-center py-10 font-nav text-lightGray text-base font-regular"><div class="pb-0 sm:pb-2 text-gray"><span class="pr-4">Copyright © 2026 Geshan Manandhar.</span></div><div class="pb-0 sm:pb-2"><ul class="flex"><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> LinkedIn</a></li><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://www.twitter.com/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> Twitter</a></li><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://github.com/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> Github</a></li></ul></div></div></footer></footer><script src="/js/all.min.js" defer="defer"></script></body></html>