<!doctype html><html class="no-js" lang="en"><head><meta charset="utf-8"><meta name="author" content="Geshan Manandhar"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Learn the main concepts docker compose, in this handy tutorial. You can get staretd quickly with docker compose reading this."><meta name="keywords" content="docker compose tutorial, docker-compose tutorial, tutorial docker compose"><meta name="p:domain_verify" content="e654c68562abebfa25c291f59d7d00e8"><meta property="og:type" content="website"><meta property="og:url" content="https://geshan.com.np/blog/2024/04/docker-compose-tutorial/"><meta property="og:title" content="Getting started with Docker-compose, a quick tutorial"><meta property="og:description" content="Learn the main concepts docker compose, in this handy tutorial. You can get staretd quickly with docker compose reading this."><meta property="og:site_name" content="Geshan&#39;s Blog"><meta property="og:image" content="https://geshan.com.np/images/docker-compose-tutorial/01docker-compose-tutorial.jpg"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:widgets:new-embed-design" content="on"><meta name="twitter:site" content="@geshan"><meta name="twitter:creator" content="@geshan"><meta name="twitter:title" content="Getting started with Docker-compose, a quick tutorial"><meta name="twitter:description" content="Learn the main concepts docker compose, in this handy tutorial. You can get staretd quickly with docker compose reading this."><meta name="twitter:image:src" content="https://geshan.com.np/images/docker-compose-tutorial/01docker-compose-tutorial.jpg"><link rel="canonical" href="https://geshan.com.np/blog/2024/04/docker-compose-tutorial/"><meta property="fb:pages" content="30717799226"><meta property="fb:app_id" content="106030259434380"><meta name="monetization" content="$ilp.uphold.com/aKHWpqhphm9f"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicons/favicon-16x16.png"><link href="/atom.xml" rel="alternate" title="Geshan&#39;s Blog" type="application/atom+xml"><title>Getting started with Docker-compose, a quick tutorial</title><link rel="preconnect" href="/" crossorigin><link rel="preload" href="/css/fonts.css" as="style"><link rel="preload" href="/fonts/source-sans-4/source-serif-4-latin-400-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/source-sans-4/source-serif-4-latin-500-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/source-sans-pro/source-sans-pro-latin-400-normal.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="/css/fonts.css"><link rel="stylesheet" href="/css/tw-006.css"><link rel="alternate" href="/atom.xml" type="application/atom+xml" title="Geshan&#39;s Blog"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-P3NXCVQEPE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-P3NXCVQEPE');</script><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWT2D9T');</script><script src="https://cdn.jsdelivr.net/npm/@statsig/js-client@3/build/statsig-js-client+session-replay+web-analytics.min.js?apikey=client-rYO7rX8WSUyyLg9pKJwymLxM71tCE0CKgxgtUj4akzK"></script><link rel="manifest" href="/manifest.json"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="application-name" content="Geshan.com.np"><meta name="apple-mobile-web-app-title" content="Geshan.com.np"><meta name="msapplication-starturl" content="/index.html"><meta name="theme-color" content="#6947E7"><script>if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/sw.js").then(function(registration) {
        console.log('ServiceWorker registration successful with scope: ', registration.scope);
    }, function(err) {
        console.log('ServiceWorker registration failed: ', err);
    });
  }</script></head><body class="overflow-x-hidden font-ui flex flex-col min-h-screen"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWT2D9T" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><header role="banner"><div><nav class="bg-white" role="navigation"><div class="w-full md:max-w-6xl mx-auto py-4 px-4"><div class="flex items-center justify-between h-16"><div class="flex-shrink-0"><a href="/" class="flex items-center"><img class="h-12 w-12" src="/images/theme/new_logo.svg" alt="Geshan G"></a></div><div class="flex items-center gap-12"><div class="hidden sm:flex items-center gap-12"><a href="/posts/1/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">Posts </a><a href="/about/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">About Me </a><a href="https://newsletter.geshan.com.np/" class="uppercase text-base font-ui font-medium text-gray hover:text-midgrey transition-colors" aria-current="page">Newsletter</a></div><form class="search flex items-center" action="https://www.google.com/search" method="GET"><input type="hidden" name="sitesearch" value="geshan.com.np"><div class="relative"><input class="bg-gray-100 border border-neutralGray rounded-lg py-2 pl-10 pr-4 font-body text-sm focus:outline-none focus:ring-2 focus:ring-avocado focus:border-transparent w-40" type="text" name="q" placeholder="Search" label="search"> <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-neutralGray" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg></div></form><button type="button" class="sm:hidden inline-flex items-center justify-center p-2 rounded-md text-black focus:outline-none focus:ring-2 focus:ring-inset focus:ring-avocado" onclick="mobileView()" aria-controls="mobile-menu" aria-expanded="false"><span class="sr-only">Open main menu</span> <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg></button></div></div></div><div class="mobile-menu fixed inset-0 z-40 hidden sm:hidden bg-black bg-opacity-40" role="dialog" aria-modal="true"><div class="absolute inset-0" onclick="mobileView()" aria-hidden="true"></div><div class="mobile-menu-panel relative ml-auto flex h-full w-10/12 max-w-sm flex-col justify-start bg-white shadow-xl"><div class="flex items-center justify-between px-4 py-4 border-b border-gray-200"><div class="flex items-center gap-3"><img class="h-8 w-8" src="/images/theme/new_logo.svg" alt="Geshan G"> <span class="text-lg font-semibold text-textColor font-body">Geshan's Blog</span></div><button type="button" class="inline-flex items-center justify-center rounded-full p-2 text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-avocado" onclick="mobileView()" aria-label="Close main menu"><svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg></button></div><nav class="overflow-y-auto px-4 py-6 space-y-2"><a href="/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Home </a><a href="/posts/1/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Posts </a><a href="/about/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">About Me </a><a href="https://newsletter.geshan.com.np/" class="block rounded-lg px-3 py-2 text-base font-medium font-ui text-black hover:bg-lightAvocado" aria-current="page">Newsletter</a></nav><div class="px 4 py-4 border-t border-gray-200"><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="rounded-lg bg-darkAvocado px-4 py-2 text-base font-regular font-body text-white hover:bg-avocado hover:text-black transition-colors w-2/3 mx-auto ml-4">Connect on LinkedIn</a></div></div></div></nav></div></header><main id="wrap" role="main" class="flex-grow md:px-0"><div id="content"><div class="row"><div><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Geshan&#39;s Blog",
    "alternativeHeadline": "Getting started with Docker-compose, a quick tutorial",
    "image": "https://geshan.com.np/images/docker-compose-tutorial/01docker-compose-tutorial.jpg",
    "editor": "Geshan Manandhar",
    "genre": "Software Engineering",
    "keywords": "docker compose tutorial, docker-compose tutorial, tutorial docker compose",
    "url": "https://geshan.com.np/blog/2024/04/docker-compose-tutorial/",
    "datePublished": "2024-04-27",
    "dateCreated": "2024-04-27",
    "dateModified": "2024-04-27",
    "description": "Learn the main concepts docker compose, in this handy tutorial. You can get staretd quickly with docker compose reading this.",
    "articleBody": "Docker Compose is a powerful tool that simplifies the management and possible deployment of multi-container applications. Whether you&#39;re a seasoned developer or just starting your containerization journey, Docker Compose can streamline your workflow and boost your productivity. Let’s get going!Table of contents #What is Docker Compose?Why use Docker Compose?How to use Docker ComposeInstall Docker ComposeDefine your Application in docker-compose.ymlBuild and Run your ApplicationAdditional CommandsCode for Docker Compose UsageSlidesConclusionWhat is Docker Compose? #Imagine you&#39;re building an application that requires multiple services, like a web server, a database, and a cache. Traditionally, setting up and managing these services individually would be cumbersome and error-prone. Docker Compose comes to the rescue by providing a declarative approach to define and run multi-container Docker applications. If you want to learn more about Docker, you can read docker for beginners.At its core, Docker Compose uses a YAML file (docker-compose.yml) to describe your application&#39;s services, networks, and volumes. This single file acts as a blueprint, specifying how each container should be built, configured, and interconnected. With a single command, you can then bring your entire application stack up or down, making it incredibly convenient for development, testing, and deployment.Docker defines docker-compose as:Docker Compose is a tool for defining and running multi-container applications. It is the key to unlocking a streamlined and efficient development and deployment experience.In essence, docker-compose lets you run multiple related containers to formulate an application with all its dependent components. In the next section, you will learn about why to use docker-compose.Why use Docker Compose? #Docker Compose offers a multitude of benefits that simplify the development and deployment process for multi-container applications:Declarative Configuration: The YAML file provides a clear and concise way to define your application&#39;s infrastructure, eliminating the need for complex scripts or manual configuration.Simplified Management: With Docker Compose, you can manage the entire lifecycle of your application with a few simple commands. Start, stop, and rebuild services effortlessly.Isolation and Reproducibility: Each service runs in its own container, ensuring isolation and preventing conflicts between dependencies. This also guarantees reproducibility across different environments.Efficient Development Workflow: Docker Compose speeds up the development process by allowing you to quickly spin up and tear down your application stack, making it ideal for iterative development and testing.Portability: The docker-compose.yml file is portable, allowing you to easily share your application configuration with other developers or deploy it to different environments.On top of all that, for the developer it is much easier to get the whole app running with docker compose, you just hit  some code  that will look something like the below:There you have it a quick and useful tutorial to using docker-compose. In the next section you will find the same content in the form of slides.Slides #Conclusion #Docker Compose is a valuable tool for any developer working with multi-container applications. It simplifies the development and deployment process, promotes reproducibility, and allows you to focus on building great applications rather than managing infrastructure.By leveraging the power of Docker Compose, you can streamline your workflow and bring efficiency to your containerized applications.So, dive in, experiment, and experience the benefits of Docker Compose for yourself!",
    "author": { "@type": "Person", "name": "Geshan Manandhar" },
    "publisher": {
      "@type": "Organization",
      "name": "Geshan Manandhar",
      "logo": { "@type": "ImageObject", "url": "https://geshan.com.np/images/favicons/favicon-32x32.png" }
    },
    "mainEntityOfPage": { "@type": "WebPage", "@id": "https://geshan.com.np/blog/2024/04/docker-compose-tutorial/" }
  }</script><div class="progress-bar"></div><div class="max-w-6xl py-3 mx-auto grid-cols-12 grid gap-15 px-4 md:px-0 mb-20"><div class="col-span-12"><article class="md:w-full mx-auto"><header class="page-header text-center"><h1 class="font-semibold font-heading text-gray text-center mb-6 tracking-[-0.01em] leading-[105%] md:leading-[105%]">Getting started with Docker-compose, a quick tutorial</h1><div class="flex items-center justify-between gap-3 md:gap-4 flex-wrap md:flex-nowrap py-2 border-y border-lightbg mt-4"><div class="flex items-center justify-start md:gap-4 gap-2 flex-wrap w-2/3"><div class="flex justify-start items-center gap-3 md:gap-4"><img src="/images/favicons/favicon-32x32-pp.png" alt="Geshan Manandhar" class="w-10 h-10 rounded-full object-cover flex-shrink-0"> <span class="text-gray font-medium font-ui text-md md:text-xl uppercase tracking-wide text-start">Geshan Manandhar</span></div><time datetime="2024-04-27" data-updated="true"><time class="entry-date" datetime="2024-04-27"><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">27-Apr-2024 </span></time></time><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">8 MIN READ</span></div><button type="button" id="share-button" class="flex items-center justify-center w-8 h-8 md:w-9 md:h-9 rounded text-lightGray hover:border-gray-400 hover:bg-gray-50 transition-colors flex-shrink-0" aria-label="Share this post" onclick="toggleShareIcons(); ga('send', 'event', 'share', 'clickShareOnPost');"><img src="/images/shareIcon.svg" alt="Share this post" class="w-6 h-6"></button></div><div id="share-icons-container" class="share-icons print:hidden hidden" aria-label="Share this post"><div class="flex items-center justify-center gap-3"><span class="share-icons"><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://geshan.com.np/blog/2024/04/docker-compose-tutorial/" target="_blank" title="Share 'Getting started with Docker-compose, a quick tutorial' on LinkedIn" onclick="ga('send', 'event', 'share', 'clickShareOnLinkedIn');"><span id="linkedin-share" class="text-[#0077B5]"><img src="/images/social-icons/linkedin.svg" alt="LinkedIn" class="sharing-common"> </span></a><a href="http://twitter.com/share?text=Getting started with Docker-compose, a quick tutorial - &url=https://geshan.com.np/blog/2024/04/docker-compose-tutorial/" target="_blank" title="Share 'Getting started with Docker-compose, a quick tutorial' on Twitter" onclick="ga('send', 'event', 'share', 'clickShareOnTwitter');"><span id="twitter-share" class="text-[#1DA1F2]"><img src="/images/social-icons/twitter.svg" alt="Twitter" class="sharing-common"> </span></a><a href="http://www.facebook.com/sharer.php?u=https://geshan.com.np/blog/2024/04/docker-compose-tutorial/" target="_blank" title="Share 'Getting started with Docker-compose, a quick tutorial' on Facebook" onclick="ga('send', 'event', 'share', 'clickShareOnFacebook');"><span id="facebook-share" class="text-[#1877F2]"><img src="/images/social-icons/facebook.svg" alt="Facebook" class="sharing-common"> </span></a><a href="https://t.me/share/url?url=https://geshan.com.np/blog/2024/04/docker-compose-tutorial/" target="_blank" title="Share 'Getting started with Docker-compose, a quick tutorial' on Telegram" onclick="ga('send', 'event', 'share', 'clickShareOnTelegram');"><span id="telegram-share" class="text-[#0088cc]"><img src="/images/social-icons/telegram.svg" alt="Telegram" class="sharing-common"> </span></a><a href="https://api.whatsapp.com/send?text=https://geshan.com.np/blog/2024/04/docker-compose-tutorial/" target="_blank" title="Share 'Getting started with Docker-compose, a quick tutorial' on Whatsapp" onclick="ga('send', 'event', 'share', 'clickShareOnWhatsapp');"><span id="whatsapp-share" class="text-[#25d366]"><img src="/images/social-icons/whatsapp.svg" alt="WhatsApp" class="sharing-common"></span></a></span></div></div></header><div class="entry-content clearfix font-body text-xl text-gray"><p>Docker Compose is a powerful tool that simplifies the management and possible deployment of multi-container applications. Whether you're a seasoned developer or just starting your containerization journey, Docker Compose can streamline your workflow and boost your productivity. Let’s get going!</p><img class="center" src="/images/docker-compose-tutorial/01docker-compose-tutorial.jpg" title="Docker for beginners: a guide to understanding the concepts" alt="Docker for beginners: a guide to understanding the concepts"><h2 id="table-of-contents" tabindex="-1">Table of contents <a class="direct-link" href="#table-of-contents">#</a></h2><ul><li><a href="#what-is-docker-compose">What is Docker Compose?</a></li><li><a href="#why-use-docker-compose">Why use Docker Compose?</a></li><li><a href="#how-to-use-docker-compose">How to use Docker Compose</a><ul><li><a href="#install-docker-compose">Install Docker Compose</a></li><li><a href="#define-your-application-in-docker-composeyml">Define your Application in docker-compose.yml</a></li><li><a href="#build-and-run-your-application">Build and Run your Application</a></li><li><a href="#additional-commands">Additional Commands</a></li></ul></li><li><a href="#code-for-docker-compose-usage">Code for Docker Compose Usage</a></li><li><a href="#slides">Slides</a></li><li><a href="#conclusion">Conclusion</a></li></ul><h2 id="what-is-docker-compose%3F" tabindex="-1">What is Docker Compose? <a class="direct-link" href="#what-is-docker-compose%3F">#</a></h2><p>Imagine you're building an application that requires multiple services, like a web server, a database, and a cache. Traditionally, setting up and managing these services individually would be cumbersome and error-prone. Docker Compose comes to the rescue by providing a declarative approach to define and run multi-container Docker applications. If you want to learn more about Docker, you can read <a href="/blog/2024/04/docker-for-beginners/">docker for beginners</a>.</p><p>At its core, Docker Compose uses a YAML file (docker-compose.yml) to describe your application's services, networks, and volumes. This single file acts as a blueprint, specifying how each container should be built, configured, and interconnected. With a single command, you can then bring your entire application stack up or down, making it incredibly convenient for development, testing, and deployment.</p><p>Docker defines <a href="https://docs.docker.com/compose/">docker-compose</a> as:</p><blockquote><p>Docker Compose is a tool for defining and running multi-container applications. It is the key to unlocking a streamlined and efficient development and deployment experience.</p></blockquote><p>In essence, docker-compose lets you run multiple related containers to formulate an application with all its dependent components. In the next section, you will learn about why to use docker-compose.</p><h2 id="why-use-docker-compose%3F" tabindex="-1">Why use Docker Compose? <a class="direct-link" href="#why-use-docker-compose%3F">#</a></h2><p>Docker Compose offers a multitude of benefits that simplify the development and deployment process for multi-container applications:</p><ul><li><p><strong>Declarative Configuration:</strong> The YAML file provides a clear and concise way to define your application's infrastructure, eliminating the need for complex scripts or manual configuration.</p></li><li><p><strong>Simplified Management:</strong> With Docker Compose, you can manage the entire lifecycle of your application with a few simple commands. Start, stop, and rebuild services effortlessly.</p></li><li><p><strong>Isolation and Reproducibility:</strong> Each service runs in its own container, ensuring isolation and preventing conflicts between dependencies. This also guarantees reproducibility across different environments.</p></li><li><p><strong>Efficient Development Workflow:</strong> Docker Compose speeds up the development process by allowing you to quickly spin up and tear down your application stack, making it ideal for iterative development and testing.</p></li><li><p><strong>Portability:</strong> The docker-compose.yml file is portable, allowing you to easily share your application configuration with other developers or deploy it to different environments.</p></li></ul><p>On top of all that, for the developer it is much easier to get the whole app running with docker compose, you just hit <code>docker compose up</code> and get a coffee, possibly your app is already up and running.</p><h2 id="how-to-use-docker-compose" tabindex="-1">How to use Docker Compose <a class="direct-link" href="#how-to-use-docker-compose">#</a></h2><p>Getting started with Docker Compose is straightforward:</p><h3 id="install-docker-compose" tabindex="-1">Install Docker Compose <a class="direct-link" href="#install-docker-compose">#</a></h3><p>Ensure you have Docker installed on your system, and then download and install Docker Compose. Depending on your operating system, you can follow the <a href="https://docs.docker.com/compose/install/">steps</a> to get docker compose as part of docker or even as a standalone application.</p><h3 id="define-your-application-in-docker-compose.yml" tabindex="-1">Define your Application in docker-compose.yml <a class="direct-link" href="#define-your-application-in-docker-compose.yml">#</a></h3><p>Create a docker-compose.yml file in your project's root directory. This file will define your services, networks, and volumes.</p><h3 id="build-and-run-your-application" tabindex="-1">Build and Run your Application <a class="direct-link" href="#build-and-run-your-application">#</a></h3><p>Use the <code>docker-compose up</code> command to build the images (if necessary) and start your application. Docker Compose will handle the orchestration and networking of your services.</p><h3 id="additional-commands" tabindex="-1">Additional Commands <a class="direct-link" href="#additional-commands">#</a></h3><ul><li><code>docker-compose build</code>: Builds or rebuilds your services.</li><li><code>docker-compose down</code>: Stops and removes containers, networks, and volumes.</li><li><code>docker-compose ps</code>: Lists the status of your services.</li><li><code>docker-compose logs</code>: View logs from your services.</li><li><code>docker-compose exec</code>: Execute a command in a running container.</li></ul><p>Let’s have a look at the above in action, in the next section of this docker compose tutorial blog post.</p><h2 id="code-for-docker-compose-usage" tabindex="-1">Code for Docker Compose Usage <a class="direct-link" href="#code-for-docker-compose-usage">#</a></h2><p>Here's a basic example of a docker-compose.yml file for an application with a web server and a database:</p><img class="center" loading="lazy" src="/images/docker-compose-tutorial/02docker-compose-tutorial-example.jpg" title="Example docker comopose file showing the dependency of the api container to the db container" alt="Example docker comopose file showing the dependency of the api container to the db container"><p>This example defines two services: <code>api</code> and <code>db</code>. The <code>api</code> service builds an image from the Dockerfile in the current directory and maps port 3000 of the container to port 3000 of the host machine. It also specifies that it depends on the <code>db</code> service, ensuring that the database is initiated to start before the web server.</p><p>The <code>db</code> service uses the official PostgreSQL image Alpine Linux flavor and sets an environment variable for the user and password. You can find the docker-compose file and all the other code of this Node.js application as a <a href="https://github.com/geshan/nodejs-postgres-docker-compose/tree/master">GitHub repository</a>. You can learn more about the docker-compose <a href="https://github.com/geshan/nodejs-postgres-docker-compose/blob/master/docker-compose.yml">file</a> as seen below:</p><pre class="language-bash"><code class="language-bash">version: <span class="token string">'3.8'</span><br>services:<br>  db:<br>    image: postgres:14.1-alpine<br>    restart: always<br>    environment:<br>      - <span class="token assign-left variable">POSTGRES_USER</span><span class="token operator">=</span>postgres<br>      - <span class="token assign-left variable">POSTGRES_PASSWORD</span><span class="token operator">=</span>postgres<br>    ports:<br>      - <span class="token string">'5432:5432'</span><br>    volumes: <br>      - db:/var/lib/postgresql/data<br>      - ./db/init.sql:/docker-entrypoint-initdb.d/create_tables.sql<br>  api:<br>    build:<br>      context: ./<br>      target: production<br>    image: quotes-api<br>    depends_on:<br>      - db<br>    ports:<br>      - <span class="token number">3000</span>:3000<br>    environment:<br>      NODE_ENV: production<br>      DB_HOST: db<br>      DB_PORT: <span class="token number">5432</span><br>      DB_USER: postgres<br>      DB_PASSWORD: postgres<br>      DB_NAME: postgres<br>    volumes:<br>      - ./:/src<br>      - /src/node_modules<br>volumes:<br>  db:<br>    driver: <span class="token builtin class-name">local</span></code></pre><p>Let’s look at how the docker compose file is structured.</p><p>First, <code>version: '3.8'</code> - This line specifies the Docker Compose file format version. Then the services needed for the <a href="/blog/2021/01/nodejs-postgresql-tutorial/">Node.js Postgres</a> docker application with <a href="https://geshan.com.np/blog/2021/12/docker-postgres/">Postgres and Docker compose</a> are defined.</p><p>Among them <code>db</code> is the first service, this service defines a Postgres database container with:</p><p>*<code>image</code>: postgres:14.1-alpine - This specifies the Docker image to use, which is the official Postgres image with version 14.1 and the Alpine Linux base.</p><ul><li><code>restart</code>: always - Ensures the database container restarts automatically if it crashes or the system reboots.</li><li><code>environment</code> - Sets environment variables for the container:<ul><li><code>POSTGRES_USER=postgres</code> &amp; <code>POSTGRES_PASSWORD=postgres</code> - Credentials for accessing the database. (Note: Consider using environment secrets management in production for better security).</li></ul></li><li><code>ports</code> - Maps the container's port 5432 (default Postgres port) to the host machine's port 5432. This allows you to connect to the database from the host using localhost:5432.</li><li><code>volumes</code> - Defines persistent storage for the database:<ul><li><code>db:/var/lib/postgresql/data</code> - This volume named db is mounted to the container's * /var/lib/postgresql/data directory, which stores the database files. This ensures data persistence even if the container restarts.</li><li><code>./db/init.sql:/docker-entrypoint-initdb.d/create_tables.sql</code> - Mounts a local SQL script (<code>./db/init.sql</code>) from the project directory to the<code>/docker-entrypoint-initdb.d/create_tables.sql</code> path inside the container. This script creates tables in the database upon container startup.</li></ul></li></ul><p>The next service is <code>web</code>, this service defines a Node.js API container. It has the following parts:</p><ul><li><code>build</code> - Instructs Docker Compose to build the image for this service from a Dockerfile located in the current directory (./).</li><li><code>context</code>: ./ - Specifies the context directory for the build process (the project root in this case).<ul><li><code>target</code>: production - If your Dockerfile has multiple build stages, this defines the target stage to use for building the image (likely containing production dependencies).</li></ul></li><li><code>image</code>: quotes-api - Sets the name for the built image.</li><li><code>depends_on</code> - Declares that the api service depends on the db service. This ensures the database container is up and running before starting the API container. You can read more about <a href="/blog/2024/02/docker-compose-depends-on/">docker compose depends on</a> in this guide.</li><li><code>ports</code> - Maps the container's port 3000 (where the API runs) to the host machine's port 3000.</li><li><code>environment</code> - Sets environment variables for the API container:<ul><li><code>NODE_ENV</code>: production - Sets the Node environment to production mode, it influences how your API behaves with thing like caching</li><li>Variables like <code>DB_HOST</code>, <code>DB_PORT</code>, <code>DB_USER</code>, <code>DB_PASSWORD</code>, and <code>DB_NAME</code> provide connection details for the database container (accessible using the service name db).</li></ul></li><li>volumes - Mounts directories for the API container:<ul><li><code>./:/src</code> - Mounts the entire project directory (./) into the container's /src directory, making your code accessible within the container.</li><li><code>/src/node_modules</code> - This is an interesting volume. It mounts the /src/node_modules directory of the container back to the host machine at the same location. This can be useful to avoid rebuilding dependencies every time the container restarts, but be aware of potential caching issues.</li></ul></li></ul><p>All you need to do is clone the <a href="https://github.com/geshan/nodejs-postgres-docker-compose">repository</a> and run <code>docker-compose up</code> which will give the following output (it may take some time to download the base images if you are running it for the first time):</p><img class="center" loading="lazy" src="/images/docker-compose-tutorial/03docker-compose-working.jpg" title="Node.js app with Postgres DB running with docker compose locally" alt="Node.js app with Postgres DB running with docker compose locally"><p>You see the running app at <code>http://localhost:3000/quotes</code> that will look something like the below:</p><img class="center" loading="lazy" src="/images/docker-compose-tutorial/04nodejs-app-running.jpg" title="Node.js app with Postgres DB running on the browser" alt="Node.js app with Postgres DB running on the browser"><p>There you have it a quick and useful tutorial to using docker-compose. In the next section you will find the same content in the form of slides.</p><h2 id="slides" tabindex="-1">Slides <a class="direct-link" href="#slides">#</a></h2><iframe src="https://docs.google.com/presentation/d/e/2PACX-1vRU3dgiMffLJ42tsl7Ow-slZYQbqOjmHtTvd55QmT7-3MGwirQyNM8352tWNx-uXEWaEOQjyJBhKoaj/embed?start=false&loop=false&delayms=3000" frameborder="0" width="960" height="569" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe><h2 id="conclusion" tabindex="-1">Conclusion <a class="direct-link" href="#conclusion">#</a></h2><p>Docker Compose is a valuable tool for any developer working with multi-container applications. It simplifies the development and deployment process, promotes reproducibility, and allows you to focus on building great applications rather than managing infrastructure.</p><blockquote><p>By leveraging the power of Docker Compose, you can streamline your workflow and bring efficiency to your containerized applications.</p></blockquote><p>So, dive in, experiment, and experience the benefits of Docker Compose for yourself!</p></div><div class="flex items-center justify-between gap-3 md:gap-4 flex-wrap md:flex-nowrap py-2 border-y border-lightbg mt-4"><div class="flex items-center justify-start md:gap-4 gap-2 flex-wrap w-2/3"><div class="flex justify-start items-center gap-3 md:gap-4"><img src="/images/favicons/favicon-32x32-pp.png" alt="Geshan Manandhar" class="w-10 h-10 rounded-full object-cover flex-shrink-0"> <span class="text-gray font-medium font-ui text-md md:text-xl uppercase tracking-wide text-start">Geshan Manandhar</span></div><time datetime="2024-04-27" data-updated="true"><time class="entry-date" datetime="2024-04-27"><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">27-Apr-2024 </span></time></time><span class="text-textColor font-ui font-medium text-md md:text-xl uppercase">8 MIN READ</span></div><button type="button" id="share-button-bottom" class="flex items-center justify-center w-8 h-8 md:w-9 md:h-9 rounded text-lightGray hover:border-gray-400 hover:bg-gray-50 transition-colors flex-shrink-0" aria-label="Share this post" onclick="toggleShareIconsBottom(); ga('send', 'event', 'share', 'clickShareOnPost');"><img src="/images/shareIcon.svg" alt="Share this post" class="w-6 h-6"></button></div><div id="share-icons-container-bottom" class="share-icons-bottom print:hidden hidden mx-auto" aria-label="Share this post"><div class="w-full flex items-center justify-center mx-auto gap-3"><span class="share-icons"><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://geshan.com.np/blog/2024/04/docker-compose-tutorial/" target="_blank" title="Share 'Getting started with Docker-compose, a quick tutorial' on LinkedIn" onclick="ga('send', 'event', 'share', 'clickShareOnLinkedIn');"><span id="linkedin-share" class="text-[#0077B5]"><img src="/images/social-icons/linkedin.svg" alt="LinkedIn" class="sharing-common"> </span></a><a href="http://twitter.com/share?text=Getting started with Docker-compose, a quick tutorial - &url=https://geshan.com.np/blog/2024/04/docker-compose-tutorial/" target="_blank" title="Share 'Getting started with Docker-compose, a quick tutorial' on Twitter" onclick="ga('send', 'event', 'share', 'clickShareOnTwitter');"><span id="twitter-share" class="text-[#1DA1F2]"><img src="/images/social-icons/twitter.svg" alt="Twitter" class="sharing-common"> </span></a><a href="http://www.facebook.com/sharer.php?u=https://geshan.com.np/blog/2024/04/docker-compose-tutorial/" target="_blank" title="Share 'Getting started with Docker-compose, a quick tutorial' on Facebook" onclick="ga('send', 'event', 'share', 'clickShareOnFacebook');"><span id="facebook-share" class="text-[#1877F2]"><img src="/images/social-icons/facebook.svg" alt="Facebook" class="sharing-common"> </span></a><a href="https://t.me/share/url?url=https://geshan.com.np/blog/2024/04/docker-compose-tutorial/" target="_blank" title="Share 'Getting started with Docker-compose, a quick tutorial' on Telegram" onclick="ga('send', 'event', 'share', 'clickShareOnTelegram');"><span id="telegram-share" class="text-[#0088cc]"><img src="/images/social-icons/telegram.svg" alt="Telegram" class="sharing-common"> </span></a><a href="https://api.whatsapp.com/send?text=https://geshan.com.np/blog/2024/04/docker-compose-tutorial/" target="_blank" title="Share 'Getting started with Docker-compose, a quick tutorial' on Whatsapp" onclick="ga('send', 'event', 'share', 'clickShareOnWhatsapp');"><span id="whatsapp-share" class="text-[#25d366]"><img src="/images/social-icons/whatsapp.svg" alt="WhatsApp" class="sharing-common"></span></a></span></div></div></article><div class="mt-3"><a href="/blog/categories/software-engineering/" title="Software Engineering" class="background-lightbg mr-4 mb-2 inline-block mt-2 rounded border-2 bg-gray-100 font-semibold font-ui text-gray hover:text-gray-400 px-3 py-1 text-xl border-gray-300 cursor-pointer hover:border-gray-400">software engineering </a><a href="/blog/categories/docker/" title="Docker" class="background-lightbg mr-4 mb-2 inline-block mt-2 rounded border-2 bg-gray-100 font-semibold font-ui text-gray hover:text-gray-400 px-3 py-1 text-xl border-gray-300 cursor-pointer hover:border-gray-400">docker</a></div><section class="md:w-full mx-auto mt-4"><h3 class="comments font-heading">Comments</h3><div id="disqus_thread"></div><button id="disqus_trigger" class="font-ui text-blackText hover:border-darkAvocado border-blacktext hover:shadow-lg border-2 transition ease-in-out delay-100 px-3 py-2 pt-2 mt-2 rounded-md text-center block h-auto text-xl" onclick="load_disqus()">Post a Comment</button><div id="disqus_thread" aria-live="polite"></div></section></div></div><section class="md:w-full mx-auto mt-4 bg-lightAvocado p-4 rounded-lg pb-8"><div class="max-w-6xl mx-auto md:py-12 px-4"><h2 class="text-4xl text-darkAvocado font-heading font-regular flex-shrink-0 py-8 tracking-normal leading-[105%] md:leading-[105%]"><span class="text-lightGray italic">Related</span> <span class="text-blackText">Blogs</span></h2><div class="grid grid-cols-1 md:grid-cols-2 gap-8"><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2024/05/rabbitmq-docker/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to use RabbitMQ with Docker and Docker Compose; a beginner’s guide</a> <time class="font-medium text-xl text-textColor uppercase font-ui">08-May-2024 &nbsp;&nbsp;&nbsp; 6 min read</time><p class="text-xl text-gray font-ui">Learn how to run Rabbitmq with docker and docker compose in this useful tutorial.</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2024/04/docker-for-beginners/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">Docker for beginners: a guide to understanding the core concepts</a> <time class="font-medium text-xl text-textColor uppercase font-ui">21-Apr-2024 &nbsp;&nbsp;&nbsp; 7 min read</time><p class="text-xl text-gray font-ui">Learn the main concepts of containerization and Docker, from image, Docker file to running containers in this blog post.</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2024/03/nginx-docker-compose/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to use Nginx with Docker Compose effectively with examples</a> <time class="font-medium text-xl text-textColor uppercase font-ui">16-Mar-2024 &nbsp;&nbsp;&nbsp; 10 min read</time><p class="text-xl text-gray font-ui">Learn how to use nginx and docker compose proprely with a simple and multi-container example with reverse proxy setting</p></div><div class="py-4 border-b border-avocado pb-4 flex flex-col gap-2 font-ui"><a href="/blog/2024/02/docker-compose-depends-on/" class="font-semibold font-ui text-gray text-xl md:text-2xl tracking-[-0.01em] leading-[105%] md:leading-[105%]">How to use docker compose depends_on a beginner&#39;s guide</a> <time class="font-medium text-xl text-textColor uppercase font-ui">27-Feb-2024 &nbsp;&nbsp;&nbsp; 11 min read</time><p class="text-xl text-gray font-ui">Learn how to use docker compose depend_on proprely to start the dependent service first, make it healthy then only start the main container</p></div></div></div></section><section class="bg-avocado md:py-0 py-12 px-4"><div class="max-w-6xl mx-auto"><div class="md:hidden"><h2 class="mb-4 text-3xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-base text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-base text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity w-full text-center">Follow on LinkedIn &nbsp;→</a></div><div class="hidden md:grid lg:hidden grid-cols-3 gap-8 items-center"><div class="z-10 col-span-2"><h2 class="mb-4 text-2xl md:text-4xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-xl text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-xl text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity">Follow on LinkedIn &nbsp;→</a></div><div class="flex items-center justify-end col-span-1"><img class="w-32 h-auto" src="/images/theme/new_logo.svg" alt="Geshan"></div></div><div class="hidden lg:grid grid-cols-2 gap-8 lg:gap-12 items-center justify-between h-full"><div class="z-10"><h2 class="mb-4 text-2xl md:text-4xl font-heading font-regular text-textColor break-words tracking-[-0.01em] leading-[105%] md:leading-[105%]"><span class="text-textColor italic">Stay</span><span class="text-blackText"> Connected</span></h2><p class="text-xl text-blackText font-body font-regular mb-6">Follow me on LinkedIn for new posts, engineering insights, and tech takes — straight from the trenches.</p><p class="text-xl text-blackText font-body font-regular mb-6">A big thank you for supporting this ad. free, unobstructive (no overlays, no pop-ups) blog.</p></div><div class="flex items-center gap-12 w-full md:w-auto justify-end self-end"><img class="w-16 md:w-32 h-auto" src="/images/theme/new_logo.svg" alt="Geshan"> <a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer" class="inline-block bg-darkAvocado text-xl text-white px-6 py-3 rounded-lg font-body font-regular hover:opacity-90 transition-opacity w-full md:w-auto text-center md:text-left">Follow on LinkedIn &nbsp;→</a></div></div></div></section></div></div></div></main><footer role="contentinfo"><footer class="bg-avocado sm:px-4"><div class="max-w-6xl mx-auto flex flex-col md:flex-row sm:flex-col justify-between gap-2 items-center sm:items-center md:items-center py-10 font-nav text-lightGray text-base font-regular"><div class="pb-0 sm:pb-2 text-gray"><span class="pr-4">Copyright © 2026 Geshan Manandhar.</span></div><div class="pb-0 sm:pb-2"><ul class="flex"><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://www.linkedin.com/in/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> LinkedIn</a></li><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://www.twitter.com/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> Twitter</a></li><li class="hover:text-gray-300 text-lg pr-4 cursor-pointer text-gray"><a href="https://github.com/geshan" target="_blank" rel="noopener noreferrer nofollow" class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 1000 1000"><path fill="currentColor" d="M1000 267q0 112-78 188L747 631q-78 78-189 78q-97 0-171-63l115-115q26 17 56 17q44 0 75-31l175-176q31-29 31-74q0-44-30.5-74.5T734 162q-25 0-49.5 12T652 208H414L546 79Q626 1 734 1q110 0 188 78t78 188zm-387 89L498 471q-26-17-56-17q-44 0-75 31L192 661q-31 29-31 74q0 44 30.5 74.5T266 840q25 0 49.5-12t32.5-34h238L454 923q-80 78-188 78q-110 0-188-78T0 735q0-112 78-188l175-176q78-78 189-78q97 0 171 63z"/></svg> Github</a></li></ul></div></div></footer></footer><script src="/js/all.min.js" defer="defer"></script></body></html>